{"version":3,"sources":["webpack:///node_modules/@fullcalendar/daygrid/main.js","webpack:///node_modules/@fullcalendar/interaction/main.js","webpack:///node_modules/@fullcalendar/timegrid/main.js","webpack:///src/app/showcase/components/fullcalendar/fullcalendardemo.html","webpack:///src/app/showcase/components/fullcalendar/fullcalendardemo-routing.module.ts","webpack:///src/app/showcase/components/fullcalendar/fullcalendardemo.module.ts","webpack:///src/app/showcase/components/fullcalendar/fullcalendardemo.ts"],"names":["global","factory","exports","core","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","DayGridDateProfileGenerator","_super","buildRenderRange","currentRange","currentRangeUnit","isRangeAllDay","dateEnv","renderRange","start","end","endOfWeek","test","startOfWeek","valueOf","addWeeks","options","monthMode","fixedWeekCount","rowCnt","Math","ceil","diffWeeks","DateProfileGenerator","Popover","_this","isHidden","margin","documentMousedown","ev","el","contains","target","hide","show","render","style","display","position","trigger","createElement","className","top","left","content","parentEl","appendChild","listenBySelector","autoHide","document","addEventListener","destroy","removeElement","removeEventListener","elDims","getBoundingClientRect","origin","computeRect","offsetParent","clippingRect","computeClippingRect","undefined","right","width","min","bottom","height","max","applyStyle","name","slice","SimpleDayGridEventRenderer","renderSegHtml","seg","mirrorInfo","context","eventRange","eventDef","def","eventUi","ui","allDay","isDraggable","startEditable","isResizableFromStart","isStart","durationEditable","eventResizableFromStart","isResizableFromEnd","isEnd","classes","getSegClasses","skinCss","cssToStr","getSkinCss","timeHtml","timeText","titleHtml","unshift","getTimeText","htmlEscape","title","join","url","dir","computeEventTimeFormat","hour","minute","omitZeroMinute","meridiem","computeDisplayEventEnd","FgEventRenderer","DayGridEventRenderer","dayGrid","attachSegs","segs","rowStructs","renderSegRows","rowEls","forEach","rowNode","querySelector","tbodyEl","removeSegPopover","detachSegs","rowStruct","pop","segRows","row","groupSegRows","push","renderSegRow","rowSegs","colCnt","isRtl","segLevels","buildSegLevels","levelCnt","tbody","segMatrix","cellMatrix","loneCellMatrix","levelSegs","col","tr","j","td","emptyCellsUntil","endCol","rowSpan","leftCol","lastCol","firstCol","rightCol","colSpan","introHtml","renderProps","renderIntroHtml","appendToElement","prependToElement","_a","levels","sortEventSegs","isDaySegCollision","level","sort","compareDaySegCols","otherSegs","otherSeg","a","DayGridMirrorRenderer","sourceSeg","skeletonEl","htmlToElement","skeletonTopEl","skeletonTop","DayGridFillRenderer","fillSegTag","renderSegs","type","filter","els","renderFillRow","startCol","trEl","toLowerCase","getElementsByTagName","FillRenderer","DayTile","eventRenderer","DayTileEventRenderer","renderFrame","memoizeRendering","_renderFrame","renderFgEvents","bind","unrender","renderEventSelection","selectByInstanceId","unselectByInstanceId","renderEventDrag","hideByHash","showByHash","renderEventResize","calendar","registerInteractiveComponent","useEventCenter","props","date","fgSegs","eventSelection","eventDragInstances","eventResizeInstances","unregisterInteractiveComponent","theme","format","createFormatter","opt","innerHTML","getClass","getIconClass","segContainerEl","queryHit","positionLeft","positionTop","elWidth","elHeight","component","dateSpan","range","addDays","dayEl","rect","layer","DateComponent","dayTile","_i","segs_1","segs_2","DayBgRow","renderHtml","parts","cells","cell","renderCellHtml","dateProfile","htmlAttrs","reverse","otherAttrs","isDateValid","rangeContainsMarker","activeRange","getDayClasses","formatIso","omitTime","DAY_NUM_FORMAT","day","WEEK_NUM_FORMAT","week","DayGrid","bottomCoordPadding","isCellSizesDirty","fillRenderer","mirrorRenderer","renderCells","_renderCells","_unrenderCells","renderBusinessHours","renderDateSelection","renderBgEvents","_renderEventDrag","_unrenderEventDrag","_renderEventResize","_unrenderEventResize","isRigid","businessHourSegs","dateSelectionSegs","bgEventSegs","fgEventSegs","eventDrag","eventResize","segPopoverTile","updateSegPopoverTile","getCellRange","ownProps","receiveProps","affectedInstances","view","_b","html","renderDayRowHtml","findElements","cellEls","rowPositions","PositionCache","colPositions","publiclyTrigger","toDate","getCellEl","bgRow","renderBgIntroHtml","getIsNumbersVisible","renderNumberTrHtml","getIsDayNumbersVisible","cellWeekNumbersVisible","colWeekNumbersVisible","intro","renderNumberIntroHtml","renderNumberCellsHtml","htmls","renderNumberCellHtml","isDayNumberVisible","weekCalcFirstDow","weekDow","getUTCDay","buildGotoAnchorHtml","updateSize","isResize","isEventsUpdated","buildPositionCaches","computeSizes","assignSizes","buildColPositions","buildRowPositions","build","bottoms","positionToHit","leftPosition","topPosition","leftToIndex","topToIndex","relativeRect","lefts","rights","tops","state","isResizing","segPopover","limitRows","levelLimit","rowLevelLimit","unlimitRow","computeRowLevelLimit","limitRow","rowEl","rowBottom","trEls","findChildren","classList","remove","moreNodes","limitedNodes","segsBelow","totalSegsBelow","colSegsBelow","segMoreNodes","moreTd","moreWrap","moreLink","getCellSegs","renderMoreLink","node","add","concat","insertAfterElement","moreEls","limitedEls","limitedEl","hiddenSegs","innerText","getMoreLinkText","clickOption","_col","moreEl","currentTarget","allSegs","reslicedAllSegs","resliceDaySegs","reslicedHiddenSegs","jsEvent","showSegPopover","zoomTo","parentNode","topEl","releaseAfterSizingTriggers","dayDate","dayStart","dayEnd","dayRange","newSegs","origRange","slicedRange","intersectRanges","instance","num","startLevel","WEEK_NUM_FORMAT$1","DayGridView","viewSpec","dateProfileGenerator","renderHeadIntroHtml","weekNumberStyleAttr","renderDayGridNumberIntroHtml","weekStart","forceOff","renderDayGridBgIntroHtml","renderDayGridIntroHtml","renderSkeletonHtml","scroller","ScrollComponent","dayGridContainerEl","dayGridEl","weekNumberWidth","hasRigidRows","eventLimit","viewHeight","isAuto","updateBaseSize","headRowEl","header","scrollerHeight","scrollbarWidths","computeScrollerHeight","setHeight","matchCellWidths","clear","uncompensateScroll","setGridHeight","getScrollbarWidths","compensateScroll","lockOverflow","subtractInnerElHeight","distributeHeight","undistributeHeight","computeDateScroll","timeMs","queryDateScroll","getScrollTop","applyDateScroll","scroll","setScrollTop","View","dateProfileGeneratorClass","SimpleDayGrid","slicer","DayGridSlicer","dayTable","sliceProps","nextDayThreshold","rawHit","sliceRange","dateRange","Slicer","DayGridView$1","_context","buildDayTable","memoize","DayHeader","simpleDayGrid","dates","headerDates","datesRepDistinctDays","businessHours","dateSelection","eventStore","eventUiBases","daySeries","DaySeries","DayTable","main","createPlugin","defaultView","views","dayGridDay","duration","days","dayGridWeek","weeks","dayGridMonth","months","AbstractDayGridView","buildBasicDayTable","defineProperty","value","config","touchMouseIgnoreWait","ignoreMouseDepth","listenerCnt","isWindowTouchMoveCancelled","PointerDragging","containerEl","subjectEl","downEl","selector","handleSelector","shouldIgnoreMove","shouldWatchScroll","isDragging","isTouchDragging","wasTouchScroll","handleMouseDown","shouldIgnoreMouse","isPrimaryMouseButton","tryStart","pev","createEventFromMouse","emitter","initScrollWatch","handleMouseMove","handleMouseUp","recordCoords","cleanup","handleTouchStart","createEventFromTouch","handleTouchMove","handleTouchEnd","window","handleTouchScroll","startIgnoringMouse","handleScroll","pageX","pageXOffset","prevScrollX","prevPageX","pageY","pageYOffset","prevScrollY","prevPageY","origEvent","isTouch","deltaX","origPageX","deltaY","origPageY","EmitterMixin","passive","listenerCreated","listenerDestroyed","querySubjectEl","elementClosest","destroyScrollWatch","cancelTouchScroll","isFirst","touches","button","ctrlKey","setTimeout","onWindowTouchMove","preventDefault","ElementMirror","isVisible","sourceEl","mirrorEl","sourceElRect","body","zIndex","revertDuration","origScreenX","origScreenY","updateElPosition","handleMove","setIsVisible","bool","stop","needsRevertAnimation","callback","done","doRevertAnimation","finalSourceElRect","transition","whenTransitionDone","getMirrorEl","cloneNode","visibility","boxSizing","ScrollGeomCache","scrollController","doesListening","scrollTop","scrollLeft","getScrollLeft","handleScrollChange","origScrollTop","origScrollLeft","scrollWidth","getScrollWidth","scrollHeight","getScrollHeight","clientWidth","getClientWidth","clientHeight","getClientHeight","clientRect","computeClientRect","getEventTarget","getMaxScrollTop","setScrollLeft","getMaxScrollLeft","ScrollController","ElementScrollGeomCache","ElementScrollController","computeInnerRect","WindowScrollGeomCache","WindowScrollController","getTime","performance","now","Date","AutoScroller","isEnabled","scrollQuery","edgeThreshold","maxVelocity","pointerScreenX","pointerScreenY","isAnimating","scrollCaches","everMovedUp","everMovedDown","everMovedLeft","everMovedRight","animate","edge","computeBestEdge","handleSide","msSinceRequest","requestAnimation","buildCaches","yDelta","xDelta","scrollCache","requestAnimationFrame","seconds","invDistance","distance","velocity","sign","bestSide","leftDist","rightDist","topDist","bottomDist","canScrollUp","canScrollDown","canScrollLeft","canScrollRight","queryScrollEls","map","query","querySelectorAll","FeaturefulElementDragging","delay","minDistance","touchScrollAllowed","mirrorNeedsRevert","isInteracting","isDelayEnded","isDistanceSurpassed","delayTimeoutId","onPointerDown","preventSelection","preventContextMenu","pointer","mirror","startDelay","handleDistanceSurpassed","onPointerMove","distanceSq","autoScroller","onPointerUp","allowSelection","allowContextMenu","tryStopDrag","clearTimeout","on","handleDelayEnd","tryStartDrag","stopDrag","setIgnoreMove","setMirrorIsVisible","setMirrorNeedsRevert","setAutoScrollEnabled","ElementDragging","OffsetTracker","origRect","getClippingParents","computeLeft","computeTop","isWithinClipping","point","isIgnoredClipping","pointInsideRect","tagName","HitDragging","dragging","droppableStore","useSubjectCenter","requireInitial","initialHit","movingHit","finalHit","handlePointerDown","prepareHits","processFirstCoord","handleDragStart","handleDragMove","handlePointerUp","releaseHits","handleDragEnd","origPoint","adjustedPoint","subjectRect","constrainPoint","queryHitForOffset","slicedSubjectRect","intersectRects","getRectCenter","coordAdjust","diffPoints","forceHandle","hit","isHitsEqual","offsetTrackers","mapHash","interactionSettings","id","offsetLeft","offsetTop","bestHit","offsetTracker","originLeft","originTop","rangeContainsRange","hit0","hit1","Boolean","isDateSpansEqual","DateClicking","settings","isValidDateDownEl","hitDragging","triggerDateClick","interactionSettingsToStore","Interaction","DateSelecting","dragSelection","canSelect","getComponentTouchDelay","unselect","handleHitUpdate","isFinal","isInvalid","joinHitsIntoSelection","pluginSystem","hooks","dateSelectionTransformers","isDateSelectionValid","dispatch","selection","enableCursor","disableCursor","triggerDateSelect","dateSpan0","dateSpan1","ms","compareNumbers","dateSelectionTransformers_1","transformer","res","EventDragging","subjectSeg","relevantEvents","receivingCalendar","validMutation","mutatedRelevantEvents","origTarget","initialCalendar","getElSeg","eventInstanceId","instanceId","getRelevantEvents","getComponentTouchDelay$1","isValid","isValidSegDownEl","event","EventApi","mutation","interaction","affectedEvents","mutatedEvents","createEmptyEventStore","isEvent","origSeg","receivingComponent","computeEventMutation","eventDragMutationMassagers","applyMutationToEventStore","isInteractionValid","displayDrag","initialCalendar_1","initialView","eventInstance","eventApi","relevantEvents_1","clearDrag","eventDropArg","eventDropTransformers","delta","startDelta","oldEvent","defs","defId","instances","revert","draggedEl","dropArg","buildDatePointApi","SELECTOR","interactionSettingsStore","nextCalendar","prevCalendar","massagers","date0","date1","standardProps","hasEnd","startOfDay","diffDates","largeUnit","milliseconds","endDelta","massagers_1","massager","EventDragging$1","draggingSeg","querySeg","computeMutation","eventResizeJoinTransforms","createDuration","prevEvent","fgSegSelector","isFromStart","instanceRange","transforms","transforms_1","transform","UnselectAuto","isRecentPointerDateSelect","onSelect","selectInfo","onDocumentPointerUp","documentPointer","unselectAuto","viewOpt","unselectCancel","off","ExternalElementDragging","suppliedDragMeta","droppableEvent","dragMeta","buildDragMeta","canDropElOnCalendar","computeEventForDateSpan","eventTupleToStore","finalView","arg","parseDragMeta","getDragMetaFromEl","dropAccept","elementMatches","defProps","leftoverProps","externalDefTransforms","parseEventDef","sourceId","startTime","getDefaultEventEnd","createEventInstance","str","getEmbeddedElData","obj","JSON","parse","dataAttrPrefix","prefix","prefixedName","getAttribute","ExternalDraggable","longPressDelay","globalDefaults","eventDragMinDistance","itemSelector","appendTo","eventData","InferredElementDragging","mirrorSelector","currentMirrorEl","handlePointerMove","ThirdPartyDraggable","containerOrSettings","Element","componentInteractions","calendarInteractions","elementDraggingImpl","Draggable","daygrid","TimeGridEventRenderer","timeGrid","fullTimeFormat","separator","defaultRangeSeparator","segsByCol","groupSegsByCol","attachSegsByCol","fgContainerEls","computeSegSizes","computeSegVerticals","computeSegHorizontals","assignSegSizes","assignSegVerticals","assignSegCss","fullTimeText","startTimeText","isMultiDayRange","unzonedStart","unzonedEnd","_getTimeText","level0","buildSlotSegLevels","computeForwardSlotSegs","computeSlotSegPressures","computeSegForwardBack","seriesBackwardPressure","seriesBackwardCoord","forwardSegs","forwardCoord","sortForwardSegs","backwardCoord","objs","buildTimeGridSegCompareObj","specs","field","order","eventOrderSpecs","obj0","obj1","compareByFieldSpecs","c","_seg","generateSegCss","shouldOverlap","slotEventOverlap","generateSegVerticalCss","forwardPressure","computeSlotSegCollisions","k","forwardSeg","results","isSlotSegCollision","seg1","seg2","buildSegCompareObj","TimeGridMirrorRenderer","mirrorContainerEls","sourceSegProps","marginLeft","marginRight","TimeGridFillRenderer","containerEls","bgContainerEls","businessContainerEls","highlightContainerEls","AGENDA_STOCK_SUB_DURATIONS","hours","minutes","TimeGrid","isSlatSizesDirty","isColSizesDirty","renderSlats","_renderSlats","renderColumns","_renderColumns","_unrenderColumns","_renderDateSelection","_unrenderDateSelection","processOptions","rootBgContainerEl","slatContainerEl","bottomRuleEl","slotDuration","snapDuration","snapsPerSlot","input","wholeDivideDurations","isArray","labelFormat","labelInterval","computeLabelInterval","slotsPerLabel","buildSlatPositions","renderSlatRowHtml","slatEls","slatPositions","slotTime","minTime","slotIterator","slotDate","isLabeled","axisHtml","asRoughMs","maxTime","formatIsoTimeString","addDurations","colEls","renderContentSkeleton","unrenderContentSkeleton","contentSkeletonEl","colContainerEls","getNowIndicatorUnit","renderNowIndicator","computeDateTop","nodes","lineEl","arrowEl","nowIndicatorEls","unrenderNowIndicator","getTotalSlatHeight","offsetHeight","when","startOfDayDate","computeTimeTop","len","slatCoverage","slatIndex","slatRemainder","floor","getHeight","eventMinHeight","colIndex","slatTop","slatHeight","partial","localSnapIndex","snapIndex","time","multiplyDuration","isSelecting","AllDaySplitter","getKeyInfo","timed","getKeysForDateSpan","getKeysForEventDef","hasBgRendering","Splitter","TIMEGRID_ALL_DAY_EVENT_LIMIT","WEEK_HEADER_FORMAT","TimeGridView","splitter","dayCnt","diffDays","weekText","axisStyleAttr","renderTimeGridBgIntroHtml","renderTimeGridIntroHtml","getAllDayHtml","timeGridWrapEl","timeGridEl","axisWidth","noScrollRowEls","usesMinMaxTime","SimpleTimeGrid","buildDayRanges","TimeGridSlicer","dayRanges","sliceNowDate","ranges","segRange","TimeGridView$1","simpleTimeGrid","splitProps","allDaySlot","timeGridDay","timeGridWeek","AbstractTimeGridView","FullCalendarDemoRoutingModule","imports","forChild","path","FullCalendarDemoModule","declarations","FullCalendarDemo","eventService","ngOnInit","getEvents","then","events","plugins","defaultDate","center","editable","template"],"mappings":"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","file":"components-fullcalendar-fullcalendardemo-module-es5.js","sourcesContent":["/*!\nFullCalendar Day Grid Plugin v4.1.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@fullcalendar/core')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@fullcalendar/core'], factory) :\n    (global = global || self, factory(global.FullCalendarDayGrid = {}, global.FullCalendar));\n}(this, function (exports, core) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    var DayGridDateProfileGenerator = /** @class */ (function (_super) {\n        __extends(DayGridDateProfileGenerator, _super);\n        function DayGridDateProfileGenerator() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        // Computes the date range that will be rendered.\n        DayGridDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n            var dateEnv = this.dateEnv;\n            var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n            var start = renderRange.start;\n            var end = renderRange.end;\n            var endOfWeek;\n            // year and month views should be aligned with weeks. this is already done for week\n            if (/^(year|month)$/.test(currentRangeUnit)) {\n                start = dateEnv.startOfWeek(start);\n                // make end-of-week if not already\n                endOfWeek = dateEnv.startOfWeek(end);\n                if (endOfWeek.valueOf() !== end.valueOf()) {\n                    end = core.addWeeks(endOfWeek, 1);\n                }\n            }\n            // ensure 6 weeks\n            if (this.options.monthMode &&\n                this.options.fixedWeekCount) {\n                var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n                core.diffWeeks(start, end));\n                end = core.addWeeks(end, 6 - rowCnt);\n            }\n            return { start: start, end: end };\n        };\n        return DayGridDateProfileGenerator;\n    }(core.DateProfileGenerator));\n\n    /* A rectangular panel that is absolutely positioned over other content\n    ------------------------------------------------------------------------------------------------------------------------\n    Options:\n      - className (string)\n      - content (HTML string, element, or element array)\n      - parentEl\n      - top\n      - left\n      - right (the x coord of where the right edge should be. not a \"CSS\" right)\n      - autoHide (boolean)\n      - show (callback)\n      - hide (callback)\n    */\n    var Popover = /** @class */ (function () {\n        function Popover(options) {\n            var _this = this;\n            this.isHidden = true;\n            this.margin = 10; // the space required between the popover and the edges of the scroll container\n            // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n            this.documentMousedown = function (ev) {\n                // only hide the popover if the click happened outside the popover\n                if (_this.el && !_this.el.contains(ev.target)) {\n                    _this.hide();\n                }\n            };\n            this.options = options;\n        }\n        // Shows the popover on the specified position. Renders it if not already\n        Popover.prototype.show = function () {\n            if (this.isHidden) {\n                if (!this.el) {\n                    this.render();\n                }\n                this.el.style.display = '';\n                this.position();\n                this.isHidden = false;\n                this.trigger('show');\n            }\n        };\n        // Hides the popover, through CSS, but does not remove it from the DOM\n        Popover.prototype.hide = function () {\n            if (!this.isHidden) {\n                this.el.style.display = 'none';\n                this.isHidden = true;\n                this.trigger('hide');\n            }\n        };\n        // Creates `this.el` and renders content inside of it\n        Popover.prototype.render = function () {\n            var _this = this;\n            var options = this.options;\n            var el = this.el = core.createElement('div', {\n                className: 'fc-popover ' + (options.className || ''),\n                style: {\n                    top: '0',\n                    left: '0'\n                }\n            });\n            if (typeof options.content === 'function') {\n                options.content(el);\n            }\n            options.parentEl.appendChild(el);\n            // when a click happens on anything inside with a 'fc-close' className, hide the popover\n            core.listenBySelector(el, 'click', '.fc-close', function (ev) {\n                _this.hide();\n            });\n            if (options.autoHide) {\n                document.addEventListener('mousedown', this.documentMousedown);\n            }\n        };\n        // Hides and unregisters any handlers\n        Popover.prototype.destroy = function () {\n            this.hide();\n            if (this.el) {\n                core.removeElement(this.el);\n                this.el = null;\n            }\n            document.removeEventListener('mousedown', this.documentMousedown);\n        };\n        // Positions the popover optimally, using the top/left/right options\n        Popover.prototype.position = function () {\n            var options = this.options;\n            var el = this.el;\n            var elDims = el.getBoundingClientRect(); // only used for width,height\n            var origin = core.computeRect(el.offsetParent);\n            var clippingRect = core.computeClippingRect(options.parentEl);\n            var top; // the \"position\" (not \"offset\") values for the popover\n            var left; //\n            // compute top and left\n            top = options.top || 0;\n            if (options.left !== undefined) {\n                left = options.left;\n            }\n            else if (options.right !== undefined) {\n                left = options.right - elDims.width; // derive the left value from the right value\n            }\n            else {\n                left = 0;\n            }\n            // constrain to the view port. if constrained by two edges, give precedence to top/left\n            top = Math.min(top, clippingRect.bottom - elDims.height - this.margin);\n            top = Math.max(top, clippingRect.top + this.margin);\n            left = Math.min(left, clippingRect.right - elDims.width - this.margin);\n            left = Math.max(left, clippingRect.left + this.margin);\n            core.applyStyle(el, {\n                top: top - origin.top,\n                left: left - origin.left\n            });\n        };\n        // Triggers a callback. Calls a function in the option hash of the same name.\n        // Arguments beyond the first `name` are forwarded on.\n        // TODO: better code reuse for this. Repeat code\n        // can kill this???\n        Popover.prototype.trigger = function (name) {\n            if (this.options[name]) {\n                this.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n            }\n        };\n        return Popover;\n    }());\n\n    /* Event-rendering methods for the DayGrid class\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\n    var SimpleDayGridEventRenderer = /** @class */ (function (_super) {\n        __extends(SimpleDayGridEventRenderer, _super);\n        function SimpleDayGridEventRenderer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        // Builds the HTML to be used for the default element for an individual segment\n        SimpleDayGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n            var options = this.context.options;\n            var eventRange = seg.eventRange;\n            var eventDef = eventRange.def;\n            var eventUi = eventRange.ui;\n            var allDay = eventDef.allDay;\n            var isDraggable = eventUi.startEditable;\n            var isResizableFromStart = allDay && seg.isStart && eventUi.durationEditable && options.eventResizableFromStart;\n            var isResizableFromEnd = allDay && seg.isEnd && eventUi.durationEditable;\n            var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n            var skinCss = core.cssToStr(this.getSkinCss(eventUi));\n            var timeHtml = '';\n            var timeText;\n            var titleHtml;\n            classes.unshift('fc-day-grid-event', 'fc-h-event');\n            // Only display a timed events time if it is the starting segment\n            if (seg.isStart) {\n                timeText = this.getTimeText(eventRange);\n                if (timeText) {\n                    timeHtml = '<span class=\"fc-time\">' + core.htmlEscape(timeText) + '</span>';\n                }\n            }\n            titleHtml =\n                '<span class=\"fc-title\">' +\n                    (core.htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n                    '</span>';\n            return '<a class=\"' + classes.join(' ') + '\"' +\n                (eventDef.url ?\n                    ' href=\"' + core.htmlEscape(eventDef.url) + '\"' :\n                    '') +\n                (skinCss ?\n                    ' style=\"' + skinCss + '\"' :\n                    '') +\n                '>' +\n                '<div class=\"fc-content\">' +\n                (options.dir === 'rtl' ?\n                    titleHtml + ' ' + timeHtml : // put a natural space in between\n                    timeHtml + ' ' + titleHtml //\n                ) +\n                '</div>' +\n                (isResizableFromStart ?\n                    '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                    '') +\n                (isResizableFromEnd ?\n                    '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                    '') +\n                '</a>';\n        };\n        // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n        SimpleDayGridEventRenderer.prototype.computeEventTimeFormat = function () {\n            return {\n                hour: 'numeric',\n                minute: '2-digit',\n                omitZeroMinute: true,\n                meridiem: 'narrow'\n            };\n        };\n        SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n            return false; // TODO: somehow consider the originating DayGrid's column count\n        };\n        return SimpleDayGridEventRenderer;\n    }(core.FgEventRenderer));\n\n    /* Event-rendering methods for the DayGrid class\n    ----------------------------------------------------------------------------------------------------------------------*/\n    var DayGridEventRenderer = /** @class */ (function (_super) {\n        __extends(DayGridEventRenderer, _super);\n        function DayGridEventRenderer(dayGrid) {\n            var _this = _super.call(this, dayGrid.context) || this;\n            _this.dayGrid = dayGrid;\n            return _this;\n        }\n        // Renders the given foreground event segments onto the grid\n        DayGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n            var rowStructs = this.rowStructs = this.renderSegRows(segs);\n            // append to each row's content skeleton\n            this.dayGrid.rowEls.forEach(function (rowNode, i) {\n                rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);\n            });\n            // removes the \"more..\" events popover\n            if (!mirrorInfo) {\n                this.dayGrid.removeSegPopover();\n            }\n        };\n        // Unrenders all currently rendered foreground event segments\n        DayGridEventRenderer.prototype.detachSegs = function () {\n            var rowStructs = this.rowStructs || [];\n            var rowStruct;\n            while ((rowStruct = rowStructs.pop())) {\n                core.removeElement(rowStruct.tbodyEl);\n            }\n            this.rowStructs = null;\n        };\n        // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n        // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n        // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n        DayGridEventRenderer.prototype.renderSegRows = function (segs) {\n            var rowStructs = [];\n            var segRows;\n            var row;\n            segRows = this.groupSegRows(segs); // group into nested arrays\n            // iterate each row of segment groupings\n            for (row = 0; row < segRows.length; row++) {\n                rowStructs.push(this.renderSegRow(row, segRows[row]));\n            }\n            return rowStructs;\n        };\n        // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n        // the segments. Returns object with a bunch of internal data about how the render was calculated.\n        // NOTE: modifies rowSegs\n        DayGridEventRenderer.prototype.renderSegRow = function (row, rowSegs) {\n            var dayGrid = this.dayGrid;\n            var colCnt = dayGrid.colCnt, isRtl = dayGrid.isRtl;\n            var segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n            var levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n            var tbody = document.createElement('tbody');\n            var segMatrix = []; // lookup for which segments are rendered into which level+col cells\n            var cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n            var loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n            var i;\n            var levelSegs;\n            var col;\n            var tr;\n            var j;\n            var seg;\n            var td;\n            // populates empty cells from the current column (`col`) to `endCol`\n            function emptyCellsUntil(endCol) {\n                while (col < endCol) {\n                    // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n                    td = (loneCellMatrix[i - 1] || [])[col];\n                    if (td) {\n                        td.rowSpan = (td.rowSpan || 1) + 1;\n                    }\n                    else {\n                        td = document.createElement('td');\n                        tr.appendChild(td);\n                    }\n                    cellMatrix[i][col] = td;\n                    loneCellMatrix[i][col] = td;\n                    col++;\n                }\n            }\n            for (i = 0; i < levelCnt; i++) { // iterate through all levels\n                levelSegs = segLevels[i];\n                col = 0;\n                tr = document.createElement('tr');\n                segMatrix.push([]);\n                cellMatrix.push([]);\n                loneCellMatrix.push([]);\n                // levelCnt might be 1 even though there are no actual levels. protect against this.\n                // this single empty row is useful for styling.\n                if (levelSegs) {\n                    for (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\n                        seg = levelSegs[j];\n                        var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                        var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                        emptyCellsUntil(leftCol);\n                        // create a container that occupies or more columns. append the event element.\n                        td = core.createElement('td', { className: 'fc-event-container' }, seg.el);\n                        if (leftCol !== rightCol) {\n                            td.colSpan = rightCol - leftCol + 1;\n                        }\n                        else { // a single-column segment\n                            loneCellMatrix[i][col] = td;\n                        }\n                        while (col <= rightCol) {\n                            cellMatrix[i][col] = td;\n                            segMatrix[i][col] = seg;\n                            col++;\n                        }\n                        tr.appendChild(td);\n                    }\n                }\n                emptyCellsUntil(colCnt); // finish off the row\n                var introHtml = dayGrid.renderProps.renderIntroHtml();\n                if (introHtml) {\n                    if (dayGrid.isRtl) {\n                        core.appendToElement(tr, introHtml);\n                    }\n                    else {\n                        core.prependToElement(tr, introHtml);\n                    }\n                }\n                tbody.appendChild(tr);\n            }\n            return {\n                row: row,\n                tbodyEl: tbody,\n                cellMatrix: cellMatrix,\n                segMatrix: segMatrix,\n                segLevels: segLevels,\n                segs: rowSegs\n            };\n        };\n        // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n        // NOTE: modifies segs\n        DayGridEventRenderer.prototype.buildSegLevels = function (segs) {\n            var _a = this.dayGrid, isRtl = _a.isRtl, colCnt = _a.colCnt;\n            var levels = [];\n            var i;\n            var seg;\n            var j;\n            // Give preference to elements with certain criteria, so they have\n            // a chance to be closer to the top.\n            segs = this.sortEventSegs(segs);\n            for (i = 0; i < segs.length; i++) {\n                seg = segs[i];\n                // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n                for (j = 0; j < levels.length; j++) {\n                    if (!isDaySegCollision(seg, levels[j])) {\n                        break;\n                    }\n                }\n                // `j` now holds the desired subrow index\n                seg.level = j;\n                seg.leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol; // for sorting only\n                seg.rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol // for sorting only\n                ;\n                (levels[j] || (levels[j] = [])).push(seg);\n            }\n            // order segments left-to-right. very important if calendar is RTL\n            for (j = 0; j < levels.length; j++) {\n                levels[j].sort(compareDaySegCols);\n            }\n            return levels;\n        };\n        // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n        DayGridEventRenderer.prototype.groupSegRows = function (segs) {\n            var segRows = [];\n            var i;\n            for (i = 0; i < this.dayGrid.rowCnt; i++) {\n                segRows.push([]);\n            }\n            for (i = 0; i < segs.length; i++) {\n                segRows[segs[i].row].push(segs[i]);\n            }\n            return segRows;\n        };\n        // Computes a default `displayEventEnd` value if one is not expliclty defined\n        DayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n            return this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n        };\n        return DayGridEventRenderer;\n    }(SimpleDayGridEventRenderer));\n    // Computes whether two segments' columns collide. They are assumed to be in the same row.\n    function isDaySegCollision(seg, otherSegs) {\n        var i;\n        var otherSeg;\n        for (i = 0; i < otherSegs.length; i++) {\n            otherSeg = otherSegs[i];\n            if (otherSeg.firstCol <= seg.lastCol &&\n                otherSeg.lastCol >= seg.firstCol) {\n                return true;\n            }\n        }\n        return false;\n    }\n    // A cmp function for determining the leftmost event\n    function compareDaySegCols(a, b) {\n        return a.leftCol - b.leftCol;\n    }\n\n    var DayGridMirrorRenderer = /** @class */ (function (_super) {\n        __extends(DayGridMirrorRenderer, _super);\n        function DayGridMirrorRenderer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        DayGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n            var sourceSeg = mirrorInfo.sourceSeg;\n            var rowStructs = this.rowStructs = this.renderSegRows(segs);\n            // inject each new event skeleton into each associated row\n            this.dayGrid.rowEls.forEach(function (rowNode, row) {\n                var skeletonEl = core.htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>'); // will be absolutely positioned\n                var skeletonTopEl;\n                var skeletonTop;\n                // If there is an original segment, match the top position. Otherwise, put it at the row's top level\n                if (sourceSeg && sourceSeg.row === row) {\n                    skeletonTopEl = sourceSeg.el;\n                }\n                else {\n                    skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody');\n                    if (!skeletonTopEl) { // when no events\n                        skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table');\n                    }\n                }\n                skeletonTop = skeletonTopEl.getBoundingClientRect().top -\n                    rowNode.getBoundingClientRect().top; // the offsetParent origin\n                skeletonEl.style.top = skeletonTop + 'px';\n                skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);\n                rowNode.appendChild(skeletonEl);\n            });\n        };\n        return DayGridMirrorRenderer;\n    }(DayGridEventRenderer));\n\n    var DayGridFillRenderer = /** @class */ (function (_super) {\n        __extends(DayGridFillRenderer, _super);\n        function DayGridFillRenderer(dayGrid) {\n            var _this = _super.call(this, dayGrid.context) || this;\n            _this.fillSegTag = 'td'; // override the default tag name\n            _this.dayGrid = dayGrid;\n            return _this;\n        }\n        DayGridFillRenderer.prototype.renderSegs = function (type, segs) {\n            // don't render timed background events\n            if (type === 'bgEvent') {\n                segs = segs.filter(function (seg) {\n                    return seg.eventRange.def.allDay;\n                });\n            }\n            _super.prototype.renderSegs.call(this, type, segs);\n        };\n        DayGridFillRenderer.prototype.attachSegs = function (type, segs) {\n            var els = [];\n            var i;\n            var seg;\n            var skeletonEl;\n            for (i = 0; i < segs.length; i++) {\n                seg = segs[i];\n                skeletonEl = this.renderFillRow(type, seg);\n                this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);\n                els.push(skeletonEl);\n            }\n            return els;\n        };\n        // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n        DayGridFillRenderer.prototype.renderFillRow = function (type, seg) {\n            var dayGrid = this.dayGrid;\n            var colCnt = dayGrid.colCnt, isRtl = dayGrid.isRtl;\n            var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n            var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n            var startCol = leftCol;\n            var endCol = rightCol + 1;\n            var className;\n            var skeletonEl;\n            var trEl;\n            if (type === 'businessHours') {\n                className = 'bgevent';\n            }\n            else {\n                className = type.toLowerCase();\n            }\n            skeletonEl = core.htmlToElement('<div class=\"fc-' + className + '-skeleton\">' +\n                '<table><tr></tr></table>' +\n                '</div>');\n            trEl = skeletonEl.getElementsByTagName('tr')[0];\n            if (startCol > 0) {\n                core.appendToElement(trEl, \n                // will create (startCol + 1) td's\n                new Array(startCol + 1).join('<td></td>'));\n            }\n            seg.el.colSpan = endCol - startCol;\n            trEl.appendChild(seg.el);\n            if (endCol < colCnt) {\n                core.appendToElement(trEl, \n                // will create (colCnt - endCol) td's\n                new Array(colCnt - endCol + 1).join('<td></td>'));\n            }\n            var introHtml = dayGrid.renderProps.renderIntroHtml();\n            if (introHtml) {\n                if (dayGrid.isRtl) {\n                    core.appendToElement(trEl, introHtml);\n                }\n                else {\n                    core.prependToElement(trEl, introHtml);\n                }\n            }\n            return skeletonEl;\n        };\n        return DayGridFillRenderer;\n    }(core.FillRenderer));\n\n    var DayTile = /** @class */ (function (_super) {\n        __extends(DayTile, _super);\n        function DayTile(context, el) {\n            var _this = _super.call(this, context, el) || this;\n            var eventRenderer = _this.eventRenderer = new DayTileEventRenderer(_this);\n            var renderFrame = _this.renderFrame = core.memoizeRendering(_this._renderFrame);\n            _this.renderFgEvents = core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderFrame]);\n            _this.renderEventSelection = core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n            _this.renderEventDrag = core.memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n            _this.renderEventResize = core.memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n            context.calendar.registerInteractiveComponent(_this, {\n                el: _this.el,\n                useEventCenter: false\n            });\n            return _this;\n        }\n        DayTile.prototype.render = function (props) {\n            this.renderFrame(props.date);\n            this.renderFgEvents(props.fgSegs);\n            this.renderEventSelection(props.eventSelection);\n            this.renderEventDrag(props.eventDragInstances);\n            this.renderEventResize(props.eventResizeInstances);\n        };\n        DayTile.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.renderFrame.unrender(); // should unrender everything else\n            this.calendar.unregisterInteractiveComponent(this);\n        };\n        DayTile.prototype._renderFrame = function (date) {\n            var _a = this, theme = _a.theme, dateEnv = _a.dateEnv;\n            var title = dateEnv.format(date, core.createFormatter(this.opt('dayPopoverFormat')) // TODO: cache\n            );\n            this.el.innerHTML =\n                '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' +\n                    '<span class=\"fc-title\">' +\n                    core.htmlEscape(title) +\n                    '</span>' +\n                    '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' +\n                    '</div>' +\n                    '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' +\n                    '<div class=\"fc-event-container\"></div>' +\n                    '</div>';\n            this.segContainerEl = this.el.querySelector('.fc-event-container');\n        };\n        DayTile.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n            var date = this.props.date; // HACK\n            if (positionLeft < elWidth && positionTop < elHeight) {\n                return {\n                    component: this,\n                    dateSpan: {\n                        allDay: true,\n                        range: { start: date, end: core.addDays(date, 1) }\n                    },\n                    dayEl: this.el,\n                    rect: {\n                        left: 0,\n                        top: 0,\n                        right: elWidth,\n                        bottom: elHeight\n                    },\n                    layer: 1\n                };\n            }\n        };\n        return DayTile;\n    }(core.DateComponent));\n    var DayTileEventRenderer = /** @class */ (function (_super) {\n        __extends(DayTileEventRenderer, _super);\n        function DayTileEventRenderer(dayTile) {\n            var _this = _super.call(this, dayTile.context) || this;\n            _this.dayTile = dayTile;\n            return _this;\n        }\n        DayTileEventRenderer.prototype.attachSegs = function (segs) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                this.dayTile.segContainerEl.appendChild(seg.el);\n            }\n        };\n        DayTileEventRenderer.prototype.detachSegs = function (segs) {\n            for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n                var seg = segs_2[_i];\n                core.removeElement(seg.el);\n            }\n        };\n        return DayTileEventRenderer;\n    }(SimpleDayGridEventRenderer));\n\n    var DayBgRow = /** @class */ (function () {\n        function DayBgRow(context) {\n            this.context = context;\n        }\n        DayBgRow.prototype.renderHtml = function (props) {\n            var parts = [];\n            if (props.renderIntroHtml) {\n                parts.push(props.renderIntroHtml());\n            }\n            for (var _i = 0, _a = props.cells; _i < _a.length; _i++) {\n                var cell = _a[_i];\n                parts.push(renderCellHtml(cell.date, props.dateProfile, this.context, cell.htmlAttrs));\n            }\n            if (!props.cells.length) {\n                parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>');\n            }\n            if (this.context.options.dir === 'rtl') {\n                parts.reverse();\n            }\n            return '<tr>' + parts.join('') + '</tr>';\n        };\n        return DayBgRow;\n    }());\n    function renderCellHtml(date, dateProfile, context, otherAttrs) {\n        var dateEnv = context.dateEnv, theme = context.theme;\n        var isDateValid = core.rangeContainsMarker(dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n        var classes = core.getDayClasses(date, dateProfile, context);\n        classes.unshift('fc-day', theme.getClass('widgetContent'));\n        return '<td class=\"' + classes.join(' ') + '\"' +\n            (isDateValid ?\n                ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                '') +\n            (otherAttrs ?\n                ' ' + otherAttrs :\n                '') +\n            '></td>';\n    }\n\n    var DAY_NUM_FORMAT = core.createFormatter({ day: 'numeric' });\n    var WEEK_NUM_FORMAT = core.createFormatter({ week: 'numeric' });\n    var DayGrid = /** @class */ (function (_super) {\n        __extends(DayGrid, _super);\n        function DayGrid(context, el, renderProps) {\n            var _this = _super.call(this, context, el) || this;\n            _this.bottomCoordPadding = 0; // hack for extending the hit area for the last row of the coordinate grid\n            _this.isCellSizesDirty = false;\n            var eventRenderer = _this.eventRenderer = new DayGridEventRenderer(_this);\n            var fillRenderer = _this.fillRenderer = new DayGridFillRenderer(_this);\n            _this.mirrorRenderer = new DayGridMirrorRenderer(_this);\n            var renderCells = _this.renderCells = core.memoizeRendering(_this._renderCells, _this._unrenderCells);\n            _this.renderBusinessHours = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderCells]);\n            _this.renderDateSelection = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'), [renderCells]);\n            _this.renderBgEvents = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderCells]);\n            _this.renderFgEvents = core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderCells]);\n            _this.renderEventSelection = core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n            _this.renderEventDrag = core.memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderCells]);\n            _this.renderEventResize = core.memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderCells]);\n            _this.renderProps = renderProps;\n            return _this;\n        }\n        DayGrid.prototype.render = function (props) {\n            var cells = props.cells;\n            this.rowCnt = cells.length;\n            this.colCnt = cells[0].length;\n            this.renderCells(cells, props.isRigid);\n            this.renderBusinessHours(props.businessHourSegs);\n            this.renderDateSelection(props.dateSelectionSegs);\n            this.renderBgEvents(props.bgEventSegs);\n            this.renderFgEvents(props.fgEventSegs);\n            this.renderEventSelection(props.eventSelection);\n            this.renderEventDrag(props.eventDrag);\n            this.renderEventResize(props.eventResize);\n            if (this.segPopoverTile) {\n                this.updateSegPopoverTile();\n            }\n        };\n        DayGrid.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.renderCells.unrender(); // will unrender everything else\n        };\n        DayGrid.prototype.getCellRange = function (row, col) {\n            var start = this.props.cells[row][col].date;\n            var end = core.addDays(start, 1);\n            return { start: start, end: end };\n        };\n        DayGrid.prototype.updateSegPopoverTile = function (date, segs) {\n            var ownProps = this.props;\n            this.segPopoverTile.receiveProps({\n                date: date || this.segPopoverTile.props.date,\n                fgSegs: segs || this.segPopoverTile.props.fgSegs,\n                eventSelection: ownProps.eventSelection,\n                eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\n                eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\n            });\n        };\n        /* Date Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype._renderCells = function (cells, isRigid) {\n            var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n            var _b = this, rowCnt = _b.rowCnt, colCnt = _b.colCnt;\n            var html = '';\n            var row;\n            var col;\n            for (row = 0; row < rowCnt; row++) {\n                html += this.renderDayRowHtml(row, isRigid);\n            }\n            this.el.innerHTML = html;\n            this.rowEls = core.findElements(this.el, '.fc-row');\n            this.cellEls = core.findElements(this.el, '.fc-day, .fc-disabled-day');\n            if (this.isRtl) {\n                this.cellEls.reverse();\n            }\n            this.rowPositions = new core.PositionCache(this.el, this.rowEls, false, true // vertical\n            );\n            this.colPositions = new core.PositionCache(this.el, this.cellEls.slice(0, colCnt), // only the first row\n            true, false // horizontal\n            );\n            // trigger dayRender with each cell's element\n            for (row = 0; row < rowCnt; row++) {\n                for (col = 0; col < colCnt; col++) {\n                    this.publiclyTrigger('dayRender', [\n                        {\n                            date: dateEnv.toDate(cells[row][col].date),\n                            el: this.getCellEl(row, col),\n                            view: view\n                        }\n                    ]);\n                }\n            }\n            this.isCellSizesDirty = true;\n        };\n        DayGrid.prototype._unrenderCells = function () {\n            this.removeSegPopover();\n        };\n        // Generates the HTML for a single row, which is a div that wraps a table.\n        // `row` is the row number.\n        DayGrid.prototype.renderDayRowHtml = function (row, isRigid) {\n            var theme = this.theme;\n            var classes = ['fc-row', 'fc-week', theme.getClass('dayRow')];\n            if (isRigid) {\n                classes.push('fc-rigid');\n            }\n            var bgRow = new DayBgRow(this.context);\n            return '' +\n                '<div class=\"' + classes.join(' ') + '\">' +\n                '<div class=\"fc-bg\">' +\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                bgRow.renderHtml({\n                    cells: this.props.cells[row],\n                    dateProfile: this.props.dateProfile,\n                    renderIntroHtml: this.renderProps.renderBgIntroHtml\n                }) +\n                '</table>' +\n                '</div>' +\n                '<div class=\"fc-content-skeleton\">' +\n                '<table>' +\n                (this.getIsNumbersVisible() ?\n                    '<thead>' +\n                        this.renderNumberTrHtml(row) +\n                        '</thead>' :\n                    '') +\n                '</table>' +\n                '</div>' +\n                '</div>';\n        };\n        DayGrid.prototype.getIsNumbersVisible = function () {\n            return this.getIsDayNumbersVisible() ||\n                this.renderProps.cellWeekNumbersVisible ||\n                this.renderProps.colWeekNumbersVisible;\n        };\n        DayGrid.prototype.getIsDayNumbersVisible = function () {\n            return this.rowCnt > 1;\n        };\n        /* Grid Number Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.renderNumberTrHtml = function (row) {\n            var intro = this.renderProps.renderNumberIntroHtml(row, this);\n            return '' +\n                '<tr>' +\n                (this.isRtl ? '' : intro) +\n                this.renderNumberCellsHtml(row) +\n                (this.isRtl ? intro : '') +\n                '</tr>';\n        };\n        DayGrid.prototype.renderNumberCellsHtml = function (row) {\n            var htmls = [];\n            var col;\n            var date;\n            for (col = 0; col < this.colCnt; col++) {\n                date = this.props.cells[row][col].date;\n                htmls.push(this.renderNumberCellHtml(date));\n            }\n            if (this.isRtl) {\n                htmls.reverse();\n            }\n            return htmls.join('');\n        };\n        // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n        // The number row will only exist if either day numbers or week numbers are turned on.\n        DayGrid.prototype.renderNumberCellHtml = function (date) {\n            var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n            var html = '';\n            var isDateValid = core.rangeContainsMarker(this.props.dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n            var isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n            var classes;\n            var weekCalcFirstDow;\n            if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\n                // no numbers in day cell (week number must be along the side)\n                return '<td></td>'; //  will create an empty space above events :(\n            }\n            classes = core.getDayClasses(date, this.props.dateProfile, this.context);\n            classes.unshift('fc-day-top');\n            if (this.renderProps.cellWeekNumbersVisible) {\n                weekCalcFirstDow = dateEnv.weekDow;\n            }\n            html += '<td class=\"' + classes.join(' ') + '\"' +\n                (isDateValid ?\n                    ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                    '') +\n                '>';\n            if (this.renderProps.cellWeekNumbersVisible && (date.getUTCDay() === weekCalcFirstDow)) {\n                html += core.buildGotoAnchorHtml(view, { date: date, type: 'week' }, { 'class': 'fc-week-number' }, dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\n                );\n            }\n            if (isDayNumberVisible) {\n                html += core.buildGotoAnchorHtml(view, date, { 'class': 'fc-day-number' }, dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\n                );\n            }\n            html += '</td>';\n            return html;\n        };\n        /* Sizing\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.updateSize = function (isResize) {\n            var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n            if (isResize ||\n                this.isCellSizesDirty ||\n                this.view.calendar.isEventsUpdated // hack\n            ) {\n                this.buildPositionCaches();\n                this.isCellSizesDirty = false;\n            }\n            fillRenderer.computeSizes(isResize);\n            eventRenderer.computeSizes(isResize);\n            mirrorRenderer.computeSizes(isResize);\n            fillRenderer.assignSizes(isResize);\n            eventRenderer.assignSizes(isResize);\n            mirrorRenderer.assignSizes(isResize);\n        };\n        DayGrid.prototype.buildPositionCaches = function () {\n            this.buildColPositions();\n            this.buildRowPositions();\n        };\n        DayGrid.prototype.buildColPositions = function () {\n            this.colPositions.build();\n        };\n        DayGrid.prototype.buildRowPositions = function () {\n            this.rowPositions.build();\n            this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n        };\n        /* Hit System\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.positionToHit = function (leftPosition, topPosition) {\n            var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n            var col = colPositions.leftToIndex(leftPosition);\n            var row = rowPositions.topToIndex(topPosition);\n            if (row != null && col != null) {\n                return {\n                    row: row,\n                    col: col,\n                    dateSpan: {\n                        range: this.getCellRange(row, col),\n                        allDay: true\n                    },\n                    dayEl: this.getCellEl(row, col),\n                    relativeRect: {\n                        left: colPositions.lefts[col],\n                        right: colPositions.rights[col],\n                        top: rowPositions.tops[row],\n                        bottom: rowPositions.bottoms[row]\n                    }\n                };\n            }\n        };\n        /* Cell System\n        ------------------------------------------------------------------------------------------------------------------*/\n        // FYI: the first column is the leftmost column, regardless of date\n        DayGrid.prototype.getCellEl = function (row, col) {\n            return this.cellEls[row * this.colCnt + col];\n        };\n        /* Event Drag Visualization\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype._renderEventDrag = function (state) {\n            if (state) {\n                this.eventRenderer.hideByHash(state.affectedInstances);\n                this.fillRenderer.renderSegs('highlight', state.segs);\n            }\n        };\n        DayGrid.prototype._unrenderEventDrag = function (state) {\n            if (state) {\n                this.eventRenderer.showByHash(state.affectedInstances);\n                this.fillRenderer.unrender('highlight');\n            }\n        };\n        /* Event Resize Visualization\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype._renderEventResize = function (state) {\n            if (state) {\n                this.eventRenderer.hideByHash(state.affectedInstances);\n                this.fillRenderer.renderSegs('highlight', state.segs);\n                this.mirrorRenderer.renderSegs(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n            }\n        };\n        DayGrid.prototype._unrenderEventResize = function (state) {\n            if (state) {\n                this.eventRenderer.showByHash(state.affectedInstances);\n                this.fillRenderer.unrender('highlight');\n                this.mirrorRenderer.unrender(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n            }\n        };\n        /* More+ Link Popover\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.removeSegPopover = function () {\n            if (this.segPopover) {\n                this.segPopover.hide(); // in handler, will call segPopover's removeElement\n            }\n        };\n        // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n        // `levelLimit` can be false (don't limit), a number, or true (should be computed).\n        DayGrid.prototype.limitRows = function (levelLimit) {\n            var rowStructs = this.eventRenderer.rowStructs || [];\n            var row; // row #\n            var rowLevelLimit;\n            for (row = 0; row < rowStructs.length; row++) {\n                this.unlimitRow(row);\n                if (!levelLimit) {\n                    rowLevelLimit = false;\n                }\n                else if (typeof levelLimit === 'number') {\n                    rowLevelLimit = levelLimit;\n                }\n                else {\n                    rowLevelLimit = this.computeRowLevelLimit(row);\n                }\n                if (rowLevelLimit !== false) {\n                    this.limitRow(row, rowLevelLimit);\n                }\n            }\n        };\n        // Computes the number of levels a row will accomodate without going outside its bounds.\n        // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n        // `row` is the row number.\n        DayGrid.prototype.computeRowLevelLimit = function (row) {\n            var rowEl = this.rowEls[row]; // the containing \"fake\" row div\n            var rowBottom = rowEl.getBoundingClientRect().bottom; // relative to viewport!\n            var trEls = core.findChildren(this.eventRenderer.rowStructs[row].tbodyEl);\n            var i;\n            var trEl;\n            // Reveal one level <tr> at a time and stop when we find one out of bounds\n            for (i = 0; i < trEls.length; i++) {\n                trEl = trEls[i];\n                trEl.classList.remove('fc-limited'); // reset to original state (reveal)\n                if (trEl.getBoundingClientRect().bottom > rowBottom) {\n                    return i;\n                }\n            }\n            return false; // should not limit at all\n        };\n        // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n        // `row` is the row number.\n        // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n        DayGrid.prototype.limitRow = function (row, levelLimit) {\n            var _this = this;\n            var _a = this, colCnt = _a.colCnt, isRtl = _a.isRtl;\n            var rowStruct = this.eventRenderer.rowStructs[row];\n            var moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n            var col = 0; // col #, left-to-right (not chronologically)\n            var levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n            var cellMatrix; // a matrix (by level, then column) of all <td> elements in the row\n            var limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n            var i;\n            var seg;\n            var segsBelow; // array of segment objects below `seg` in the current `col`\n            var totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n            var colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n            var td;\n            var rowSpan;\n            var segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n            var j;\n            var moreTd;\n            var moreWrap;\n            var moreLink;\n            // Iterates through empty level cells and places \"more\" links inside if need be\n            var emptyCellsUntil = function (endCol) {\n                while (col < endCol) {\n                    segsBelow = _this.getCellSegs(row, col, levelLimit);\n                    if (segsBelow.length) {\n                        td = cellMatrix[levelLimit - 1][col];\n                        moreLink = _this.renderMoreLink(row, col, segsBelow);\n                        moreWrap = core.createElement('div', null, moreLink);\n                        td.appendChild(moreWrap);\n                        moreNodes.push(moreWrap);\n                    }\n                    col++;\n                }\n            };\n            if (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\n                levelSegs = rowStruct.segLevels[levelLimit - 1];\n                cellMatrix = rowStruct.cellMatrix;\n                limitedNodes = core.findChildren(rowStruct.tbodyEl).slice(levelLimit); // get level <tr> elements past the limit\n                limitedNodes.forEach(function (node) {\n                    node.classList.add('fc-limited'); // hide elements and get a simple DOM-nodes array\n                });\n                // iterate though segments in the last allowable level\n                for (i = 0; i < levelSegs.length; i++) {\n                    seg = levelSegs[i];\n                    var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                    var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                    emptyCellsUntil(leftCol); // process empty cells before the segment\n                    // determine *all* segments below `seg` that occupy the same columns\n                    colSegsBelow = [];\n                    totalSegsBelow = 0;\n                    while (col <= rightCol) {\n                        segsBelow = this.getCellSegs(row, col, levelLimit);\n                        colSegsBelow.push(segsBelow);\n                        totalSegsBelow += segsBelow.length;\n                        col++;\n                    }\n                    if (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\n                        td = cellMatrix[levelLimit - 1][leftCol]; // the segment's parent cell\n                        rowSpan = td.rowSpan || 1;\n                        segMoreNodes = [];\n                        // make a replacement <td> for each column the segment occupies. will be one for each colspan\n                        for (j = 0; j < colSegsBelow.length; j++) {\n                            moreTd = core.createElement('td', { className: 'fc-more-cell', rowSpan: rowSpan });\n                            segsBelow = colSegsBelow[j];\n                            moreLink = this.renderMoreLink(row, leftCol + j, [seg].concat(segsBelow) // count seg as hidden too\n                            );\n                            moreWrap = core.createElement('div', null, moreLink);\n                            moreTd.appendChild(moreWrap);\n                            segMoreNodes.push(moreTd);\n                            moreNodes.push(moreTd);\n                        }\n                        td.classList.add('fc-limited');\n                        core.insertAfterElement(td, segMoreNodes);\n                        limitedNodes.push(td);\n                    }\n                }\n                emptyCellsUntil(this.colCnt); // finish off the level\n                rowStruct.moreEls = moreNodes; // for easy undoing later\n                rowStruct.limitedEls = limitedNodes; // for easy undoing later\n            }\n        };\n        // Reveals all levels and removes all \"more\"-related elements for a grid's row.\n        // `row` is a row number.\n        DayGrid.prototype.unlimitRow = function (row) {\n            var rowStruct = this.eventRenderer.rowStructs[row];\n            if (rowStruct.moreEls) {\n                rowStruct.moreEls.forEach(core.removeElement);\n                rowStruct.moreEls = null;\n            }\n            if (rowStruct.limitedEls) {\n                rowStruct.limitedEls.forEach(function (limitedEl) {\n                    limitedEl.classList.remove('fc-limited');\n                });\n                rowStruct.limitedEls = null;\n            }\n        };\n        // Renders an <a> element that represents hidden event element for a cell.\n        // Responsible for attaching click handler as well.\n        DayGrid.prototype.renderMoreLink = function (row, col, hiddenSegs) {\n            var _this = this;\n            var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n            var a = core.createElement('a', { className: 'fc-more' });\n            a.innerText = this.getMoreLinkText(hiddenSegs.length);\n            a.addEventListener('click', function (ev) {\n                var clickOption = _this.opt('eventLimitClick');\n                var _col = _this.isRtl ? _this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n                var date = _this.props.cells[row][_col].date;\n                var moreEl = ev.currentTarget;\n                var dayEl = _this.getCellEl(row, col);\n                var allSegs = _this.getCellSegs(row, col);\n                // rescope the segments to be within the cell's date\n                var reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n                var reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n                if (typeof clickOption === 'function') {\n                    // the returned value can be an atomic option\n                    clickOption = _this.publiclyTrigger('eventLimitClick', [\n                        {\n                            date: dateEnv.toDate(date),\n                            allDay: true,\n                            dayEl: dayEl,\n                            moreEl: moreEl,\n                            segs: reslicedAllSegs,\n                            hiddenSegs: reslicedHiddenSegs,\n                            jsEvent: ev,\n                            view: view\n                        }\n                    ]);\n                }\n                if (clickOption === 'popover') {\n                    _this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n                }\n                else if (typeof clickOption === 'string') { // a view name\n                    view.calendar.zoomTo(date, clickOption);\n                }\n            });\n            return a;\n        };\n        // Reveals the popover that displays all events within a cell\n        DayGrid.prototype.showSegPopover = function (row, col, moreLink, segs) {\n            var _this = this;\n            var _a = this, calendar = _a.calendar, view = _a.view, theme = _a.theme;\n            var _col = this.isRtl ? this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n            var moreWrap = moreLink.parentNode; // the <div> wrapper around the <a>\n            var topEl; // the element we want to match the top coordinate of\n            var options;\n            if (this.rowCnt === 1) {\n                topEl = view.el; // will cause the popover to cover any sort of header\n            }\n            else {\n                topEl = this.rowEls[row]; // will align with top of row\n            }\n            options = {\n                className: 'fc-more-popover ' + theme.getClass('popover'),\n                parentEl: view.el,\n                top: core.computeRect(topEl).top,\n                autoHide: true,\n                content: function (el) {\n                    _this.segPopoverTile = new DayTile(_this.context, el);\n                    _this.updateSegPopoverTile(_this.props.cells[row][_col].date, segs);\n                },\n                hide: function () {\n                    _this.segPopoverTile.destroy();\n                    _this.segPopoverTile = null;\n                    _this.segPopover.destroy();\n                    _this.segPopover = null;\n                }\n            };\n            // Determine horizontal coordinate.\n            // We use the moreWrap instead of the <td> to avoid border confusion.\n            if (this.isRtl) {\n                options.right = core.computeRect(moreWrap).right + 1; // +1 to be over cell border\n            }\n            else {\n                options.left = core.computeRect(moreWrap).left - 1; // -1 to be over cell border\n            }\n            this.segPopover = new Popover(options);\n            this.segPopover.show();\n            calendar.releaseAfterSizingTriggers(); // hack for eventPositioned\n        };\n        // Given the events within an array of segment objects, reslice them to be in a single day\n        DayGrid.prototype.resliceDaySegs = function (segs, dayDate) {\n            var dayStart = dayDate;\n            var dayEnd = core.addDays(dayStart, 1);\n            var dayRange = { start: dayStart, end: dayEnd };\n            var newSegs = [];\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                var eventRange = seg.eventRange;\n                var origRange = eventRange.range;\n                var slicedRange = core.intersectRanges(origRange, dayRange);\n                if (slicedRange) {\n                    newSegs.push(__assign({}, seg, { eventRange: {\n                            def: eventRange.def,\n                            ui: __assign({}, eventRange.ui, { durationEditable: false }),\n                            instance: eventRange.instance,\n                            range: slicedRange\n                        }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() }));\n                }\n            }\n            return newSegs;\n        };\n        // Generates the text that should be inside a \"more\" link, given the number of events it represents\n        DayGrid.prototype.getMoreLinkText = function (num) {\n            var opt = this.opt('eventLimitText');\n            if (typeof opt === 'function') {\n                return opt(num);\n            }\n            else {\n                return '+' + num + ' ' + opt;\n            }\n        };\n        // Returns segments within a given cell.\n        // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n        DayGrid.prototype.getCellSegs = function (row, col, startLevel) {\n            var segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n            var level = startLevel || 0;\n            var segs = [];\n            var seg;\n            while (level < segMatrix.length) {\n                seg = segMatrix[level][col];\n                if (seg) {\n                    segs.push(seg);\n                }\n                level++;\n            }\n            return segs;\n        };\n        return DayGrid;\n    }(core.DateComponent));\n\n    var WEEK_NUM_FORMAT$1 = core.createFormatter({ week: 'numeric' });\n    /* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n    // It is responsible for managing width/height.\n    var DayGridView = /** @class */ (function (_super) {\n        __extends(DayGridView, _super);\n        function DayGridView(context, viewSpec, dateProfileGenerator, parentEl) {\n            var _this = _super.call(this, context, viewSpec, dateProfileGenerator, parentEl) || this;\n            /* Header Rendering\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that will go before the day-of week header cells\n            _this.renderHeadIntroHtml = function () {\n                var theme = _this.theme;\n                if (_this.colWeekNumbersVisible) {\n                    return '' +\n                        '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.weekNumberStyleAttr() + '>' +\n                        '<span>' + // needed for matchCellWidths\n                        core.htmlEscape(_this.opt('weekLabel')) +\n                        '</span>' +\n                        '</th>';\n                }\n                return '';\n            };\n            /* Day Grid Rendering\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n            _this.renderDayGridNumberIntroHtml = function (row, dayGrid) {\n                var dateEnv = _this.dateEnv;\n                var weekStart = dayGrid.props.cells[row][0].date;\n                if (_this.colWeekNumbersVisible) {\n                    return '' +\n                        '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '>' +\n                        core.buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                        _this, { date: weekStart, type: 'week', forceOff: dayGrid.colCnt === 1 }, dateEnv.format(weekStart, WEEK_NUM_FORMAT$1) // inner HTML\n                        ) +\n                        '</td>';\n                }\n                return '';\n            };\n            // Generates the HTML that goes before the day bg cells for each day-row\n            _this.renderDayGridBgIntroHtml = function () {\n                var theme = _this.theme;\n                if (_this.colWeekNumbersVisible) {\n                    return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + _this.weekNumberStyleAttr() + '></td>';\n                }\n                return '';\n            };\n            // Generates the HTML that goes before every other type of row generated by DayGrid.\n            // Affects mirror-skeleton and highlight-skeleton rows.\n            _this.renderDayGridIntroHtml = function () {\n                if (_this.colWeekNumbersVisible) {\n                    return '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '></td>';\n                }\n                return '';\n            };\n            _this.el.classList.add('fc-dayGrid-view');\n            _this.el.innerHTML = _this.renderSkeletonHtml();\n            _this.scroller = new core.ScrollComponent('hidden', // overflow x\n            'auto' // overflow y\n            );\n            var dayGridContainerEl = _this.scroller.el;\n            _this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);\n            dayGridContainerEl.classList.add('fc-day-grid-container');\n            var dayGridEl = core.createElement('div', { className: 'fc-day-grid' });\n            dayGridContainerEl.appendChild(dayGridEl);\n            var cellWeekNumbersVisible;\n            if (_this.opt('weekNumbers')) {\n                if (_this.opt('weekNumbersWithinDays')) {\n                    cellWeekNumbersVisible = true;\n                    _this.colWeekNumbersVisible = false;\n                }\n                else {\n                    cellWeekNumbersVisible = false;\n                    _this.colWeekNumbersVisible = true;\n                }\n            }\n            else {\n                _this.colWeekNumbersVisible = false;\n                cellWeekNumbersVisible = false;\n            }\n            _this.dayGrid = new DayGrid(_this.context, dayGridEl, {\n                renderNumberIntroHtml: _this.renderDayGridNumberIntroHtml,\n                renderBgIntroHtml: _this.renderDayGridBgIntroHtml,\n                renderIntroHtml: _this.renderDayGridIntroHtml,\n                colWeekNumbersVisible: _this.colWeekNumbersVisible,\n                cellWeekNumbersVisible: cellWeekNumbersVisible\n            });\n            return _this;\n        }\n        DayGridView.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.dayGrid.destroy();\n            this.scroller.destroy();\n        };\n        // Builds the HTML skeleton for the view.\n        // The day-grid component will render inside of a container defined by this HTML.\n        DayGridView.prototype.renderSkeletonHtml = function () {\n            var theme = this.theme;\n            return '' +\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                (this.opt('columnHeader') ?\n                    '<thead class=\"fc-head\">' +\n                        '<tr>' +\n                        '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                        '</tr>' +\n                        '</thead>' :\n                    '') +\n                '<tbody class=\"fc-body\">' +\n                '<tr>' +\n                '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n                '</tr>' +\n                '</tbody>' +\n                '</table>';\n        };\n        // Generates an HTML attribute string for setting the width of the week number column, if it is known\n        DayGridView.prototype.weekNumberStyleAttr = function () {\n            if (this.weekNumberWidth != null) {\n                return 'style=\"width:' + this.weekNumberWidth + 'px\"';\n            }\n            return '';\n        };\n        // Determines whether each row should have a constant height\n        DayGridView.prototype.hasRigidRows = function () {\n            var eventLimit = this.opt('eventLimit');\n            return eventLimit && typeof eventLimit !== 'number';\n        };\n        /* Dimensions\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n            _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n            this.dayGrid.updateSize(isResize);\n        };\n        // Refreshes the horizontal dimensions of the view\n        DayGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n            var dayGrid = this.dayGrid;\n            var eventLimit = this.opt('eventLimit');\n            var headRowEl = this.header ? this.header.el : null; // HACK\n            var scrollerHeight;\n            var scrollbarWidths;\n            // hack to give the view some height prior to dayGrid's columns being rendered\n            // TODO: separate setting height from scroller VS dayGrid.\n            if (!dayGrid.rowEls) {\n                if (!isAuto) {\n                    scrollerHeight = this.computeScrollerHeight(viewHeight);\n                    this.scroller.setHeight(scrollerHeight);\n                }\n                return;\n            }\n            if (this.colWeekNumbersVisible) {\n                // Make sure all week number cells running down the side have the same width.\n                this.weekNumberWidth = core.matchCellWidths(core.findElements(this.el, '.fc-week-number'));\n            }\n            // reset all heights to be natural\n            this.scroller.clear();\n            if (headRowEl) {\n                core.uncompensateScroll(headRowEl);\n            }\n            dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n            // is the event limit a constant level number?\n            if (eventLimit && typeof eventLimit === 'number') {\n                dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n            }\n            // distribute the height to the rows\n            // (viewHeight is a \"recommended\" value if isAuto)\n            scrollerHeight = this.computeScrollerHeight(viewHeight);\n            this.setGridHeight(scrollerHeight, isAuto);\n            // is the event limit dynamically calculated?\n            if (eventLimit && typeof eventLimit !== 'number') {\n                dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n            }\n            if (!isAuto) { // should we force dimensions of the scroll container?\n                this.scroller.setHeight(scrollerHeight);\n                scrollbarWidths = this.scroller.getScrollbarWidths();\n                if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                    if (headRowEl) {\n                        core.compensateScroll(headRowEl, scrollbarWidths);\n                    }\n                    // doing the scrollbar compensation might have created text overflow which created more height. redo\n                    scrollerHeight = this.computeScrollerHeight(viewHeight);\n                    this.scroller.setHeight(scrollerHeight);\n                }\n                // guarantees the same scrollbar widths\n                this.scroller.lockOverflow(scrollbarWidths);\n            }\n        };\n        // given a desired total height of the view, returns what the height of the scroller should be\n        DayGridView.prototype.computeScrollerHeight = function (viewHeight) {\n            return viewHeight -\n                core.subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n        };\n        // Sets the height of just the DayGrid component in this view\n        DayGridView.prototype.setGridHeight = function (height, isAuto) {\n            if (this.opt('monthMode')) {\n                // if auto, make the height of each row the height that it would be if there were 6 weeks\n                if (isAuto) {\n                    height *= this.dayGrid.rowCnt / 6;\n                }\n                core.distributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n            }\n            else {\n                if (isAuto) {\n                    core.undistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n                }\n                else {\n                    core.distributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n                }\n            }\n        };\n        /* Scroll\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGridView.prototype.computeDateScroll = function (timeMs) {\n            return { top: 0 };\n        };\n        DayGridView.prototype.queryDateScroll = function () {\n            return { top: this.scroller.getScrollTop() };\n        };\n        DayGridView.prototype.applyDateScroll = function (scroll) {\n            if (scroll.top !== undefined) {\n                this.scroller.setScrollTop(scroll.top);\n            }\n        };\n        return DayGridView;\n    }(core.View));\n    DayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator;\n\n    var SimpleDayGrid = /** @class */ (function (_super) {\n        __extends(SimpleDayGrid, _super);\n        function SimpleDayGrid(context, dayGrid) {\n            var _this = _super.call(this, context, dayGrid.el) || this;\n            _this.slicer = new DayGridSlicer();\n            _this.dayGrid = dayGrid;\n            context.calendar.registerInteractiveComponent(_this, { el: _this.dayGrid.el });\n            return _this;\n        }\n        SimpleDayGrid.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.calendar.unregisterInteractiveComponent(this);\n        };\n        SimpleDayGrid.prototype.render = function (props) {\n            var dayGrid = this.dayGrid;\n            var dateProfile = props.dateProfile, dayTable = props.dayTable;\n            dayGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, dayGrid, dayTable), { dateProfile: dateProfile, cells: dayTable.cells, isRigid: props.isRigid }));\n        };\n        SimpleDayGrid.prototype.buildPositionCaches = function () {\n            this.dayGrid.buildPositionCaches();\n        };\n        SimpleDayGrid.prototype.queryHit = function (positionLeft, positionTop) {\n            var rawHit = this.dayGrid.positionToHit(positionLeft, positionTop);\n            if (rawHit) {\n                return {\n                    component: this.dayGrid,\n                    dateSpan: rawHit.dateSpan,\n                    dayEl: rawHit.dayEl,\n                    rect: {\n                        left: rawHit.relativeRect.left,\n                        right: rawHit.relativeRect.right,\n                        top: rawHit.relativeRect.top,\n                        bottom: rawHit.relativeRect.bottom\n                    },\n                    layer: 0\n                };\n            }\n        };\n        return SimpleDayGrid;\n    }(core.DateComponent));\n    var DayGridSlicer = /** @class */ (function (_super) {\n        __extends(DayGridSlicer, _super);\n        function DayGridSlicer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        DayGridSlicer.prototype.sliceRange = function (dateRange, dayTable) {\n            return dayTable.sliceRange(dateRange);\n        };\n        return DayGridSlicer;\n    }(core.Slicer));\n\n    var DayGridView$1 = /** @class */ (function (_super) {\n        __extends(DayGridView, _super);\n        function DayGridView(_context, viewSpec, dateProfileGenerator, parentEl) {\n            var _this = _super.call(this, _context, viewSpec, dateProfileGenerator, parentEl) || this;\n            _this.buildDayTable = core.memoize(buildDayTable);\n            if (_this.opt('columnHeader')) {\n                _this.header = new core.DayHeader(_this.context, _this.el.querySelector('.fc-head-container'));\n            }\n            _this.simpleDayGrid = new SimpleDayGrid(_this.context, _this.dayGrid);\n            return _this;\n        }\n        DayGridView.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            if (this.header) {\n                this.header.destroy();\n            }\n            this.simpleDayGrid.destroy();\n        };\n        DayGridView.prototype.render = function (props) {\n            _super.prototype.render.call(this, props);\n            var dateProfile = this.props.dateProfile;\n            var dayTable = this.dayTable =\n                this.buildDayTable(dateProfile, this.dateProfileGenerator);\n            if (this.header) {\n                this.header.receiveProps({\n                    dateProfile: dateProfile,\n                    dates: dayTable.headerDates,\n                    datesRepDistinctDays: dayTable.rowCnt === 1,\n                    renderIntroHtml: this.renderHeadIntroHtml\n                });\n            }\n            this.simpleDayGrid.receiveProps({\n                dateProfile: dateProfile,\n                dayTable: dayTable,\n                businessHours: props.businessHours,\n                dateSelection: props.dateSelection,\n                eventStore: props.eventStore,\n                eventUiBases: props.eventUiBases,\n                eventSelection: props.eventSelection,\n                eventDrag: props.eventDrag,\n                eventResize: props.eventResize,\n                isRigid: this.hasRigidRows(),\n                nextDayThreshold: this.nextDayThreshold\n            });\n        };\n        return DayGridView;\n    }(DayGridView));\n    function buildDayTable(dateProfile, dateProfileGenerator) {\n        var daySeries = new core.DaySeries(dateProfile.renderRange, dateProfileGenerator);\n        return new core.DayTable(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n    }\n\n    var main = core.createPlugin({\n        defaultView: 'dayGridMonth',\n        views: {\n            dayGrid: DayGridView$1,\n            dayGridDay: {\n                type: 'dayGrid',\n                duration: { days: 1 }\n            },\n            dayGridWeek: {\n                type: 'dayGrid',\n                duration: { weeks: 1 }\n            },\n            dayGridMonth: {\n                type: 'dayGrid',\n                duration: { months: 1 },\n                monthMode: true,\n                fixedWeekCount: true\n            }\n        }\n    });\n\n    exports.AbstractDayGridView = DayGridView;\n    exports.DayBgRow = DayBgRow;\n    exports.DayGrid = DayGrid;\n    exports.DayGridSlicer = DayGridSlicer;\n    exports.DayGridView = DayGridView$1;\n    exports.SimpleDayGrid = SimpleDayGrid;\n    exports.buildBasicDayTable = buildDayTable;\n    exports.default = main;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","/*!\nFullCalendar Interaction Plugin v4.1.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@fullcalendar/core')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@fullcalendar/core'], factory) :\n    (global = global || self, factory(global.FullCalendarInteraction = {}, global.FullCalendar));\n}(this, function (exports, core) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    core.config.touchMouseIgnoreWait = 500;\n    var ignoreMouseDepth = 0;\n    var listenerCnt = 0;\n    var isWindowTouchMoveCancelled = false;\n    /*\n    Uses a \"pointer\" abstraction, which monitors UI events for both mouse and touch.\n    Tracks when the pointer \"drags\" on a certain element, meaning down+move+up.\n\n    Also, tracks if there was touch-scrolling.\n    Also, can prevent touch-scrolling from happening.\n    Also, can fire pointermove events when scrolling happens underneath, even when no real pointer movement.\n\n    emits:\n    - pointerdown\n    - pointermove\n    - pointerup\n    */\n    var PointerDragging = /** @class */ (function () {\n        function PointerDragging(containerEl) {\n            var _this = this;\n            this.subjectEl = null;\n            this.downEl = null;\n            // options that can be directly assigned by caller\n            this.selector = ''; // will cause subjectEl in all emitted events to be this element\n            this.handleSelector = '';\n            this.shouldIgnoreMove = false;\n            this.shouldWatchScroll = true; // for simulating pointermove on scroll\n            // internal states\n            this.isDragging = false;\n            this.isTouchDragging = false;\n            this.wasTouchScroll = false;\n            // Mouse\n            // ----------------------------------------------------------------------------------------------------\n            this.handleMouseDown = function (ev) {\n                if (!_this.shouldIgnoreMouse() &&\n                    isPrimaryMouseButton(ev) &&\n                    _this.tryStart(ev)) {\n                    var pev = _this.createEventFromMouse(ev, true);\n                    _this.emitter.trigger('pointerdown', pev);\n                    _this.initScrollWatch(pev);\n                    if (!_this.shouldIgnoreMove) {\n                        document.addEventListener('mousemove', _this.handleMouseMove);\n                    }\n                    document.addEventListener('mouseup', _this.handleMouseUp);\n                }\n            };\n            this.handleMouseMove = function (ev) {\n                var pev = _this.createEventFromMouse(ev);\n                _this.recordCoords(pev);\n                _this.emitter.trigger('pointermove', pev);\n            };\n            this.handleMouseUp = function (ev) {\n                document.removeEventListener('mousemove', _this.handleMouseMove);\n                document.removeEventListener('mouseup', _this.handleMouseUp);\n                _this.emitter.trigger('pointerup', _this.createEventFromMouse(ev));\n                _this.cleanup(); // call last so that pointerup has access to props\n            };\n            // Touch\n            // ----------------------------------------------------------------------------------------------------\n            this.handleTouchStart = function (ev) {\n                if (_this.tryStart(ev)) {\n                    _this.isTouchDragging = true;\n                    var pev = _this.createEventFromTouch(ev, true);\n                    _this.emitter.trigger('pointerdown', pev);\n                    _this.initScrollWatch(pev);\n                    // unlike mouse, need to attach to target, not document\n                    // https://stackoverflow.com/a/45760014\n                    var target = ev.target;\n                    if (!_this.shouldIgnoreMove) {\n                        target.addEventListener('touchmove', _this.handleTouchMove);\n                    }\n                    target.addEventListener('touchend', _this.handleTouchEnd);\n                    target.addEventListener('touchcancel', _this.handleTouchEnd); // treat it as a touch end\n                    // attach a handler to get called when ANY scroll action happens on the page.\n                    // this was impossible to do with normal on/off because 'scroll' doesn't bubble.\n                    // http://stackoverflow.com/a/32954565/96342\n                    window.addEventListener('scroll', _this.handleTouchScroll, true // useCapture\n                    );\n                }\n            };\n            this.handleTouchMove = function (ev) {\n                var pev = _this.createEventFromTouch(ev);\n                _this.recordCoords(pev);\n                _this.emitter.trigger('pointermove', pev);\n            };\n            this.handleTouchEnd = function (ev) {\n                if (_this.isDragging) { // done to guard against touchend followed by touchcancel\n                    var target = ev.target;\n                    target.removeEventListener('touchmove', _this.handleTouchMove);\n                    target.removeEventListener('touchend', _this.handleTouchEnd);\n                    target.removeEventListener('touchcancel', _this.handleTouchEnd);\n                    window.removeEventListener('scroll', _this.handleTouchScroll, true); // useCaptured=true\n                    _this.emitter.trigger('pointerup', _this.createEventFromTouch(ev));\n                    _this.cleanup(); // call last so that pointerup has access to props\n                    _this.isTouchDragging = false;\n                    startIgnoringMouse();\n                }\n            };\n            this.handleTouchScroll = function () {\n                _this.wasTouchScroll = true;\n            };\n            this.handleScroll = function (ev) {\n                if (!_this.shouldIgnoreMove) {\n                    var pageX = (window.pageXOffset - _this.prevScrollX) + _this.prevPageX;\n                    var pageY = (window.pageYOffset - _this.prevScrollY) + _this.prevPageY;\n                    _this.emitter.trigger('pointermove', {\n                        origEvent: ev,\n                        isTouch: _this.isTouchDragging,\n                        subjectEl: _this.subjectEl,\n                        pageX: pageX,\n                        pageY: pageY,\n                        deltaX: pageX - _this.origPageX,\n                        deltaY: pageY - _this.origPageY\n                    });\n                }\n            };\n            this.containerEl = containerEl;\n            this.emitter = new core.EmitterMixin();\n            containerEl.addEventListener('mousedown', this.handleMouseDown);\n            containerEl.addEventListener('touchstart', this.handleTouchStart, { passive: true });\n            listenerCreated();\n        }\n        PointerDragging.prototype.destroy = function () {\n            this.containerEl.removeEventListener('mousedown', this.handleMouseDown);\n            this.containerEl.removeEventListener('touchstart', this.handleTouchStart, { passive: true });\n            listenerDestroyed();\n        };\n        PointerDragging.prototype.tryStart = function (ev) {\n            var subjectEl = this.querySubjectEl(ev);\n            var downEl = ev.target;\n            if (subjectEl &&\n                (!this.handleSelector || core.elementClosest(downEl, this.handleSelector))) {\n                this.subjectEl = subjectEl;\n                this.downEl = downEl;\n                this.isDragging = true; // do this first so cancelTouchScroll will work\n                this.wasTouchScroll = false;\n                return true;\n            }\n            return false;\n        };\n        PointerDragging.prototype.cleanup = function () {\n            isWindowTouchMoveCancelled = false;\n            this.isDragging = false;\n            this.subjectEl = null;\n            this.downEl = null;\n            // keep wasTouchScroll around for later access\n            this.destroyScrollWatch();\n        };\n        PointerDragging.prototype.querySubjectEl = function (ev) {\n            if (this.selector) {\n                return core.elementClosest(ev.target, this.selector);\n            }\n            else {\n                return this.containerEl;\n            }\n        };\n        PointerDragging.prototype.shouldIgnoreMouse = function () {\n            return ignoreMouseDepth || this.isTouchDragging;\n        };\n        // can be called by user of this class, to cancel touch-based scrolling for the current drag\n        PointerDragging.prototype.cancelTouchScroll = function () {\n            if (this.isDragging) {\n                isWindowTouchMoveCancelled = true;\n            }\n        };\n        // Scrolling that simulates pointermoves\n        // ----------------------------------------------------------------------------------------------------\n        PointerDragging.prototype.initScrollWatch = function (ev) {\n            if (this.shouldWatchScroll) {\n                this.recordCoords(ev);\n                window.addEventListener('scroll', this.handleScroll, true); // useCapture=true\n            }\n        };\n        PointerDragging.prototype.recordCoords = function (ev) {\n            if (this.shouldWatchScroll) {\n                this.prevPageX = ev.pageX;\n                this.prevPageY = ev.pageY;\n                this.prevScrollX = window.pageXOffset;\n                this.prevScrollY = window.pageYOffset;\n            }\n        };\n        PointerDragging.prototype.destroyScrollWatch = function () {\n            if (this.shouldWatchScroll) {\n                window.removeEventListener('scroll', this.handleScroll, true); // useCaptured=true\n            }\n        };\n        // Event Normalization\n        // ----------------------------------------------------------------------------------------------------\n        PointerDragging.prototype.createEventFromMouse = function (ev, isFirst) {\n            var deltaX = 0;\n            var deltaY = 0;\n            // TODO: repeat code\n            if (isFirst) {\n                this.origPageX = ev.pageX;\n                this.origPageY = ev.pageY;\n            }\n            else {\n                deltaX = ev.pageX - this.origPageX;\n                deltaY = ev.pageY - this.origPageY;\n            }\n            return {\n                origEvent: ev,\n                isTouch: false,\n                subjectEl: this.subjectEl,\n                pageX: ev.pageX,\n                pageY: ev.pageY,\n                deltaX: deltaX,\n                deltaY: deltaY\n            };\n        };\n        PointerDragging.prototype.createEventFromTouch = function (ev, isFirst) {\n            var touches = ev.touches;\n            var pageX;\n            var pageY;\n            var deltaX = 0;\n            var deltaY = 0;\n            // if touch coords available, prefer,\n            // because FF would give bad ev.pageX ev.pageY\n            if (touches && touches.length) {\n                pageX = touches[0].pageX;\n                pageY = touches[0].pageY;\n            }\n            else {\n                pageX = ev.pageX;\n                pageY = ev.pageY;\n            }\n            // TODO: repeat code\n            if (isFirst) {\n                this.origPageX = pageX;\n                this.origPageY = pageY;\n            }\n            else {\n                deltaX = pageX - this.origPageX;\n                deltaY = pageY - this.origPageY;\n            }\n            return {\n                origEvent: ev,\n                isTouch: true,\n                subjectEl: this.subjectEl,\n                pageX: pageX,\n                pageY: pageY,\n                deltaX: deltaX,\n                deltaY: deltaY\n            };\n        };\n        return PointerDragging;\n    }());\n    // Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\n    function isPrimaryMouseButton(ev) {\n        return ev.button === 0 && !ev.ctrlKey;\n    }\n    // Ignoring fake mouse events generated by touch\n    // ----------------------------------------------------------------------------------------------------\n    function startIgnoringMouse() {\n        ignoreMouseDepth++;\n        setTimeout(function () {\n            ignoreMouseDepth--;\n        }, core.config.touchMouseIgnoreWait);\n    }\n    // We want to attach touchmove as early as possible for Safari\n    // ----------------------------------------------------------------------------------------------------\n    function listenerCreated() {\n        if (!(listenerCnt++)) {\n            window.addEventListener('touchmove', onWindowTouchMove, { passive: false });\n        }\n    }\n    function listenerDestroyed() {\n        if (!(--listenerCnt)) {\n            window.removeEventListener('touchmove', onWindowTouchMove, { passive: false });\n        }\n    }\n    function onWindowTouchMove(ev) {\n        if (isWindowTouchMoveCancelled) {\n            ev.preventDefault();\n        }\n    }\n\n    /*\n    An effect in which an element follows the movement of a pointer across the screen.\n    The moving element is a clone of some other element.\n    Must call start + handleMove + stop.\n    */\n    var ElementMirror = /** @class */ (function () {\n        function ElementMirror() {\n            this.isVisible = false; // must be explicitly enabled\n            this.sourceEl = null;\n            this.mirrorEl = null;\n            this.sourceElRect = null; // screen coords relative to viewport\n            // options that can be set directly by caller\n            this.parentNode = document.body;\n            this.zIndex = 9999;\n            this.revertDuration = 0;\n        }\n        ElementMirror.prototype.start = function (sourceEl, pageX, pageY) {\n            this.sourceEl = sourceEl;\n            this.sourceElRect = this.sourceEl.getBoundingClientRect();\n            this.origScreenX = pageX - window.pageXOffset;\n            this.origScreenY = pageY - window.pageYOffset;\n            this.deltaX = 0;\n            this.deltaY = 0;\n            this.updateElPosition();\n        };\n        ElementMirror.prototype.handleMove = function (pageX, pageY) {\n            this.deltaX = (pageX - window.pageXOffset) - this.origScreenX;\n            this.deltaY = (pageY - window.pageYOffset) - this.origScreenY;\n            this.updateElPosition();\n        };\n        // can be called before start\n        ElementMirror.prototype.setIsVisible = function (bool) {\n            if (bool) {\n                if (!this.isVisible) {\n                    if (this.mirrorEl) {\n                        this.mirrorEl.style.display = '';\n                    }\n                    this.isVisible = bool; // needs to happen before updateElPosition\n                    this.updateElPosition(); // because was not updating the position while invisible\n                }\n            }\n            else {\n                if (this.isVisible) {\n                    if (this.mirrorEl) {\n                        this.mirrorEl.style.display = 'none';\n                    }\n                    this.isVisible = bool;\n                }\n            }\n        };\n        // always async\n        ElementMirror.prototype.stop = function (needsRevertAnimation, callback) {\n            var _this = this;\n            var done = function () {\n                _this.cleanup();\n                callback();\n            };\n            if (needsRevertAnimation &&\n                this.mirrorEl &&\n                this.isVisible &&\n                this.revertDuration && // if 0, transition won't work\n                (this.deltaX || this.deltaY) // if same coords, transition won't work\n            ) {\n                this.doRevertAnimation(done, this.revertDuration);\n            }\n            else {\n                setTimeout(done, 0);\n            }\n        };\n        ElementMirror.prototype.doRevertAnimation = function (callback, revertDuration) {\n            var mirrorEl = this.mirrorEl;\n            var finalSourceElRect = this.sourceEl.getBoundingClientRect(); // because autoscrolling might have happened\n            mirrorEl.style.transition =\n                'top ' + revertDuration + 'ms,' +\n                    'left ' + revertDuration + 'ms';\n            core.applyStyle(mirrorEl, {\n                left: finalSourceElRect.left,\n                top: finalSourceElRect.top\n            });\n            core.whenTransitionDone(mirrorEl, function () {\n                mirrorEl.style.transition = '';\n                callback();\n            });\n        };\n        ElementMirror.prototype.cleanup = function () {\n            if (this.mirrorEl) {\n                core.removeElement(this.mirrorEl);\n                this.mirrorEl = null;\n            }\n            this.sourceEl = null;\n        };\n        ElementMirror.prototype.updateElPosition = function () {\n            if (this.sourceEl && this.isVisible) {\n                core.applyStyle(this.getMirrorEl(), {\n                    left: this.sourceElRect.left + this.deltaX,\n                    top: this.sourceElRect.top + this.deltaY\n                });\n            }\n        };\n        ElementMirror.prototype.getMirrorEl = function () {\n            var sourceElRect = this.sourceElRect;\n            var mirrorEl = this.mirrorEl;\n            if (!mirrorEl) {\n                mirrorEl = this.mirrorEl = this.sourceEl.cloneNode(true); // cloneChildren=true\n                // we don't want long taps or any mouse interaction causing selection/menus.\n                // would use preventSelection(), but that prevents selectstart, causing problems.\n                mirrorEl.classList.add('fc-unselectable');\n                mirrorEl.classList.add('fc-dragging');\n                core.applyStyle(mirrorEl, {\n                    position: 'fixed',\n                    zIndex: this.zIndex,\n                    visibility: '',\n                    boxSizing: 'border-box',\n                    width: sourceElRect.right - sourceElRect.left,\n                    height: sourceElRect.bottom - sourceElRect.top,\n                    right: 'auto',\n                    bottom: 'auto',\n                    margin: 0\n                });\n                this.parentNode.appendChild(mirrorEl);\n            }\n            return mirrorEl;\n        };\n        return ElementMirror;\n    }());\n\n    /*\n    Is a cache for a given element's scroll information (all the info that ScrollController stores)\n    in addition the \"client rectangle\" of the element.. the area within the scrollbars.\n\n    The cache can be in one of two modes:\n    - doesListening:false - ignores when the container is scrolled by someone else\n    - doesListening:true - watch for scrolling and update the cache\n    */\n    var ScrollGeomCache = /** @class */ (function (_super) {\n        __extends(ScrollGeomCache, _super);\n        function ScrollGeomCache(scrollController, doesListening) {\n            var _this = _super.call(this) || this;\n            _this.handleScroll = function () {\n                _this.scrollTop = _this.scrollController.getScrollTop();\n                _this.scrollLeft = _this.scrollController.getScrollLeft();\n                _this.handleScrollChange();\n            };\n            _this.scrollController = scrollController;\n            _this.doesListening = doesListening;\n            _this.scrollTop = _this.origScrollTop = scrollController.getScrollTop();\n            _this.scrollLeft = _this.origScrollLeft = scrollController.getScrollLeft();\n            _this.scrollWidth = scrollController.getScrollWidth();\n            _this.scrollHeight = scrollController.getScrollHeight();\n            _this.clientWidth = scrollController.getClientWidth();\n            _this.clientHeight = scrollController.getClientHeight();\n            _this.clientRect = _this.computeClientRect(); // do last in case it needs cached values\n            if (_this.doesListening) {\n                _this.getEventTarget().addEventListener('scroll', _this.handleScroll);\n            }\n            return _this;\n        }\n        ScrollGeomCache.prototype.destroy = function () {\n            if (this.doesListening) {\n                this.getEventTarget().removeEventListener('scroll', this.handleScroll);\n            }\n        };\n        ScrollGeomCache.prototype.getScrollTop = function () {\n            return this.scrollTop;\n        };\n        ScrollGeomCache.prototype.getScrollLeft = function () {\n            return this.scrollLeft;\n        };\n        ScrollGeomCache.prototype.setScrollTop = function (top) {\n            this.scrollController.setScrollTop(top);\n            if (!this.doesListening) {\n                // we are not relying on the element to normalize out-of-bounds scroll values\n                // so we need to sanitize ourselves\n                this.scrollTop = Math.max(Math.min(top, this.getMaxScrollTop()), 0);\n                this.handleScrollChange();\n            }\n        };\n        ScrollGeomCache.prototype.setScrollLeft = function (top) {\n            this.scrollController.setScrollLeft(top);\n            if (!this.doesListening) {\n                // we are not relying on the element to normalize out-of-bounds scroll values\n                // so we need to sanitize ourselves\n                this.scrollLeft = Math.max(Math.min(top, this.getMaxScrollLeft()), 0);\n                this.handleScrollChange();\n            }\n        };\n        ScrollGeomCache.prototype.getClientWidth = function () {\n            return this.clientWidth;\n        };\n        ScrollGeomCache.prototype.getClientHeight = function () {\n            return this.clientHeight;\n        };\n        ScrollGeomCache.prototype.getScrollWidth = function () {\n            return this.scrollWidth;\n        };\n        ScrollGeomCache.prototype.getScrollHeight = function () {\n            return this.scrollHeight;\n        };\n        ScrollGeomCache.prototype.handleScrollChange = function () {\n        };\n        return ScrollGeomCache;\n    }(core.ScrollController));\n    var ElementScrollGeomCache = /** @class */ (function (_super) {\n        __extends(ElementScrollGeomCache, _super);\n        function ElementScrollGeomCache(el, doesListening) {\n            return _super.call(this, new core.ElementScrollController(el), doesListening) || this;\n        }\n        ElementScrollGeomCache.prototype.getEventTarget = function () {\n            return this.scrollController.el;\n        };\n        ElementScrollGeomCache.prototype.computeClientRect = function () {\n            return core.computeInnerRect(this.scrollController.el);\n        };\n        return ElementScrollGeomCache;\n    }(ScrollGeomCache));\n    var WindowScrollGeomCache = /** @class */ (function (_super) {\n        __extends(WindowScrollGeomCache, _super);\n        function WindowScrollGeomCache(doesListening) {\n            return _super.call(this, new core.WindowScrollController(), doesListening) || this;\n        }\n        WindowScrollGeomCache.prototype.getEventTarget = function () {\n            return window;\n        };\n        WindowScrollGeomCache.prototype.computeClientRect = function () {\n            return {\n                left: this.scrollLeft,\n                right: this.scrollLeft + this.clientWidth,\n                top: this.scrollTop,\n                bottom: this.scrollTop + this.clientHeight\n            };\n        };\n        // the window is the only scroll object that changes it's rectangle relative\n        // to the document's topleft as it scrolls\n        WindowScrollGeomCache.prototype.handleScrollChange = function () {\n            this.clientRect = this.computeClientRect();\n        };\n        return WindowScrollGeomCache;\n    }(ScrollGeomCache));\n\n    // If available we are using native \"performance\" API instead of \"Date\"\n    // Read more about it on MDN:\n    // https://developer.mozilla.org/en-US/docs/Web/API/Performance\n    var getTime = typeof performance === 'function' ? performance.now : Date.now;\n    /*\n    For a pointer interaction, automatically scrolls certain scroll containers when the pointer\n    approaches the edge.\n\n    The caller must call start + handleMove + stop.\n    */\n    var AutoScroller = /** @class */ (function () {\n        function AutoScroller() {\n            var _this = this;\n            // options that can be set by caller\n            this.isEnabled = true;\n            this.scrollQuery = [window, '.fc-scroller'];\n            this.edgeThreshold = 50; // pixels\n            this.maxVelocity = 300; // pixels per second\n            // internal state\n            this.pointerScreenX = null;\n            this.pointerScreenY = null;\n            this.isAnimating = false;\n            this.scrollCaches = null;\n            // protect against the initial pointerdown being too close to an edge and starting the scroll\n            this.everMovedUp = false;\n            this.everMovedDown = false;\n            this.everMovedLeft = false;\n            this.everMovedRight = false;\n            this.animate = function () {\n                if (_this.isAnimating) { // wasn't cancelled between animation calls\n                    var edge = _this.computeBestEdge(_this.pointerScreenX + window.pageXOffset, _this.pointerScreenY + window.pageYOffset);\n                    if (edge) {\n                        var now = getTime();\n                        _this.handleSide(edge, (now - _this.msSinceRequest) / 1000);\n                        _this.requestAnimation(now);\n                    }\n                    else {\n                        _this.isAnimating = false; // will stop animation\n                    }\n                }\n            };\n        }\n        AutoScroller.prototype.start = function (pageX, pageY) {\n            if (this.isEnabled) {\n                this.scrollCaches = this.buildCaches();\n                this.pointerScreenX = null;\n                this.pointerScreenY = null;\n                this.everMovedUp = false;\n                this.everMovedDown = false;\n                this.everMovedLeft = false;\n                this.everMovedRight = false;\n                this.handleMove(pageX, pageY);\n            }\n        };\n        AutoScroller.prototype.handleMove = function (pageX, pageY) {\n            if (this.isEnabled) {\n                var pointerScreenX = pageX - window.pageXOffset;\n                var pointerScreenY = pageY - window.pageYOffset;\n                var yDelta = this.pointerScreenY === null ? 0 : pointerScreenY - this.pointerScreenY;\n                var xDelta = this.pointerScreenX === null ? 0 : pointerScreenX - this.pointerScreenX;\n                if (yDelta < 0) {\n                    this.everMovedUp = true;\n                }\n                else if (yDelta > 0) {\n                    this.everMovedDown = true;\n                }\n                if (xDelta < 0) {\n                    this.everMovedLeft = true;\n                }\n                else if (xDelta > 0) {\n                    this.everMovedRight = true;\n                }\n                this.pointerScreenX = pointerScreenX;\n                this.pointerScreenY = pointerScreenY;\n                if (!this.isAnimating) {\n                    this.isAnimating = true;\n                    this.requestAnimation(getTime());\n                }\n            }\n        };\n        AutoScroller.prototype.stop = function () {\n            if (this.isEnabled) {\n                this.isAnimating = false; // will stop animation\n                for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                    var scrollCache = _a[_i];\n                    scrollCache.destroy();\n                }\n                this.scrollCaches = null;\n            }\n        };\n        AutoScroller.prototype.requestAnimation = function (now) {\n            this.msSinceRequest = now;\n            requestAnimationFrame(this.animate);\n        };\n        AutoScroller.prototype.handleSide = function (edge, seconds) {\n            var scrollCache = edge.scrollCache;\n            var edgeThreshold = this.edgeThreshold;\n            var invDistance = edgeThreshold - edge.distance;\n            var velocity = // the closer to the edge, the faster we scroll\n             (invDistance * invDistance) / (edgeThreshold * edgeThreshold) * // quadratic\n                this.maxVelocity * seconds;\n            var sign = 1;\n            switch (edge.name) {\n                case 'left':\n                    sign = -1;\n                // falls through\n                case 'right':\n                    scrollCache.setScrollLeft(scrollCache.getScrollLeft() + velocity * sign);\n                    break;\n                case 'top':\n                    sign = -1;\n                // falls through\n                case 'bottom':\n                    scrollCache.setScrollTop(scrollCache.getScrollTop() + velocity * sign);\n                    break;\n            }\n        };\n        // left/top are relative to document topleft\n        AutoScroller.prototype.computeBestEdge = function (left, top) {\n            var edgeThreshold = this.edgeThreshold;\n            var bestSide = null;\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                var rect = scrollCache.clientRect;\n                var leftDist = left - rect.left;\n                var rightDist = rect.right - left;\n                var topDist = top - rect.top;\n                var bottomDist = rect.bottom - top;\n                // completely within the rect?\n                if (leftDist >= 0 && rightDist >= 0 && topDist >= 0 && bottomDist >= 0) {\n                    if (topDist <= edgeThreshold && this.everMovedUp && scrollCache.canScrollUp() &&\n                        (!bestSide || bestSide.distance > topDist)) {\n                        bestSide = { scrollCache: scrollCache, name: 'top', distance: topDist };\n                    }\n                    if (bottomDist <= edgeThreshold && this.everMovedDown && scrollCache.canScrollDown() &&\n                        (!bestSide || bestSide.distance > bottomDist)) {\n                        bestSide = { scrollCache: scrollCache, name: 'bottom', distance: bottomDist };\n                    }\n                    if (leftDist <= edgeThreshold && this.everMovedLeft && scrollCache.canScrollLeft() &&\n                        (!bestSide || bestSide.distance > leftDist)) {\n                        bestSide = { scrollCache: scrollCache, name: 'left', distance: leftDist };\n                    }\n                    if (rightDist <= edgeThreshold && this.everMovedRight && scrollCache.canScrollRight() &&\n                        (!bestSide || bestSide.distance > rightDist)) {\n                        bestSide = { scrollCache: scrollCache, name: 'right', distance: rightDist };\n                    }\n                }\n            }\n            return bestSide;\n        };\n        AutoScroller.prototype.buildCaches = function () {\n            return this.queryScrollEls().map(function (el) {\n                if (el === window) {\n                    return new WindowScrollGeomCache(false); // false = don't listen to user-generated scrolls\n                }\n                else {\n                    return new ElementScrollGeomCache(el, false); // false = don't listen to user-generated scrolls\n                }\n            });\n        };\n        AutoScroller.prototype.queryScrollEls = function () {\n            var els = [];\n            for (var _i = 0, _a = this.scrollQuery; _i < _a.length; _i++) {\n                var query = _a[_i];\n                if (typeof query === 'object') {\n                    els.push(query);\n                }\n                else {\n                    els.push.apply(els, Array.prototype.slice.call(document.querySelectorAll(query)));\n                }\n            }\n            return els;\n        };\n        return AutoScroller;\n    }());\n\n    /*\n    Monitors dragging on an element. Has a number of high-level features:\n    - minimum distance required before dragging\n    - minimum wait time (\"delay\") before dragging\n    - a mirror element that follows the pointer\n    */\n    var FeaturefulElementDragging = /** @class */ (function (_super) {\n        __extends(FeaturefulElementDragging, _super);\n        function FeaturefulElementDragging(containerEl) {\n            var _this = _super.call(this, containerEl) || this;\n            // options that can be directly set by caller\n            // the caller can also set the PointerDragging's options as well\n            _this.delay = null;\n            _this.minDistance = 0;\n            _this.touchScrollAllowed = true; // prevents drag from starting and blocks scrolling during drag\n            _this.mirrorNeedsRevert = false;\n            _this.isInteracting = false; // is the user validly moving the pointer? lasts until pointerup\n            _this.isDragging = false; // is it INTENTFULLY dragging? lasts until after revert animation\n            _this.isDelayEnded = false;\n            _this.isDistanceSurpassed = false;\n            _this.delayTimeoutId = null;\n            _this.onPointerDown = function (ev) {\n                if (!_this.isDragging) { // so new drag doesn't happen while revert animation is going\n                    _this.isInteracting = true;\n                    _this.isDelayEnded = false;\n                    _this.isDistanceSurpassed = false;\n                    core.preventSelection(document.body);\n                    core.preventContextMenu(document.body);\n                    // prevent links from being visited if there's an eventual drag.\n                    // also prevents selection in older browsers (maybe?).\n                    // not necessary for touch, besides, browser would complain about passiveness.\n                    if (!ev.isTouch) {\n                        ev.origEvent.preventDefault();\n                    }\n                    _this.emitter.trigger('pointerdown', ev);\n                    if (!_this.pointer.shouldIgnoreMove) {\n                        // actions related to initiating dragstart+dragmove+dragend...\n                        _this.mirror.setIsVisible(false); // reset. caller must set-visible\n                        _this.mirror.start(ev.subjectEl, ev.pageX, ev.pageY); // must happen on first pointer down\n                        _this.startDelay(ev);\n                        if (!_this.minDistance) {\n                            _this.handleDistanceSurpassed(ev);\n                        }\n                    }\n                }\n            };\n            _this.onPointerMove = function (ev) {\n                if (_this.isInteracting) { // if false, still waiting for previous drag's revert\n                    _this.emitter.trigger('pointermove', ev);\n                    if (!_this.isDistanceSurpassed) {\n                        var minDistance = _this.minDistance;\n                        var distanceSq = void 0; // current distance from the origin, squared\n                        var deltaX = ev.deltaX, deltaY = ev.deltaY;\n                        distanceSq = deltaX * deltaX + deltaY * deltaY;\n                        if (distanceSq >= minDistance * minDistance) { // use pythagorean theorem\n                            _this.handleDistanceSurpassed(ev);\n                        }\n                    }\n                    if (_this.isDragging) {\n                        // a real pointer move? (not one simulated by scrolling)\n                        if (ev.origEvent.type !== 'scroll') {\n                            _this.mirror.handleMove(ev.pageX, ev.pageY);\n                            _this.autoScroller.handleMove(ev.pageX, ev.pageY);\n                        }\n                        _this.emitter.trigger('dragmove', ev);\n                    }\n                }\n            };\n            _this.onPointerUp = function (ev) {\n                if (_this.isInteracting) { // if false, still waiting for previous drag's revert\n                    _this.isInteracting = false;\n                    core.allowSelection(document.body);\n                    core.allowContextMenu(document.body);\n                    _this.emitter.trigger('pointerup', ev); // can potentially set mirrorNeedsRevert\n                    if (_this.isDragging) {\n                        _this.autoScroller.stop();\n                        _this.tryStopDrag(ev); // which will stop the mirror\n                    }\n                    if (_this.delayTimeoutId) {\n                        clearTimeout(_this.delayTimeoutId);\n                        _this.delayTimeoutId = null;\n                    }\n                }\n            };\n            var pointer = _this.pointer = new PointerDragging(containerEl);\n            pointer.emitter.on('pointerdown', _this.onPointerDown);\n            pointer.emitter.on('pointermove', _this.onPointerMove);\n            pointer.emitter.on('pointerup', _this.onPointerUp);\n            _this.mirror = new ElementMirror();\n            _this.autoScroller = new AutoScroller();\n            return _this;\n        }\n        FeaturefulElementDragging.prototype.destroy = function () {\n            this.pointer.destroy();\n        };\n        FeaturefulElementDragging.prototype.startDelay = function (ev) {\n            var _this = this;\n            if (typeof this.delay === 'number') {\n                this.delayTimeoutId = setTimeout(function () {\n                    _this.delayTimeoutId = null;\n                    _this.handleDelayEnd(ev);\n                }, this.delay);\n            }\n            else {\n                this.handleDelayEnd(ev);\n            }\n        };\n        FeaturefulElementDragging.prototype.handleDelayEnd = function (ev) {\n            this.isDelayEnded = true;\n            this.tryStartDrag(ev);\n        };\n        FeaturefulElementDragging.prototype.handleDistanceSurpassed = function (ev) {\n            this.isDistanceSurpassed = true;\n            this.tryStartDrag(ev);\n        };\n        FeaturefulElementDragging.prototype.tryStartDrag = function (ev) {\n            if (this.isDelayEnded && this.isDistanceSurpassed) {\n                if (!this.pointer.wasTouchScroll || this.touchScrollAllowed) {\n                    this.isDragging = true;\n                    this.mirrorNeedsRevert = false;\n                    this.autoScroller.start(ev.pageX, ev.pageY);\n                    this.emitter.trigger('dragstart', ev);\n                    if (this.touchScrollAllowed === false) {\n                        this.pointer.cancelTouchScroll();\n                    }\n                }\n            }\n        };\n        FeaturefulElementDragging.prototype.tryStopDrag = function (ev) {\n            // .stop() is ALWAYS asynchronous, which we NEED because we want all pointerup events\n            // that come from the document to fire beforehand. much more convenient this way.\n            this.mirror.stop(this.mirrorNeedsRevert, this.stopDrag.bind(this, ev) // bound with args\n            );\n        };\n        FeaturefulElementDragging.prototype.stopDrag = function (ev) {\n            this.isDragging = false;\n            this.emitter.trigger('dragend', ev);\n        };\n        // fill in the implementations...\n        FeaturefulElementDragging.prototype.setIgnoreMove = function (bool) {\n            this.pointer.shouldIgnoreMove = bool;\n        };\n        FeaturefulElementDragging.prototype.setMirrorIsVisible = function (bool) {\n            this.mirror.setIsVisible(bool);\n        };\n        FeaturefulElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n            this.mirrorNeedsRevert = bool;\n        };\n        FeaturefulElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n            this.autoScroller.isEnabled = bool;\n        };\n        return FeaturefulElementDragging;\n    }(core.ElementDragging));\n\n    /*\n    When this class is instantiated, it records the offset of an element (relative to the document topleft),\n    and continues to monitor scrolling, updating the cached coordinates if it needs to.\n    Does not access the DOM after instantiation, so highly performant.\n\n    Also keeps track of all scrolling/overflow:hidden containers that are parents of the given element\n    and an determine if a given point is inside the combined clipping rectangle.\n    */\n    var OffsetTracker = /** @class */ (function () {\n        function OffsetTracker(el) {\n            this.origRect = core.computeRect(el);\n            // will work fine for divs that have overflow:hidden\n            this.scrollCaches = core.getClippingParents(el).map(function (el) {\n                return new ElementScrollGeomCache(el, true); // listen=true\n            });\n        }\n        OffsetTracker.prototype.destroy = function () {\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                scrollCache.destroy();\n            }\n        };\n        OffsetTracker.prototype.computeLeft = function () {\n            var left = this.origRect.left;\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                left += scrollCache.origScrollLeft - scrollCache.getScrollLeft();\n            }\n            return left;\n        };\n        OffsetTracker.prototype.computeTop = function () {\n            var top = this.origRect.top;\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                top += scrollCache.origScrollTop - scrollCache.getScrollTop();\n            }\n            return top;\n        };\n        OffsetTracker.prototype.isWithinClipping = function (pageX, pageY) {\n            var point = { left: pageX, top: pageY };\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                if (!isIgnoredClipping(scrollCache.getEventTarget()) &&\n                    !core.pointInsideRect(point, scrollCache.clientRect)) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        return OffsetTracker;\n    }());\n    // certain clipping containers should never constrain interactions, like <html> and <body>\n    // https://github.com/fullcalendar/fullcalendar/issues/3615\n    function isIgnoredClipping(node) {\n        var tagName = node.tagName;\n        return tagName === 'HTML' || tagName === 'BODY';\n    }\n\n    /*\n    Tracks movement over multiple droppable areas (aka \"hits\")\n    that exist in one or more DateComponents.\n    Relies on an existing draggable.\n\n    emits:\n    - pointerdown\n    - dragstart\n    - hitchange - fires initially, even if not over a hit\n    - pointerup\n    - (hitchange - again, to null, if ended over a hit)\n    - dragend\n    */\n    var HitDragging = /** @class */ (function () {\n        function HitDragging(dragging, droppableStore) {\n            var _this = this;\n            // options that can be set by caller\n            this.useSubjectCenter = false;\n            this.requireInitial = true; // if doesn't start out on a hit, won't emit any events\n            this.initialHit = null;\n            this.movingHit = null;\n            this.finalHit = null; // won't ever be populated if shouldIgnoreMove\n            this.handlePointerDown = function (ev) {\n                var dragging = _this.dragging;\n                _this.initialHit = null;\n                _this.movingHit = null;\n                _this.finalHit = null;\n                _this.prepareHits();\n                _this.processFirstCoord(ev);\n                if (_this.initialHit || !_this.requireInitial) {\n                    dragging.setIgnoreMove(false);\n                    _this.emitter.trigger('pointerdown', ev); // TODO: fire this before computing processFirstCoord, so listeners can cancel. this gets fired by almost every handler :(\n                }\n                else {\n                    dragging.setIgnoreMove(true);\n                }\n            };\n            this.handleDragStart = function (ev) {\n                _this.emitter.trigger('dragstart', ev);\n                _this.handleMove(ev, true); // force = fire even if initially null\n            };\n            this.handleDragMove = function (ev) {\n                _this.emitter.trigger('dragmove', ev);\n                _this.handleMove(ev);\n            };\n            this.handlePointerUp = function (ev) {\n                _this.releaseHits();\n                _this.emitter.trigger('pointerup', ev);\n            };\n            this.handleDragEnd = function (ev) {\n                if (_this.movingHit) {\n                    _this.emitter.trigger('hitupdate', null, true, ev);\n                }\n                _this.finalHit = _this.movingHit;\n                _this.movingHit = null;\n                _this.emitter.trigger('dragend', ev);\n            };\n            this.droppableStore = droppableStore;\n            dragging.emitter.on('pointerdown', this.handlePointerDown);\n            dragging.emitter.on('dragstart', this.handleDragStart);\n            dragging.emitter.on('dragmove', this.handleDragMove);\n            dragging.emitter.on('pointerup', this.handlePointerUp);\n            dragging.emitter.on('dragend', this.handleDragEnd);\n            this.dragging = dragging;\n            this.emitter = new core.EmitterMixin();\n        }\n        // sets initialHit\n        // sets coordAdjust\n        HitDragging.prototype.processFirstCoord = function (ev) {\n            var origPoint = { left: ev.pageX, top: ev.pageY };\n            var adjustedPoint = origPoint;\n            var subjectEl = ev.subjectEl;\n            var subjectRect;\n            if (subjectEl !== document) {\n                subjectRect = core.computeRect(subjectEl);\n                adjustedPoint = core.constrainPoint(adjustedPoint, subjectRect);\n            }\n            var initialHit = this.initialHit = this.queryHitForOffset(adjustedPoint.left, adjustedPoint.top);\n            if (initialHit) {\n                if (this.useSubjectCenter && subjectRect) {\n                    var slicedSubjectRect = core.intersectRects(subjectRect, initialHit.rect);\n                    if (slicedSubjectRect) {\n                        adjustedPoint = core.getRectCenter(slicedSubjectRect);\n                    }\n                }\n                this.coordAdjust = core.diffPoints(adjustedPoint, origPoint);\n            }\n            else {\n                this.coordAdjust = { left: 0, top: 0 };\n            }\n        };\n        HitDragging.prototype.handleMove = function (ev, forceHandle) {\n            var hit = this.queryHitForOffset(ev.pageX + this.coordAdjust.left, ev.pageY + this.coordAdjust.top);\n            if (forceHandle || !isHitsEqual(this.movingHit, hit)) {\n                this.movingHit = hit;\n                this.emitter.trigger('hitupdate', hit, false, ev);\n            }\n        };\n        HitDragging.prototype.prepareHits = function () {\n            this.offsetTrackers = core.mapHash(this.droppableStore, function (interactionSettings) {\n                interactionSettings.component.buildPositionCaches();\n                return new OffsetTracker(interactionSettings.el);\n            });\n        };\n        HitDragging.prototype.releaseHits = function () {\n            var offsetTrackers = this.offsetTrackers;\n            for (var id in offsetTrackers) {\n                offsetTrackers[id].destroy();\n            }\n            this.offsetTrackers = {};\n        };\n        HitDragging.prototype.queryHitForOffset = function (offsetLeft, offsetTop) {\n            var _a = this, droppableStore = _a.droppableStore, offsetTrackers = _a.offsetTrackers;\n            var bestHit = null;\n            for (var id in droppableStore) {\n                var component = droppableStore[id].component;\n                var offsetTracker = offsetTrackers[id];\n                if (offsetTracker.isWithinClipping(offsetLeft, offsetTop)) {\n                    var originLeft = offsetTracker.computeLeft();\n                    var originTop = offsetTracker.computeTop();\n                    var positionLeft = offsetLeft - originLeft;\n                    var positionTop = offsetTop - originTop;\n                    var origRect = offsetTracker.origRect;\n                    var width = origRect.right - origRect.left;\n                    var height = origRect.bottom - origRect.top;\n                    if (\n                    // must be within the element's bounds\n                    positionLeft >= 0 && positionLeft < width &&\n                        positionTop >= 0 && positionTop < height) {\n                        var hit = component.queryHit(positionLeft, positionTop, width, height);\n                        if (hit &&\n                            (\n                            // make sure the hit is within activeRange, meaning it's not a deal cell\n                            !component.props.dateProfile || // hack for DayTile\n                                core.rangeContainsRange(component.props.dateProfile.activeRange, hit.dateSpan.range)) &&\n                            (!bestHit || hit.layer > bestHit.layer)) {\n                            // TODO: better way to re-orient rectangle\n                            hit.rect.left += originLeft;\n                            hit.rect.right += originLeft;\n                            hit.rect.top += originTop;\n                            hit.rect.bottom += originTop;\n                            bestHit = hit;\n                        }\n                    }\n                }\n            }\n            return bestHit;\n        };\n        return HitDragging;\n    }());\n    function isHitsEqual(hit0, hit1) {\n        if (!hit0 && !hit1) {\n            return true;\n        }\n        if (Boolean(hit0) !== Boolean(hit1)) {\n            return false;\n        }\n        return core.isDateSpansEqual(hit0.dateSpan, hit1.dateSpan);\n    }\n\n    /*\n    Monitors when the user clicks on a specific date/time of a component.\n    A pointerdown+pointerup on the same \"hit\" constitutes a click.\n    */\n    var DateClicking = /** @class */ (function (_super) {\n        __extends(DateClicking, _super);\n        function DateClicking(settings) {\n            var _this = _super.call(this, settings) || this;\n            _this.handlePointerDown = function (ev) {\n                var dragging = _this.dragging;\n                // do this in pointerdown (not dragend) because DOM might be mutated by the time dragend is fired\n                dragging.setIgnoreMove(!_this.component.isValidDateDownEl(dragging.pointer.downEl));\n            };\n            // won't even fire if moving was ignored\n            _this.handleDragEnd = function (ev) {\n                var component = _this.component;\n                var pointer = _this.dragging.pointer;\n                if (!pointer.wasTouchScroll) {\n                    var _a = _this.hitDragging, initialHit = _a.initialHit, finalHit = _a.finalHit;\n                    if (initialHit && finalHit && isHitsEqual(initialHit, finalHit)) {\n                        component.calendar.triggerDateClick(initialHit.dateSpan, initialHit.dayEl, component.view, ev.origEvent);\n                    }\n                }\n            };\n            var component = settings.component;\n            // we DO want to watch pointer moves because otherwise finalHit won't get populated\n            _this.dragging = new FeaturefulElementDragging(component.el);\n            _this.dragging.autoScroller.isEnabled = false;\n            var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, core.interactionSettingsToStore(settings));\n            hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n            hitDragging.emitter.on('dragend', _this.handleDragEnd);\n            return _this;\n        }\n        DateClicking.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        return DateClicking;\n    }(core.Interaction));\n\n    /*\n    Tracks when the user selects a portion of time of a component,\n    constituted by a drag over date cells, with a possible delay at the beginning of the drag.\n    */\n    var DateSelecting = /** @class */ (function (_super) {\n        __extends(DateSelecting, _super);\n        function DateSelecting(settings) {\n            var _this = _super.call(this, settings) || this;\n            _this.dragSelection = null;\n            _this.handlePointerDown = function (ev) {\n                var _a = _this, component = _a.component, dragging = _a.dragging;\n                var canSelect = component.opt('selectable') &&\n                    component.isValidDateDownEl(ev.origEvent.target);\n                // don't bother to watch expensive moves if component won't do selection\n                dragging.setIgnoreMove(!canSelect);\n                // if touch, require user to hold down\n                dragging.delay = ev.isTouch ? getComponentTouchDelay(component) : null;\n            };\n            _this.handleDragStart = function (ev) {\n                _this.component.calendar.unselect(ev); // unselect previous selections\n            };\n            _this.handleHitUpdate = function (hit, isFinal) {\n                var calendar = _this.component.calendar;\n                var dragSelection = null;\n                var isInvalid = false;\n                if (hit) {\n                    dragSelection = joinHitsIntoSelection(_this.hitDragging.initialHit, hit, calendar.pluginSystem.hooks.dateSelectionTransformers);\n                    if (!dragSelection || !_this.component.isDateSelectionValid(dragSelection)) {\n                        isInvalid = true;\n                        dragSelection = null;\n                    }\n                }\n                if (dragSelection) {\n                    calendar.dispatch({ type: 'SELECT_DATES', selection: dragSelection });\n                }\n                else if (!isFinal) { // only unselect if moved away while dragging\n                    calendar.dispatch({ type: 'UNSELECT_DATES' });\n                }\n                if (!isInvalid) {\n                    core.enableCursor();\n                }\n                else {\n                    core.disableCursor();\n                }\n                if (!isFinal) {\n                    _this.dragSelection = dragSelection; // only clear if moved away from all hits while dragging\n                }\n            };\n            _this.handlePointerUp = function (pev) {\n                if (_this.dragSelection) {\n                    // selection is already rendered, so just need to report selection\n                    _this.component.calendar.triggerDateSelect(_this.dragSelection, pev);\n                    _this.dragSelection = null;\n                }\n            };\n            var component = settings.component;\n            var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n            dragging.touchScrollAllowed = false;\n            dragging.minDistance = component.opt('selectMinDistance') || 0;\n            dragging.autoScroller.isEnabled = component.opt('dragScroll');\n            var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, core.interactionSettingsToStore(settings));\n            hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n            hitDragging.emitter.on('dragstart', _this.handleDragStart);\n            hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n            hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n            return _this;\n        }\n        DateSelecting.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        return DateSelecting;\n    }(core.Interaction));\n    function getComponentTouchDelay(component) {\n        var delay = component.opt('selectLongPressDelay');\n        if (delay == null) {\n            delay = component.opt('longPressDelay');\n        }\n        return delay;\n    }\n    function joinHitsIntoSelection(hit0, hit1, dateSelectionTransformers) {\n        var dateSpan0 = hit0.dateSpan;\n        var dateSpan1 = hit1.dateSpan;\n        var ms = [\n            dateSpan0.range.start,\n            dateSpan0.range.end,\n            dateSpan1.range.start,\n            dateSpan1.range.end\n        ];\n        ms.sort(core.compareNumbers);\n        var props = {};\n        for (var _i = 0, dateSelectionTransformers_1 = dateSelectionTransformers; _i < dateSelectionTransformers_1.length; _i++) {\n            var transformer = dateSelectionTransformers_1[_i];\n            var res = transformer(hit0, hit1);\n            if (res === false) {\n                return null;\n            }\n            else if (res) {\n                __assign(props, res);\n            }\n        }\n        props.range = { start: ms[0], end: ms[3] };\n        props.allDay = dateSpan0.allDay;\n        return props;\n    }\n\n    var EventDragging = /** @class */ (function (_super) {\n        __extends(EventDragging, _super);\n        function EventDragging(settings) {\n            var _this = _super.call(this, settings) || this;\n            // internal state\n            _this.subjectSeg = null; // the seg being selected/dragged\n            _this.isDragging = false;\n            _this.eventRange = null;\n            _this.relevantEvents = null; // the events being dragged\n            _this.receivingCalendar = null;\n            _this.validMutation = null;\n            _this.mutatedRelevantEvents = null;\n            _this.handlePointerDown = function (ev) {\n                var origTarget = ev.origEvent.target;\n                var _a = _this, component = _a.component, dragging = _a.dragging;\n                var mirror = dragging.mirror;\n                var initialCalendar = component.calendar;\n                var subjectSeg = _this.subjectSeg = core.getElSeg(ev.subjectEl);\n                var eventRange = _this.eventRange = subjectSeg.eventRange;\n                var eventInstanceId = eventRange.instance.instanceId;\n                _this.relevantEvents = core.getRelevantEvents(initialCalendar.state.eventStore, eventInstanceId);\n                dragging.minDistance = ev.isTouch ? 0 : component.opt('eventDragMinDistance');\n                dragging.delay =\n                    // only do a touch delay if touch and this event hasn't been selected yet\n                    (ev.isTouch && eventInstanceId !== component.props.eventSelection) ?\n                        getComponentTouchDelay$1(component) :\n                        null;\n                mirror.parentNode = initialCalendar.el;\n                mirror.revertDuration = component.opt('dragRevertDuration');\n                var isValid = component.isValidSegDownEl(origTarget) &&\n                    !core.elementClosest(origTarget, '.fc-resizer');\n                dragging.setIgnoreMove(!isValid);\n                // disable dragging for elements that are resizable (ie, selectable)\n                // but are not draggable\n                _this.isDragging = isValid &&\n                    ev.subjectEl.classList.contains('fc-draggable');\n            };\n            _this.handleDragStart = function (ev) {\n                var initialCalendar = _this.component.calendar;\n                var eventRange = _this.eventRange;\n                var eventInstanceId = eventRange.instance.instanceId;\n                if (ev.isTouch) {\n                    // need to select a different event?\n                    if (eventInstanceId !== _this.component.props.eventSelection) {\n                        initialCalendar.dispatch({ type: 'SELECT_EVENT', eventInstanceId: eventInstanceId });\n                    }\n                }\n                else {\n                    // if now using mouse, but was previous touch interaction, clear selected event\n                    initialCalendar.dispatch({ type: 'UNSELECT_EVENT' });\n                }\n                if (_this.isDragging) {\n                    initialCalendar.unselect(ev); // unselect *date* selection\n                    initialCalendar.publiclyTrigger('eventDragStart', [\n                        {\n                            el: _this.subjectSeg.el,\n                            event: new core.EventApi(initialCalendar, eventRange.def, eventRange.instance),\n                            jsEvent: ev.origEvent,\n                            view: _this.component.view\n                        }\n                    ]);\n                }\n            };\n            _this.handleHitUpdate = function (hit, isFinal) {\n                if (!_this.isDragging) {\n                    return;\n                }\n                var relevantEvents = _this.relevantEvents;\n                var initialHit = _this.hitDragging.initialHit;\n                var initialCalendar = _this.component.calendar;\n                // states based on new hit\n                var receivingCalendar = null;\n                var mutation = null;\n                var mutatedRelevantEvents = null;\n                var isInvalid = false;\n                var interaction = {\n                    affectedEvents: relevantEvents,\n                    mutatedEvents: core.createEmptyEventStore(),\n                    isEvent: true,\n                    origSeg: _this.subjectSeg\n                };\n                if (hit) {\n                    var receivingComponent = hit.component;\n                    receivingCalendar = receivingComponent.calendar;\n                    if (initialCalendar === receivingCalendar ||\n                        receivingComponent.opt('editable') && receivingComponent.opt('droppable')) {\n                        mutation = computeEventMutation(initialHit, hit, receivingCalendar.pluginSystem.hooks.eventDragMutationMassagers);\n                        if (mutation) {\n                            mutatedRelevantEvents = core.applyMutationToEventStore(relevantEvents, receivingCalendar.eventUiBases, mutation, receivingCalendar);\n                            interaction.mutatedEvents = mutatedRelevantEvents;\n                            if (!receivingComponent.isInteractionValid(interaction)) {\n                                isInvalid = true;\n                                mutation = null;\n                                mutatedRelevantEvents = null;\n                                interaction.mutatedEvents = core.createEmptyEventStore();\n                            }\n                        }\n                    }\n                    else {\n                        receivingCalendar = null;\n                    }\n                }\n                _this.displayDrag(receivingCalendar, interaction);\n                if (!isInvalid) {\n                    core.enableCursor();\n                }\n                else {\n                    core.disableCursor();\n                }\n                if (!isFinal) {\n                    if (initialCalendar === receivingCalendar && // TODO: write test for this\n                        isHitsEqual(initialHit, hit)) {\n                        mutation = null;\n                    }\n                    _this.dragging.setMirrorNeedsRevert(!mutation);\n                    // render the mirror if no already-rendered mirror\n                    // TODO: wish we could somehow wait for dispatch to guarantee render\n                    _this.dragging.setMirrorIsVisible(!hit || !document.querySelector('.fc-mirror'));\n                    // assign states based on new hit\n                    _this.receivingCalendar = receivingCalendar;\n                    _this.validMutation = mutation;\n                    _this.mutatedRelevantEvents = mutatedRelevantEvents;\n                }\n            };\n            _this.handlePointerUp = function () {\n                if (!_this.isDragging) {\n                    _this.cleanup(); // because handleDragEnd won't fire\n                }\n            };\n            _this.handleDragEnd = function (ev) {\n                if (_this.isDragging) {\n                    var initialCalendar_1 = _this.component.calendar;\n                    var initialView = _this.component.view;\n                    var receivingCalendar = _this.receivingCalendar;\n                    var eventDef = _this.eventRange.def;\n                    var eventInstance = _this.eventRange.instance;\n                    var eventApi = new core.EventApi(initialCalendar_1, eventDef, eventInstance);\n                    var relevantEvents_1 = _this.relevantEvents;\n                    var mutatedRelevantEvents = _this.mutatedRelevantEvents;\n                    var finalHit = _this.hitDragging.finalHit;\n                    _this.clearDrag(); // must happen after revert animation\n                    initialCalendar_1.publiclyTrigger('eventDragStop', [\n                        {\n                            el: _this.subjectSeg.el,\n                            event: eventApi,\n                            jsEvent: ev.origEvent,\n                            view: initialView\n                        }\n                    ]);\n                    if (_this.validMutation) {\n                        // dropped within same calendar\n                        if (receivingCalendar === initialCalendar_1) {\n                            initialCalendar_1.dispatch({\n                                type: 'MERGE_EVENTS',\n                                eventStore: mutatedRelevantEvents\n                            });\n                            var eventDropArg = {};\n                            for (var _i = 0, _a = initialCalendar_1.pluginSystem.hooks.eventDropTransformers; _i < _a.length; _i++) {\n                                var transformer = _a[_i];\n                                __assign(eventDropArg, transformer(_this.validMutation, initialCalendar_1));\n                            }\n                            __assign(eventDropArg, {\n                                el: ev.subjectEl,\n                                delta: _this.validMutation.startDelta,\n                                oldEvent: eventApi,\n                                event: new core.EventApi(// the data AFTER the mutation\n                                initialCalendar_1, mutatedRelevantEvents.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents.instances[eventInstance.instanceId] : null),\n                                revert: function () {\n                                    initialCalendar_1.dispatch({\n                                        type: 'MERGE_EVENTS',\n                                        eventStore: relevantEvents_1\n                                    });\n                                },\n                                jsEvent: ev.origEvent,\n                                view: initialView\n                            });\n                            initialCalendar_1.publiclyTrigger('eventDrop', [eventDropArg]);\n                            // dropped in different calendar\n                        }\n                        else if (receivingCalendar) {\n                            initialCalendar_1.publiclyTrigger('eventLeave', [\n                                {\n                                    draggedEl: ev.subjectEl,\n                                    event: eventApi,\n                                    view: initialView\n                                }\n                            ]);\n                            initialCalendar_1.dispatch({\n                                type: 'REMOVE_EVENT_INSTANCES',\n                                instances: _this.mutatedRelevantEvents.instances\n                            });\n                            receivingCalendar.dispatch({\n                                type: 'MERGE_EVENTS',\n                                eventStore: _this.mutatedRelevantEvents\n                            });\n                            if (ev.isTouch) {\n                                receivingCalendar.dispatch({\n                                    type: 'SELECT_EVENT',\n                                    eventInstanceId: eventInstance.instanceId\n                                });\n                            }\n                            var dropArg = receivingCalendar.buildDatePointApi(finalHit.dateSpan);\n                            dropArg.draggedEl = ev.subjectEl;\n                            dropArg.jsEvent = ev.origEvent;\n                            dropArg.view = finalHit.component; // ?\n                            receivingCalendar.publiclyTrigger('drop', [dropArg]);\n                            receivingCalendar.publiclyTrigger('eventReceive', [\n                                {\n                                    draggedEl: ev.subjectEl,\n                                    event: new core.EventApi(// the data AFTER the mutation\n                                    receivingCalendar, mutatedRelevantEvents.defs[eventDef.defId], mutatedRelevantEvents.instances[eventInstance.instanceId]),\n                                    view: finalHit.component\n                                }\n                            ]);\n                        }\n                    }\n                    else {\n                        initialCalendar_1.publiclyTrigger('_noEventDrop');\n                    }\n                }\n                _this.cleanup();\n            };\n            var component = _this.component;\n            var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n            dragging.pointer.selector = EventDragging.SELECTOR;\n            dragging.touchScrollAllowed = false;\n            dragging.autoScroller.isEnabled = component.opt('dragScroll');\n            var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, core.interactionSettingsStore);\n            hitDragging.useSubjectCenter = settings.useEventCenter;\n            hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n            hitDragging.emitter.on('dragstart', _this.handleDragStart);\n            hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n            hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n            hitDragging.emitter.on('dragend', _this.handleDragEnd);\n            return _this;\n        }\n        EventDragging.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        // render a drag state on the next receivingCalendar\n        EventDragging.prototype.displayDrag = function (nextCalendar, state) {\n            var initialCalendar = this.component.calendar;\n            var prevCalendar = this.receivingCalendar;\n            // does the previous calendar need to be cleared?\n            if (prevCalendar && prevCalendar !== nextCalendar) {\n                // does the initial calendar need to be cleared?\n                // if so, don't clear all the way. we still need to to hide the affectedEvents\n                if (prevCalendar === initialCalendar) {\n                    prevCalendar.dispatch({\n                        type: 'SET_EVENT_DRAG',\n                        state: {\n                            affectedEvents: state.affectedEvents,\n                            mutatedEvents: core.createEmptyEventStore(),\n                            isEvent: true,\n                            origSeg: state.origSeg\n                        }\n                    });\n                    // completely clear the old calendar if it wasn't the initial\n                }\n                else {\n                    prevCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n                }\n            }\n            if (nextCalendar) {\n                nextCalendar.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n            }\n        };\n        EventDragging.prototype.clearDrag = function () {\n            var initialCalendar = this.component.calendar;\n            var receivingCalendar = this.receivingCalendar;\n            if (receivingCalendar) {\n                receivingCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n            // the initial calendar might have an dummy drag state from displayDrag\n            if (initialCalendar !== receivingCalendar) {\n                initialCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n        };\n        EventDragging.prototype.cleanup = function () {\n            this.subjectSeg = null;\n            this.isDragging = false;\n            this.eventRange = null;\n            this.relevantEvents = null;\n            this.receivingCalendar = null;\n            this.validMutation = null;\n            this.mutatedRelevantEvents = null;\n        };\n        EventDragging.SELECTOR = '.fc-draggable, .fc-resizable'; // TODO: test this in IE11\n        return EventDragging;\n    }(core.Interaction));\n    function computeEventMutation(hit0, hit1, massagers) {\n        var dateSpan0 = hit0.dateSpan;\n        var dateSpan1 = hit1.dateSpan;\n        var date0 = dateSpan0.range.start;\n        var date1 = dateSpan1.range.start;\n        var standardProps = {};\n        if (dateSpan0.allDay !== dateSpan1.allDay) {\n            standardProps.allDay = dateSpan1.allDay;\n            standardProps.hasEnd = hit1.component.opt('allDayMaintainDuration');\n            if (dateSpan1.allDay) {\n                // means date1 is already start-of-day,\n                // but date0 needs to be converted\n                date0 = core.startOfDay(date0);\n            }\n        }\n        var delta = core.diffDates(date0, date1, hit0.component.dateEnv, hit0.component === hit1.component ?\n            hit0.component.largeUnit :\n            null);\n        if (delta.milliseconds) { // has hours/minutes/seconds\n            standardProps.allDay = false;\n        }\n        var mutation = {\n            startDelta: delta,\n            endDelta: delta,\n            standardProps: standardProps\n        };\n        for (var _i = 0, massagers_1 = massagers; _i < massagers_1.length; _i++) {\n            var massager = massagers_1[_i];\n            massager(mutation, hit0, hit1);\n        }\n        return mutation;\n    }\n    function getComponentTouchDelay$1(component) {\n        var delay = component.opt('eventLongPressDelay');\n        if (delay == null) {\n            delay = component.opt('longPressDelay');\n        }\n        return delay;\n    }\n\n    var EventDragging$1 = /** @class */ (function (_super) {\n        __extends(EventDragging, _super);\n        function EventDragging(settings) {\n            var _this = _super.call(this, settings) || this;\n            // internal state\n            _this.draggingSeg = null; // TODO: rename to resizingSeg? subjectSeg?\n            _this.eventRange = null;\n            _this.relevantEvents = null;\n            _this.validMutation = null;\n            _this.mutatedRelevantEvents = null;\n            _this.handlePointerDown = function (ev) {\n                var component = _this.component;\n                var seg = _this.querySeg(ev);\n                var eventRange = _this.eventRange = seg.eventRange;\n                _this.dragging.minDistance = component.opt('eventDragMinDistance');\n                // if touch, need to be working with a selected event\n                _this.dragging.setIgnoreMove(!_this.component.isValidSegDownEl(ev.origEvent.target) ||\n                    (ev.isTouch && _this.component.props.eventSelection !== eventRange.instance.instanceId));\n            };\n            _this.handleDragStart = function (ev) {\n                var calendar = _this.component.calendar;\n                var eventRange = _this.eventRange;\n                _this.relevantEvents = core.getRelevantEvents(calendar.state.eventStore, _this.eventRange.instance.instanceId);\n                _this.draggingSeg = _this.querySeg(ev);\n                calendar.unselect();\n                calendar.publiclyTrigger('eventResizeStart', [\n                    {\n                        el: _this.draggingSeg.el,\n                        event: new core.EventApi(calendar, eventRange.def, eventRange.instance),\n                        jsEvent: ev.origEvent,\n                        view: _this.component.view\n                    }\n                ]);\n            };\n            _this.handleHitUpdate = function (hit, isFinal, ev) {\n                var calendar = _this.component.calendar;\n                var relevantEvents = _this.relevantEvents;\n                var initialHit = _this.hitDragging.initialHit;\n                var eventInstance = _this.eventRange.instance;\n                var mutation = null;\n                var mutatedRelevantEvents = null;\n                var isInvalid = false;\n                var interaction = {\n                    affectedEvents: relevantEvents,\n                    mutatedEvents: core.createEmptyEventStore(),\n                    isEvent: true,\n                    origSeg: _this.draggingSeg\n                };\n                if (hit) {\n                    mutation = computeMutation(initialHit, hit, ev.subjectEl.classList.contains('fc-start-resizer'), eventInstance.range, calendar.pluginSystem.hooks.eventResizeJoinTransforms);\n                }\n                if (mutation) {\n                    mutatedRelevantEvents = core.applyMutationToEventStore(relevantEvents, calendar.eventUiBases, mutation, calendar);\n                    interaction.mutatedEvents = mutatedRelevantEvents;\n                    if (!_this.component.isInteractionValid(interaction)) {\n                        isInvalid = true;\n                        mutation = null;\n                        mutatedRelevantEvents = null;\n                        interaction.mutatedEvents = null;\n                    }\n                }\n                if (mutatedRelevantEvents) {\n                    calendar.dispatch({\n                        type: 'SET_EVENT_RESIZE',\n                        state: interaction\n                    });\n                }\n                else {\n                    calendar.dispatch({ type: 'UNSET_EVENT_RESIZE' });\n                }\n                if (!isInvalid) {\n                    core.enableCursor();\n                }\n                else {\n                    core.disableCursor();\n                }\n                if (!isFinal) {\n                    if (mutation && isHitsEqual(initialHit, hit)) {\n                        mutation = null;\n                    }\n                    _this.validMutation = mutation;\n                    _this.mutatedRelevantEvents = mutatedRelevantEvents;\n                }\n            };\n            _this.handleDragEnd = function (ev) {\n                var calendar = _this.component.calendar;\n                var view = _this.component.view;\n                var eventDef = _this.eventRange.def;\n                var eventInstance = _this.eventRange.instance;\n                var eventApi = new core.EventApi(calendar, eventDef, eventInstance);\n                var relevantEvents = _this.relevantEvents;\n                var mutatedRelevantEvents = _this.mutatedRelevantEvents;\n                calendar.publiclyTrigger('eventResizeStop', [\n                    {\n                        el: _this.draggingSeg.el,\n                        event: eventApi,\n                        jsEvent: ev.origEvent,\n                        view: view\n                    }\n                ]);\n                if (_this.validMutation) {\n                    calendar.dispatch({\n                        type: 'MERGE_EVENTS',\n                        eventStore: mutatedRelevantEvents\n                    });\n                    calendar.publiclyTrigger('eventResize', [\n                        {\n                            el: _this.draggingSeg.el,\n                            startDelta: _this.validMutation.startDelta || core.createDuration(0),\n                            endDelta: _this.validMutation.endDelta || core.createDuration(0),\n                            prevEvent: eventApi,\n                            event: new core.EventApi(// the data AFTER the mutation\n                            calendar, mutatedRelevantEvents.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents.instances[eventInstance.instanceId] : null),\n                            revert: function () {\n                                calendar.dispatch({\n                                    type: 'MERGE_EVENTS',\n                                    eventStore: relevantEvents\n                                });\n                            },\n                            jsEvent: ev.origEvent,\n                            view: view\n                        }\n                    ]);\n                }\n                else {\n                    calendar.publiclyTrigger('_noEventResize');\n                }\n                // reset all internal state\n                _this.draggingSeg = null;\n                _this.relevantEvents = null;\n                _this.validMutation = null;\n                // okay to keep eventInstance around. useful to set it in handlePointerDown\n            };\n            var component = settings.component;\n            var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n            dragging.pointer.selector = '.fc-resizer';\n            dragging.touchScrollAllowed = false;\n            dragging.autoScroller.isEnabled = component.opt('dragScroll');\n            var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, core.interactionSettingsToStore(settings));\n            hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n            hitDragging.emitter.on('dragstart', _this.handleDragStart);\n            hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n            hitDragging.emitter.on('dragend', _this.handleDragEnd);\n            return _this;\n        }\n        EventDragging.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        EventDragging.prototype.querySeg = function (ev) {\n            return core.getElSeg(core.elementClosest(ev.subjectEl, this.component.fgSegSelector));\n        };\n        return EventDragging;\n    }(core.Interaction));\n    function computeMutation(hit0, hit1, isFromStart, instanceRange, transforms) {\n        var dateEnv = hit0.component.dateEnv;\n        var date0 = hit0.dateSpan.range.start;\n        var date1 = hit1.dateSpan.range.start;\n        var delta = core.diffDates(date0, date1, dateEnv, hit0.component.largeUnit);\n        var props = {};\n        for (var _i = 0, transforms_1 = transforms; _i < transforms_1.length; _i++) {\n            var transform = transforms_1[_i];\n            var res = transform(hit0, hit1);\n            if (res === false) {\n                return null;\n            }\n            else if (res) {\n                __assign(props, res);\n            }\n        }\n        if (isFromStart) {\n            if (dateEnv.add(instanceRange.start, delta) < instanceRange.end) {\n                props.startDelta = delta;\n                return props;\n            }\n        }\n        else {\n            if (dateEnv.add(instanceRange.end, delta) > instanceRange.start) {\n                props.endDelta = delta;\n                return props;\n            }\n        }\n        return null;\n    }\n\n    var UnselectAuto = /** @class */ (function () {\n        function UnselectAuto(calendar) {\n            var _this = this;\n            this.isRecentPointerDateSelect = false; // wish we could use a selector to detect date selection, but uses hit system\n            this.onSelect = function (selectInfo) {\n                if (selectInfo.jsEvent) {\n                    _this.isRecentPointerDateSelect = true;\n                }\n            };\n            this.onDocumentPointerUp = function (pev) {\n                var _a = _this, calendar = _a.calendar, documentPointer = _a.documentPointer;\n                var state = calendar.state;\n                // touch-scrolling should never unfocus any type of selection\n                if (!documentPointer.wasTouchScroll) {\n                    if (state.dateSelection && // an existing date selection?\n                        !_this.isRecentPointerDateSelect // a new pointer-initiated date selection since last onDocumentPointerUp?\n                    ) {\n                        var unselectAuto = calendar.viewOpt('unselectAuto');\n                        var unselectCancel = calendar.viewOpt('unselectCancel');\n                        if (unselectAuto && (!unselectAuto || !core.elementClosest(documentPointer.downEl, unselectCancel))) {\n                            calendar.unselect(pev);\n                        }\n                    }\n                    if (state.eventSelection && // an existing event selected?\n                        !core.elementClosest(documentPointer.downEl, EventDragging.SELECTOR) // interaction DIDN'T start on an event\n                    ) {\n                        calendar.dispatch({ type: 'UNSELECT_EVENT' });\n                    }\n                }\n                _this.isRecentPointerDateSelect = false;\n            };\n            this.calendar = calendar;\n            var documentPointer = this.documentPointer = new PointerDragging(document);\n            documentPointer.shouldIgnoreMove = true;\n            documentPointer.shouldWatchScroll = false;\n            documentPointer.emitter.on('pointerup', this.onDocumentPointerUp);\n            /*\n            TODO: better way to know about whether there was a selection with the pointer\n            */\n            calendar.on('select', this.onSelect);\n        }\n        UnselectAuto.prototype.destroy = function () {\n            this.calendar.off('select', this.onSelect);\n            this.documentPointer.destroy();\n        };\n        return UnselectAuto;\n    }());\n\n    /*\n    Given an already instantiated draggable object for one-or-more elements,\n    Interprets any dragging as an attempt to drag an events that lives outside\n    of a calendar onto a calendar.\n    */\n    var ExternalElementDragging = /** @class */ (function () {\n        function ExternalElementDragging(dragging, suppliedDragMeta) {\n            var _this = this;\n            this.receivingCalendar = null;\n            this.droppableEvent = null; // will exist for all drags, even if create:false\n            this.suppliedDragMeta = null;\n            this.dragMeta = null;\n            this.handleDragStart = function (ev) {\n                _this.dragMeta = _this.buildDragMeta(ev.subjectEl);\n            };\n            this.handleHitUpdate = function (hit, isFinal, ev) {\n                var dragging = _this.hitDragging.dragging;\n                var receivingCalendar = null;\n                var droppableEvent = null;\n                var isInvalid = false;\n                var interaction = {\n                    affectedEvents: core.createEmptyEventStore(),\n                    mutatedEvents: core.createEmptyEventStore(),\n                    isEvent: _this.dragMeta.create,\n                    origSeg: null\n                };\n                if (hit) {\n                    receivingCalendar = hit.component.calendar;\n                    if (_this.canDropElOnCalendar(ev.subjectEl, receivingCalendar)) {\n                        droppableEvent = computeEventForDateSpan(hit.dateSpan, _this.dragMeta, receivingCalendar);\n                        interaction.mutatedEvents = core.eventTupleToStore(droppableEvent);\n                        isInvalid = !core.isInteractionValid(interaction, receivingCalendar);\n                        if (isInvalid) {\n                            interaction.mutatedEvents = core.createEmptyEventStore();\n                            droppableEvent = null;\n                        }\n                    }\n                }\n                _this.displayDrag(receivingCalendar, interaction);\n                // show mirror if no already-rendered mirror element OR if we are shutting down the mirror (?)\n                // TODO: wish we could somehow wait for dispatch to guarantee render\n                dragging.setMirrorIsVisible(isFinal || !droppableEvent || !document.querySelector('.fc-mirror'));\n                if (!isInvalid) {\n                    core.enableCursor();\n                }\n                else {\n                    core.disableCursor();\n                }\n                if (!isFinal) {\n                    dragging.setMirrorNeedsRevert(!droppableEvent);\n                    _this.receivingCalendar = receivingCalendar;\n                    _this.droppableEvent = droppableEvent;\n                }\n            };\n            this.handleDragEnd = function (pev) {\n                var _a = _this, receivingCalendar = _a.receivingCalendar, droppableEvent = _a.droppableEvent;\n                _this.clearDrag();\n                if (receivingCalendar && droppableEvent) {\n                    var finalHit = _this.hitDragging.finalHit;\n                    var finalView = finalHit.component.view;\n                    var dragMeta = _this.dragMeta;\n                    var arg = receivingCalendar.buildDatePointApi(finalHit.dateSpan);\n                    arg.draggedEl = pev.subjectEl;\n                    arg.jsEvent = pev.origEvent;\n                    arg.view = finalView;\n                    receivingCalendar.publiclyTrigger('drop', [arg]);\n                    if (dragMeta.create) {\n                        receivingCalendar.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: core.eventTupleToStore(droppableEvent)\n                        });\n                        if (pev.isTouch) {\n                            receivingCalendar.dispatch({\n                                type: 'SELECT_EVENT',\n                                eventInstanceId: droppableEvent.instance.instanceId\n                            });\n                        }\n                        // signal that an external event landed\n                        receivingCalendar.publiclyTrigger('eventReceive', [\n                            {\n                                draggedEl: pev.subjectEl,\n                                event: new core.EventApi(receivingCalendar, droppableEvent.def, droppableEvent.instance),\n                                view: finalView\n                            }\n                        ]);\n                    }\n                }\n                _this.receivingCalendar = null;\n                _this.droppableEvent = null;\n            };\n            var hitDragging = this.hitDragging = new HitDragging(dragging, core.interactionSettingsStore);\n            hitDragging.requireInitial = false; // will start outside of a component\n            hitDragging.emitter.on('dragstart', this.handleDragStart);\n            hitDragging.emitter.on('hitupdate', this.handleHitUpdate);\n            hitDragging.emitter.on('dragend', this.handleDragEnd);\n            this.suppliedDragMeta = suppliedDragMeta;\n        }\n        ExternalElementDragging.prototype.buildDragMeta = function (subjectEl) {\n            if (typeof this.suppliedDragMeta === 'object') {\n                return core.parseDragMeta(this.suppliedDragMeta);\n            }\n            else if (typeof this.suppliedDragMeta === 'function') {\n                return core.parseDragMeta(this.suppliedDragMeta(subjectEl));\n            }\n            else {\n                return getDragMetaFromEl(subjectEl);\n            }\n        };\n        ExternalElementDragging.prototype.displayDrag = function (nextCalendar, state) {\n            var prevCalendar = this.receivingCalendar;\n            if (prevCalendar && prevCalendar !== nextCalendar) {\n                prevCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n            if (nextCalendar) {\n                nextCalendar.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n            }\n        };\n        ExternalElementDragging.prototype.clearDrag = function () {\n            if (this.receivingCalendar) {\n                this.receivingCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n        };\n        ExternalElementDragging.prototype.canDropElOnCalendar = function (el, receivingCalendar) {\n            var dropAccept = receivingCalendar.opt('dropAccept');\n            if (typeof dropAccept === 'function') {\n                return dropAccept(el);\n            }\n            else if (typeof dropAccept === 'string' && dropAccept) {\n                return Boolean(core.elementMatches(el, dropAccept));\n            }\n            return true;\n        };\n        return ExternalElementDragging;\n    }());\n    // Utils for computing event store from the DragMeta\n    // ----------------------------------------------------------------------------------------------------\n    function computeEventForDateSpan(dateSpan, dragMeta, calendar) {\n        var defProps = __assign({}, dragMeta.leftoverProps);\n        for (var _i = 0, _a = calendar.pluginSystem.hooks.externalDefTransforms; _i < _a.length; _i++) {\n            var transform = _a[_i];\n            __assign(defProps, transform(dateSpan, dragMeta));\n        }\n        var def = core.parseEventDef(defProps, dragMeta.sourceId, dateSpan.allDay, calendar.opt('forceEventDuration') || Boolean(dragMeta.duration), // hasEnd\n        calendar);\n        var start = dateSpan.range.start;\n        // only rely on time info if drop zone is all-day,\n        // otherwise, we already know the time\n        if (dateSpan.allDay && dragMeta.startTime) {\n            start = calendar.dateEnv.add(start, dragMeta.startTime);\n        }\n        var end = dragMeta.duration ?\n            calendar.dateEnv.add(start, dragMeta.duration) :\n            calendar.getDefaultEventEnd(dateSpan.allDay, start);\n        var instance = core.createEventInstance(def.defId, { start: start, end: end });\n        return { def: def, instance: instance };\n    }\n    // Utils for extracting data from element\n    // ----------------------------------------------------------------------------------------------------\n    function getDragMetaFromEl(el) {\n        var str = getEmbeddedElData(el, 'event');\n        var obj = str ?\n            JSON.parse(str) :\n            { create: false }; // if no embedded data, assume no event creation\n        return core.parseDragMeta(obj);\n    }\n    core.config.dataAttrPrefix = '';\n    function getEmbeddedElData(el, name) {\n        var prefix = core.config.dataAttrPrefix;\n        var prefixedName = (prefix ? prefix + '-' : '') + name;\n        return el.getAttribute('data-' + prefixedName) || '';\n    }\n\n    /*\n    Makes an element (that is *external* to any calendar) draggable.\n    Can pass in data that determines how an event will be created when dropped onto a calendar.\n    Leverages FullCalendar's internal drag-n-drop functionality WITHOUT a third-party drag system.\n    */\n    var ExternalDraggable = /** @class */ (function () {\n        function ExternalDraggable(el, settings) {\n            var _this = this;\n            if (settings === void 0) { settings = {}; }\n            this.handlePointerDown = function (ev) {\n                var dragging = _this.dragging;\n                var _a = _this.settings, minDistance = _a.minDistance, longPressDelay = _a.longPressDelay;\n                dragging.minDistance =\n                    minDistance != null ?\n                        minDistance :\n                        (ev.isTouch ? 0 : core.globalDefaults.eventDragMinDistance);\n                dragging.delay =\n                    ev.isTouch ? // TODO: eventually read eventLongPressDelay instead vvv\n                        (longPressDelay != null ? longPressDelay : core.globalDefaults.longPressDelay) :\n                        0;\n            };\n            this.handleDragStart = function (ev) {\n                if (ev.isTouch &&\n                    _this.dragging.delay &&\n                    ev.subjectEl.classList.contains('fc-event')) {\n                    _this.dragging.mirror.getMirrorEl().classList.add('fc-selected');\n                }\n            };\n            this.settings = settings;\n            var dragging = this.dragging = new FeaturefulElementDragging(el);\n            dragging.touchScrollAllowed = false;\n            if (settings.itemSelector != null) {\n                dragging.pointer.selector = settings.itemSelector;\n            }\n            if (settings.appendTo != null) {\n                dragging.mirror.parentNode = settings.appendTo; // TODO: write tests\n            }\n            dragging.emitter.on('pointerdown', this.handlePointerDown);\n            dragging.emitter.on('dragstart', this.handleDragStart);\n            new ExternalElementDragging(dragging, settings.eventData);\n        }\n        ExternalDraggable.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        return ExternalDraggable;\n    }());\n\n    /*\n    Detects when a *THIRD-PARTY* drag-n-drop system interacts with elements.\n    The third-party system is responsible for drawing the visuals effects of the drag.\n    This class simply monitors for pointer movements and fires events.\n    It also has the ability to hide the moving element (the \"mirror\") during the drag.\n    */\n    var InferredElementDragging = /** @class */ (function (_super) {\n        __extends(InferredElementDragging, _super);\n        function InferredElementDragging(containerEl) {\n            var _this = _super.call(this, containerEl) || this;\n            _this.shouldIgnoreMove = false;\n            _this.mirrorSelector = '';\n            _this.currentMirrorEl = null;\n            _this.handlePointerDown = function (ev) {\n                _this.emitter.trigger('pointerdown', ev);\n                if (!_this.shouldIgnoreMove) {\n                    // fire dragstart right away. does not support delay or min-distance\n                    _this.emitter.trigger('dragstart', ev);\n                }\n            };\n            _this.handlePointerMove = function (ev) {\n                if (!_this.shouldIgnoreMove) {\n                    _this.emitter.trigger('dragmove', ev);\n                }\n            };\n            _this.handlePointerUp = function (ev) {\n                _this.emitter.trigger('pointerup', ev);\n                if (!_this.shouldIgnoreMove) {\n                    // fire dragend right away. does not support a revert animation\n                    _this.emitter.trigger('dragend', ev);\n                }\n            };\n            var pointer = _this.pointer = new PointerDragging(containerEl);\n            pointer.emitter.on('pointerdown', _this.handlePointerDown);\n            pointer.emitter.on('pointermove', _this.handlePointerMove);\n            pointer.emitter.on('pointerup', _this.handlePointerUp);\n            return _this;\n        }\n        InferredElementDragging.prototype.destroy = function () {\n            this.pointer.destroy();\n        };\n        InferredElementDragging.prototype.setIgnoreMove = function (bool) {\n            this.shouldIgnoreMove = bool;\n        };\n        InferredElementDragging.prototype.setMirrorIsVisible = function (bool) {\n            if (bool) {\n                // restore a previously hidden element.\n                // use the reference in case the selector class has already been removed.\n                if (this.currentMirrorEl) {\n                    this.currentMirrorEl.style.visibility = '';\n                    this.currentMirrorEl = null;\n                }\n            }\n            else {\n                var mirrorEl = this.mirrorSelector ?\n                    document.querySelector(this.mirrorSelector) :\n                    null;\n                if (mirrorEl) {\n                    this.currentMirrorEl = mirrorEl;\n                    mirrorEl.style.visibility = 'hidden';\n                }\n            }\n        };\n        return InferredElementDragging;\n    }(core.ElementDragging));\n\n    /*\n    Bridges third-party drag-n-drop systems with FullCalendar.\n    Must be instantiated and destroyed by caller.\n    */\n    var ThirdPartyDraggable = /** @class */ (function () {\n        function ThirdPartyDraggable(containerOrSettings, settings) {\n            var containerEl = document;\n            if (\n            // wish we could just test instanceof EventTarget, but doesn't work in IE11\n            containerOrSettings === document ||\n                containerOrSettings instanceof Element) {\n                containerEl = containerOrSettings;\n                settings = settings || {};\n            }\n            else {\n                settings = (containerOrSettings || {});\n            }\n            var dragging = this.dragging = new InferredElementDragging(containerEl);\n            if (typeof settings.itemSelector === 'string') {\n                dragging.pointer.selector = settings.itemSelector;\n            }\n            else if (containerEl === document) {\n                dragging.pointer.selector = '[data-event]';\n            }\n            if (typeof settings.mirrorSelector === 'string') {\n                dragging.mirrorSelector = settings.mirrorSelector;\n            }\n            new ExternalElementDragging(dragging, settings.eventData);\n        }\n        ThirdPartyDraggable.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        return ThirdPartyDraggable;\n    }());\n\n    var main = core.createPlugin({\n        componentInteractions: [DateClicking, DateSelecting, EventDragging, EventDragging$1],\n        calendarInteractions: [UnselectAuto],\n        elementDraggingImpl: FeaturefulElementDragging\n    });\n\n    exports.Draggable = ExternalDraggable;\n    exports.FeaturefulElementDragging = FeaturefulElementDragging;\n    exports.PointerDragging = PointerDragging;\n    exports.ThirdPartyDraggable = ThirdPartyDraggable;\n    exports.default = main;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","/*!\nFullCalendar Time Grid Plugin v4.1.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@fullcalendar/core'), require('@fullcalendar/daygrid')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@fullcalendar/core', '@fullcalendar/daygrid'], factory) :\n    (global = global || self, factory(global.FullCalendarTimeGrid = {}, global.FullCalendar, global.FullCalendarDayGrid));\n}(this, function (exports, core, daygrid) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    /*\n    Only handles foreground segs.\n    Does not own rendering. Use for low-level util methods by TimeGrid.\n    */\n    var TimeGridEventRenderer = /** @class */ (function (_super) {\n        __extends(TimeGridEventRenderer, _super);\n        function TimeGridEventRenderer(timeGrid) {\n            var _this = _super.call(this, timeGrid.context) || this;\n            _this.timeGrid = timeGrid;\n            _this.fullTimeFormat = core.createFormatter({\n                hour: 'numeric',\n                minute: '2-digit',\n                separator: _this.context.options.defaultRangeSeparator\n            });\n            return _this;\n        }\n        // Given an array of foreground segments, render a DOM element for each, computes position,\n        // and attaches to the column inner-container elements.\n        TimeGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n            var segsByCol = this.timeGrid.groupSegsByCol(segs);\n            // order the segs within each column\n            // TODO: have groupSegsByCol do this?\n            for (var col = 0; col < segsByCol.length; col++) {\n                segsByCol[col] = this.sortEventSegs(segsByCol[col]);\n            }\n            this.segsByCol = segsByCol;\n            this.timeGrid.attachSegsByCol(segsByCol, this.timeGrid.fgContainerEls);\n        };\n        TimeGridEventRenderer.prototype.detachSegs = function (segs) {\n            segs.forEach(function (seg) {\n                core.removeElement(seg.el);\n            });\n            this.segsByCol = null;\n        };\n        TimeGridEventRenderer.prototype.computeSegSizes = function (allSegs) {\n            var _a = this, timeGrid = _a.timeGrid, segsByCol = _a.segsByCol;\n            var colCnt = timeGrid.colCnt;\n            timeGrid.computeSegVerticals(allSegs); // horizontals relies on this\n            if (segsByCol) {\n                for (var col = 0; col < colCnt; col++) {\n                    this.computeSegHorizontals(segsByCol[col]); // compute horizontal coordinates, z-index's, and reorder the array\n                }\n            }\n        };\n        TimeGridEventRenderer.prototype.assignSegSizes = function (allSegs) {\n            var _a = this, timeGrid = _a.timeGrid, segsByCol = _a.segsByCol;\n            var colCnt = timeGrid.colCnt;\n            timeGrid.assignSegVerticals(allSegs); // horizontals relies on this\n            if (segsByCol) {\n                for (var col = 0; col < colCnt; col++) {\n                    this.assignSegCss(segsByCol[col]);\n                }\n            }\n        };\n        // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n        TimeGridEventRenderer.prototype.computeEventTimeFormat = function () {\n            return {\n                hour: 'numeric',\n                minute: '2-digit',\n                meridiem: false\n            };\n        };\n        // Computes a default `displayEventEnd` value if one is not expliclty defined\n        TimeGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n            return true;\n        };\n        // Renders the HTML for a single event segment's default rendering\n        TimeGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n            var eventRange = seg.eventRange;\n            var eventDef = eventRange.def;\n            var eventUi = eventRange.ui;\n            var allDay = eventDef.allDay;\n            var isDraggable = eventUi.startEditable;\n            var isResizableFromStart = seg.isStart && eventUi.durationEditable && this.context.options.eventResizableFromStart;\n            var isResizableFromEnd = seg.isEnd && eventUi.durationEditable;\n            var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n            var skinCss = core.cssToStr(this.getSkinCss(eventUi));\n            var timeText;\n            var fullTimeText; // more verbose time text. for the print stylesheet\n            var startTimeText; // just the start time text\n            classes.unshift('fc-time-grid-event');\n            // if the event appears to span more than one day...\n            if (core.isMultiDayRange(eventRange.range)) {\n                // Don't display time text on segments that run entirely through a day.\n                // That would appear as midnight-midnight and would look dumb.\n                // Otherwise, display the time text for the *segment's* times (like 6pm-midnight or midnight-10am)\n                if (seg.isStart || seg.isEnd) {\n                    var unzonedStart = seg.start;\n                    var unzonedEnd = seg.end;\n                    timeText = this._getTimeText(unzonedStart, unzonedEnd, allDay); // TODO: give the timezones\n                    fullTimeText = this._getTimeText(unzonedStart, unzonedEnd, allDay, this.fullTimeFormat);\n                    startTimeText = this._getTimeText(unzonedStart, unzonedEnd, allDay, null, false); // displayEnd=false\n                }\n            }\n            else {\n                // Display the normal time text for the *event's* times\n                timeText = this.getTimeText(eventRange);\n                fullTimeText = this.getTimeText(eventRange, this.fullTimeFormat);\n                startTimeText = this.getTimeText(eventRange, null, false); // displayEnd=false\n            }\n            return '<a class=\"' + classes.join(' ') + '\"' +\n                (eventDef.url ?\n                    ' href=\"' + core.htmlEscape(eventDef.url) + '\"' :\n                    '') +\n                (skinCss ?\n                    ' style=\"' + skinCss + '\"' :\n                    '') +\n                '>' +\n                '<div class=\"fc-content\">' +\n                (timeText ?\n                    '<div class=\"fc-time\"' +\n                        ' data-start=\"' + core.htmlEscape(startTimeText) + '\"' +\n                        ' data-full=\"' + core.htmlEscape(fullTimeText) + '\"' +\n                        '>' +\n                        '<span>' + core.htmlEscape(timeText) + '</span>' +\n                        '</div>' :\n                    '') +\n                (eventDef.title ?\n                    '<div class=\"fc-title\">' +\n                        core.htmlEscape(eventDef.title) +\n                        '</div>' :\n                    '') +\n                '</div>' +\n                /* TODO: write CSS for this\n                (isResizableFromStart ?\n                  '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                  ''\n                  ) +\n                */\n                (isResizableFromEnd ?\n                    '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                    '') +\n                '</a>';\n        };\n        // Given an array of segments that are all in the same column, sets the backwardCoord and forwardCoord on each.\n        // Assumed the segs are already ordered.\n        // NOTE: Also reorders the given array by date!\n        TimeGridEventRenderer.prototype.computeSegHorizontals = function (segs) {\n            var levels;\n            var level0;\n            var i;\n            levels = buildSlotSegLevels(segs);\n            computeForwardSlotSegs(levels);\n            if ((level0 = levels[0])) {\n                for (i = 0; i < level0.length; i++) {\n                    computeSlotSegPressures(level0[i]);\n                }\n                for (i = 0; i < level0.length; i++) {\n                    this.computeSegForwardBack(level0[i], 0, 0);\n                }\n            }\n        };\n        // Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range\n        // from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to \"left\" and\n        // seg.forwardCoord maps to \"right\" (via percentage). Vice-versa if the calendar is right-to-left.\n        //\n        // The segment might be part of a \"series\", which means consecutive segments with the same pressure\n        // who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of\n        // segments behind this one in the current series, and `seriesBackwardCoord` is the starting\n        // coordinate of the first segment in the series.\n        TimeGridEventRenderer.prototype.computeSegForwardBack = function (seg, seriesBackwardPressure, seriesBackwardCoord) {\n            var forwardSegs = seg.forwardSegs;\n            var i;\n            if (seg.forwardCoord === undefined) { // not already computed\n                if (!forwardSegs.length) {\n                    // if there are no forward segments, this segment should butt up against the edge\n                    seg.forwardCoord = 1;\n                }\n                else {\n                    // sort highest pressure first\n                    this.sortForwardSegs(forwardSegs);\n                    // this segment's forwardCoord will be calculated from the backwardCoord of the\n                    // highest-pressure forward segment.\n                    this.computeSegForwardBack(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord);\n                    seg.forwardCoord = forwardSegs[0].backwardCoord;\n                }\n                // calculate the backwardCoord from the forwardCoord. consider the series\n                seg.backwardCoord = seg.forwardCoord -\n                    (seg.forwardCoord - seriesBackwardCoord) / // available width for series\n                        (seriesBackwardPressure + 1); // # of segments in the series\n                // use this segment's coordinates to computed the coordinates of the less-pressurized\n                // forward segments\n                for (i = 0; i < forwardSegs.length; i++) {\n                    this.computeSegForwardBack(forwardSegs[i], 0, seg.forwardCoord);\n                }\n            }\n        };\n        TimeGridEventRenderer.prototype.sortForwardSegs = function (forwardSegs) {\n            var objs = forwardSegs.map(buildTimeGridSegCompareObj);\n            var specs = [\n                // put higher-pressure first\n                { field: 'forwardPressure', order: -1 },\n                // put segments that are closer to initial edge first (and favor ones with no coords yet)\n                { field: 'backwardCoord', order: 1 }\n            ].concat(this.context.view.eventOrderSpecs);\n            objs.sort(function (obj0, obj1) {\n                return core.compareByFieldSpecs(obj0, obj1, specs);\n            });\n            return objs.map(function (c) {\n                return c._seg;\n            });\n        };\n        // Given foreground event segments that have already had their position coordinates computed,\n        // assigns position-related CSS values to their elements.\n        TimeGridEventRenderer.prototype.assignSegCss = function (segs) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                core.applyStyle(seg.el, this.generateSegCss(seg));\n                if (seg.level > 0) {\n                    seg.el.classList.add('fc-time-grid-event-inset');\n                }\n                // if the event is short that the title will be cut off,\n                // attach a className that condenses the title into the time area.\n                if (seg.eventRange.def.title && seg.bottom - seg.top < 30) {\n                    seg.el.classList.add('fc-short'); // TODO: \"condensed\" is a better name\n                }\n            }\n        };\n        // Generates an object with CSS properties/values that should be applied to an event segment element.\n        // Contains important positioning-related properties that should be applied to any event element, customized or not.\n        TimeGridEventRenderer.prototype.generateSegCss = function (seg) {\n            var shouldOverlap = this.context.options.slotEventOverlap;\n            var backwardCoord = seg.backwardCoord; // the left side if LTR. the right side if RTL. floating-point\n            var forwardCoord = seg.forwardCoord; // the right side if LTR. the left side if RTL. floating-point\n            var props = this.timeGrid.generateSegVerticalCss(seg); // get top/bottom first\n            var isRtl = this.timeGrid.isRtl;\n            var left; // amount of space from left edge, a fraction of the total width\n            var right; // amount of space from right edge, a fraction of the total width\n            if (shouldOverlap) {\n                // double the width, but don't go beyond the maximum forward coordinate (1.0)\n                forwardCoord = Math.min(1, backwardCoord + (forwardCoord - backwardCoord) * 2);\n            }\n            if (isRtl) {\n                left = 1 - forwardCoord;\n                right = backwardCoord;\n            }\n            else {\n                left = backwardCoord;\n                right = 1 - forwardCoord;\n            }\n            props.zIndex = seg.level + 1; // convert from 0-base to 1-based\n            props.left = left * 100 + '%';\n            props.right = right * 100 + '%';\n            if (shouldOverlap && seg.forwardPressure) {\n                // add padding to the edge so that forward stacked events don't cover the resizer's icon\n                props[isRtl ? 'marginLeft' : 'marginRight'] = 10 * 2; // 10 is a guesstimate of the icon's width\n            }\n            return props;\n        };\n        return TimeGridEventRenderer;\n    }(core.FgEventRenderer));\n    // Builds an array of segments \"levels\". The first level will be the leftmost tier of segments if the calendar is\n    // left-to-right, or the rightmost if the calendar is right-to-left. Assumes the segments are already ordered by date.\n    function buildSlotSegLevels(segs) {\n        var levels = [];\n        var i;\n        var seg;\n        var j;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            // go through all the levels and stop on the first level where there are no collisions\n            for (j = 0; j < levels.length; j++) {\n                if (!computeSlotSegCollisions(seg, levels[j]).length) {\n                    break;\n                }\n            }\n            seg.level = j;\n            (levels[j] || (levels[j] = [])).push(seg);\n        }\n        return levels;\n    }\n    // For every segment, figure out the other segments that are in subsequent\n    // levels that also occupy the same vertical space. Accumulate in seg.forwardSegs\n    function computeForwardSlotSegs(levels) {\n        var i;\n        var level;\n        var j;\n        var seg;\n        var k;\n        for (i = 0; i < levels.length; i++) {\n            level = levels[i];\n            for (j = 0; j < level.length; j++) {\n                seg = level[j];\n                seg.forwardSegs = [];\n                for (k = i + 1; k < levels.length; k++) {\n                    computeSlotSegCollisions(seg, levels[k], seg.forwardSegs);\n                }\n            }\n        }\n    }\n    // Figure out which path forward (via seg.forwardSegs) results in the longest path until\n    // the furthest edge is reached. The number of segments in this path will be seg.forwardPressure\n    function computeSlotSegPressures(seg) {\n        var forwardSegs = seg.forwardSegs;\n        var forwardPressure = 0;\n        var i;\n        var forwardSeg;\n        if (seg.forwardPressure === undefined) { // not already computed\n            for (i = 0; i < forwardSegs.length; i++) {\n                forwardSeg = forwardSegs[i];\n                // figure out the child's maximum forward path\n                computeSlotSegPressures(forwardSeg);\n                // either use the existing maximum, or use the child's forward pressure\n                // plus one (for the forwardSeg itself)\n                forwardPressure = Math.max(forwardPressure, 1 + forwardSeg.forwardPressure);\n            }\n            seg.forwardPressure = forwardPressure;\n        }\n    }\n    // Find all the segments in `otherSegs` that vertically collide with `seg`.\n    // Append into an optionally-supplied `results` array and return.\n    function computeSlotSegCollisions(seg, otherSegs, results) {\n        if (results === void 0) { results = []; }\n        for (var i = 0; i < otherSegs.length; i++) {\n            if (isSlotSegCollision(seg, otherSegs[i])) {\n                results.push(otherSegs[i]);\n            }\n        }\n        return results;\n    }\n    // Do these segments occupy the same vertical space?\n    function isSlotSegCollision(seg1, seg2) {\n        return seg1.bottom > seg2.top && seg1.top < seg2.bottom;\n    }\n    function buildTimeGridSegCompareObj(seg) {\n        var obj = core.buildSegCompareObj(seg);\n        obj.forwardPressure = seg.forwardPressure;\n        obj.backwardCoord = seg.backwardCoord;\n        return obj;\n    }\n\n    var TimeGridMirrorRenderer = /** @class */ (function (_super) {\n        __extends(TimeGridMirrorRenderer, _super);\n        function TimeGridMirrorRenderer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        TimeGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n            this.segsByCol = this.timeGrid.groupSegsByCol(segs);\n            this.timeGrid.attachSegsByCol(this.segsByCol, this.timeGrid.mirrorContainerEls);\n            this.sourceSeg = mirrorInfo.sourceSeg;\n        };\n        TimeGridMirrorRenderer.prototype.generateSegCss = function (seg) {\n            var props = _super.prototype.generateSegCss.call(this, seg);\n            var sourceSeg = this.sourceSeg;\n            if (sourceSeg && sourceSeg.col === seg.col) {\n                var sourceSegProps = _super.prototype.generateSegCss.call(this, sourceSeg);\n                props.left = sourceSegProps.left;\n                props.right = sourceSegProps.right;\n                props.marginLeft = sourceSegProps.marginLeft;\n                props.marginRight = sourceSegProps.marginRight;\n            }\n            return props;\n        };\n        return TimeGridMirrorRenderer;\n    }(TimeGridEventRenderer));\n\n    var TimeGridFillRenderer = /** @class */ (function (_super) {\n        __extends(TimeGridFillRenderer, _super);\n        function TimeGridFillRenderer(timeGrid) {\n            var _this = _super.call(this, timeGrid.context) || this;\n            _this.timeGrid = timeGrid;\n            return _this;\n        }\n        TimeGridFillRenderer.prototype.attachSegs = function (type, segs) {\n            var timeGrid = this.timeGrid;\n            var containerEls;\n            // TODO: more efficient lookup\n            if (type === 'bgEvent') {\n                containerEls = timeGrid.bgContainerEls;\n            }\n            else if (type === 'businessHours') {\n                containerEls = timeGrid.businessContainerEls;\n            }\n            else if (type === 'highlight') {\n                containerEls = timeGrid.highlightContainerEls;\n            }\n            timeGrid.attachSegsByCol(timeGrid.groupSegsByCol(segs), containerEls);\n            return segs.map(function (seg) {\n                return seg.el;\n            });\n        };\n        TimeGridFillRenderer.prototype.computeSegSizes = function (segs) {\n            this.timeGrid.computeSegVerticals(segs);\n        };\n        TimeGridFillRenderer.prototype.assignSegSizes = function (segs) {\n            this.timeGrid.assignSegVerticals(segs);\n        };\n        return TimeGridFillRenderer;\n    }(core.FillRenderer));\n\n    /* A component that renders one or more columns of vertical time slots\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // potential nice values for the slot-duration and interval-duration\n    // from largest to smallest\n    var AGENDA_STOCK_SUB_DURATIONS = [\n        { hours: 1 },\n        { minutes: 30 },\n        { minutes: 15 },\n        { seconds: 30 },\n        { seconds: 15 }\n    ];\n    var TimeGrid = /** @class */ (function (_super) {\n        __extends(TimeGrid, _super);\n        function TimeGrid(context, el, renderProps) {\n            var _this = _super.call(this, context, el) || this;\n            _this.isSlatSizesDirty = false;\n            _this.isColSizesDirty = false;\n            _this.renderSlats = core.memoizeRendering(_this._renderSlats);\n            var eventRenderer = _this.eventRenderer = new TimeGridEventRenderer(_this);\n            var fillRenderer = _this.fillRenderer = new TimeGridFillRenderer(_this);\n            _this.mirrorRenderer = new TimeGridMirrorRenderer(_this);\n            var renderColumns = _this.renderColumns = core.memoizeRendering(_this._renderColumns, _this._unrenderColumns);\n            _this.renderBusinessHours = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderColumns]);\n            _this.renderDateSelection = core.memoizeRendering(_this._renderDateSelection, _this._unrenderDateSelection, [renderColumns]);\n            _this.renderFgEvents = core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderColumns]);\n            _this.renderBgEvents = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderColumns]);\n            _this.renderEventSelection = core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n            _this.renderEventDrag = core.memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderColumns]);\n            _this.renderEventResize = core.memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderColumns]);\n            _this.processOptions();\n            el.innerHTML =\n                '<div class=\"fc-bg\"></div>' +\n                    '<div class=\"fc-slats\"></div>' +\n                    '<hr class=\"fc-divider ' + _this.theme.getClass('widgetHeader') + '\" style=\"display:none\" />';\n            _this.rootBgContainerEl = el.querySelector('.fc-bg');\n            _this.slatContainerEl = el.querySelector('.fc-slats');\n            _this.bottomRuleEl = el.querySelector('.fc-divider');\n            _this.renderProps = renderProps;\n            return _this;\n        }\n        /* Options\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Parses various options into properties of this object\n        TimeGrid.prototype.processOptions = function () {\n            var slotDuration = this.opt('slotDuration');\n            var snapDuration = this.opt('snapDuration');\n            var snapsPerSlot;\n            var input;\n            slotDuration = core.createDuration(slotDuration);\n            snapDuration = snapDuration ? core.createDuration(snapDuration) : slotDuration;\n            snapsPerSlot = core.wholeDivideDurations(slotDuration, snapDuration);\n            if (snapsPerSlot === null) {\n                snapDuration = slotDuration;\n                snapsPerSlot = 1;\n                // TODO: say warning?\n            }\n            this.slotDuration = slotDuration;\n            this.snapDuration = snapDuration;\n            this.snapsPerSlot = snapsPerSlot;\n            // might be an array value (for TimelineView).\n            // if so, getting the most granular entry (the last one probably).\n            input = this.opt('slotLabelFormat');\n            if (Array.isArray(input)) {\n                input = input[input.length - 1];\n            }\n            this.labelFormat = core.createFormatter(input || {\n                hour: 'numeric',\n                minute: '2-digit',\n                omitZeroMinute: true,\n                meridiem: 'short'\n            });\n            input = this.opt('slotLabelInterval');\n            this.labelInterval = input ?\n                core.createDuration(input) :\n                this.computeLabelInterval(slotDuration);\n        };\n        // Computes an automatic value for slotLabelInterval\n        TimeGrid.prototype.computeLabelInterval = function (slotDuration) {\n            var i;\n            var labelInterval;\n            var slotsPerLabel;\n            // find the smallest stock label interval that results in more than one slots-per-label\n            for (i = AGENDA_STOCK_SUB_DURATIONS.length - 1; i >= 0; i--) {\n                labelInterval = core.createDuration(AGENDA_STOCK_SUB_DURATIONS[i]);\n                slotsPerLabel = core.wholeDivideDurations(labelInterval, slotDuration);\n                if (slotsPerLabel !== null && slotsPerLabel > 1) {\n                    return labelInterval;\n                }\n            }\n            return slotDuration; // fall back\n        };\n        /* Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype.render = function (props) {\n            var cells = props.cells;\n            this.colCnt = cells.length;\n            this.renderSlats(props.dateProfile);\n            this.renderColumns(props.cells, props.dateProfile);\n            this.renderBusinessHours(props.businessHourSegs);\n            this.renderDateSelection(props.dateSelectionSegs);\n            this.renderFgEvents(props.fgEventSegs);\n            this.renderBgEvents(props.bgEventSegs);\n            this.renderEventSelection(props.eventSelection);\n            this.renderEventDrag(props.eventDrag);\n            this.renderEventResize(props.eventResize);\n        };\n        TimeGrid.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            // should unrender everything else too\n            this.renderSlats.unrender();\n            this.renderColumns.unrender();\n        };\n        TimeGrid.prototype.updateSize = function (isResize) {\n            var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n            if (isResize || this.isSlatSizesDirty) {\n                this.buildSlatPositions();\n                this.isSlatSizesDirty = false;\n            }\n            if (isResize || this.isColSizesDirty) {\n                this.buildColPositions();\n                this.isColSizesDirty = false;\n            }\n            fillRenderer.computeSizes(isResize);\n            eventRenderer.computeSizes(isResize);\n            mirrorRenderer.computeSizes(isResize);\n            fillRenderer.assignSizes(isResize);\n            eventRenderer.assignSizes(isResize);\n            mirrorRenderer.assignSizes(isResize);\n        };\n        TimeGrid.prototype._renderSlats = function (dateProfile) {\n            var theme = this.theme;\n            this.slatContainerEl.innerHTML =\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                    this.renderSlatRowHtml(dateProfile) +\n                    '</table>';\n            this.slatEls = core.findElements(this.slatContainerEl, 'tr');\n            this.slatPositions = new core.PositionCache(this.el, this.slatEls, false, true // vertical\n            );\n            this.isSlatSizesDirty = true;\n        };\n        // Generates the HTML for the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\n        TimeGrid.prototype.renderSlatRowHtml = function (dateProfile) {\n            var _a = this, dateEnv = _a.dateEnv, theme = _a.theme, isRtl = _a.isRtl;\n            var html = '';\n            var dayStart = core.startOfDay(dateProfile.renderRange.start);\n            var slotTime = dateProfile.minTime;\n            var slotIterator = core.createDuration(0);\n            var slotDate; // will be on the view's first day, but we only care about its time\n            var isLabeled;\n            var axisHtml;\n            // Calculate the time for each slot\n            while (core.asRoughMs(slotTime) < core.asRoughMs(dateProfile.maxTime)) {\n                slotDate = dateEnv.add(dayStart, slotTime);\n                isLabeled = core.wholeDivideDurations(slotIterator, this.labelInterval) !== null;\n                axisHtml =\n                    '<td class=\"fc-axis fc-time ' + theme.getClass('widgetContent') + '\">' +\n                        (isLabeled ?\n                            '<span>' + // for matchCellWidths\n                                core.htmlEscape(dateEnv.format(slotDate, this.labelFormat)) +\n                                '</span>' :\n                            '') +\n                        '</td>';\n                html +=\n                    '<tr data-time=\"' + core.formatIsoTimeString(slotDate) + '\"' +\n                        (isLabeled ? '' : ' class=\"fc-minor\"') +\n                        '>' +\n                        (!isRtl ? axisHtml : '') +\n                        '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n                        (isRtl ? axisHtml : '') +\n                        '</tr>';\n                slotTime = core.addDurations(slotTime, this.slotDuration);\n                slotIterator = core.addDurations(slotIterator, this.slotDuration);\n            }\n            return html;\n        };\n        TimeGrid.prototype._renderColumns = function (cells, dateProfile) {\n            var _a = this, theme = _a.theme, dateEnv = _a.dateEnv, view = _a.view;\n            var bgRow = new daygrid.DayBgRow(this.context);\n            this.rootBgContainerEl.innerHTML =\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                    bgRow.renderHtml({\n                        cells: cells,\n                        dateProfile: dateProfile,\n                        renderIntroHtml: this.renderProps.renderBgIntroHtml\n                    }) +\n                    '</table>';\n            this.colEls = core.findElements(this.el, '.fc-day, .fc-disabled-day');\n            for (var col = 0; col < this.colCnt; col++) {\n                this.publiclyTrigger('dayRender', [\n                    {\n                        date: dateEnv.toDate(cells[col].date),\n                        el: this.colEls[col],\n                        view: view\n                    }\n                ]);\n            }\n            if (this.isRtl) {\n                this.colEls.reverse();\n            }\n            this.colPositions = new core.PositionCache(this.el, this.colEls, true, // horizontal\n            false);\n            this.renderContentSkeleton();\n            this.isColSizesDirty = true;\n        };\n        TimeGrid.prototype._unrenderColumns = function () {\n            this.unrenderContentSkeleton();\n        };\n        /* Content Skeleton\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Renders the DOM that the view's content will live in\n        TimeGrid.prototype.renderContentSkeleton = function () {\n            var parts = [];\n            var skeletonEl;\n            parts.push(this.renderProps.renderIntroHtml());\n            for (var i = 0; i < this.colCnt; i++) {\n                parts.push('<td>' +\n                    '<div class=\"fc-content-col\">' +\n                    '<div class=\"fc-event-container fc-mirror-container\"></div>' +\n                    '<div class=\"fc-event-container\"></div>' +\n                    '<div class=\"fc-highlight-container\"></div>' +\n                    '<div class=\"fc-bgevent-container\"></div>' +\n                    '<div class=\"fc-business-container\"></div>' +\n                    '</div>' +\n                    '</td>');\n            }\n            if (this.isRtl) {\n                parts.reverse();\n            }\n            skeletonEl = this.contentSkeletonEl = core.htmlToElement('<div class=\"fc-content-skeleton\">' +\n                '<table>' +\n                '<tr>' + parts.join('') + '</tr>' +\n                '</table>' +\n                '</div>');\n            this.colContainerEls = core.findElements(skeletonEl, '.fc-content-col');\n            this.mirrorContainerEls = core.findElements(skeletonEl, '.fc-mirror-container');\n            this.fgContainerEls = core.findElements(skeletonEl, '.fc-event-container:not(.fc-mirror-container)');\n            this.bgContainerEls = core.findElements(skeletonEl, '.fc-bgevent-container');\n            this.highlightContainerEls = core.findElements(skeletonEl, '.fc-highlight-container');\n            this.businessContainerEls = core.findElements(skeletonEl, '.fc-business-container');\n            if (this.isRtl) {\n                this.colContainerEls.reverse();\n                this.mirrorContainerEls.reverse();\n                this.fgContainerEls.reverse();\n                this.bgContainerEls.reverse();\n                this.highlightContainerEls.reverse();\n                this.businessContainerEls.reverse();\n            }\n            this.el.appendChild(skeletonEl);\n        };\n        TimeGrid.prototype.unrenderContentSkeleton = function () {\n            core.removeElement(this.contentSkeletonEl);\n        };\n        // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's col\n        TimeGrid.prototype.groupSegsByCol = function (segs) {\n            var segsByCol = [];\n            var i;\n            for (i = 0; i < this.colCnt; i++) {\n                segsByCol.push([]);\n            }\n            for (i = 0; i < segs.length; i++) {\n                segsByCol[segs[i].col].push(segs[i]);\n            }\n            return segsByCol;\n        };\n        // Given segments grouped by column, insert the segments' elements into a parallel array of container\n        // elements, each living within a column.\n        TimeGrid.prototype.attachSegsByCol = function (segsByCol, containerEls) {\n            var col;\n            var segs;\n            var i;\n            for (col = 0; col < this.colCnt; col++) { // iterate each column grouping\n                segs = segsByCol[col];\n                for (i = 0; i < segs.length; i++) {\n                    containerEls[col].appendChild(segs[i].el);\n                }\n            }\n        };\n        /* Now Indicator\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype.getNowIndicatorUnit = function () {\n            return 'minute'; // will refresh on the minute\n        };\n        TimeGrid.prototype.renderNowIndicator = function (segs, date) {\n            // HACK: if date columns not ready for some reason (scheduler)\n            if (!this.colContainerEls) {\n                return;\n            }\n            var top = this.computeDateTop(date);\n            var nodes = [];\n            var i;\n            // render lines within the columns\n            for (i = 0; i < segs.length; i++) {\n                var lineEl = core.createElement('div', { className: 'fc-now-indicator fc-now-indicator-line' });\n                lineEl.style.top = top + 'px';\n                this.colContainerEls[segs[i].col].appendChild(lineEl);\n                nodes.push(lineEl);\n            }\n            // render an arrow over the axis\n            if (segs.length > 0) { // is the current time in view?\n                var arrowEl = core.createElement('div', { className: 'fc-now-indicator fc-now-indicator-arrow' });\n                arrowEl.style.top = top + 'px';\n                this.contentSkeletonEl.appendChild(arrowEl);\n                nodes.push(arrowEl);\n            }\n            this.nowIndicatorEls = nodes;\n        };\n        TimeGrid.prototype.unrenderNowIndicator = function () {\n            if (this.nowIndicatorEls) {\n                this.nowIndicatorEls.forEach(core.removeElement);\n                this.nowIndicatorEls = null;\n            }\n        };\n        /* Coordinates\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype.getTotalSlatHeight = function () {\n            return this.slatContainerEl.offsetHeight;\n        };\n        // Computes the top coordinate, relative to the bounds of the grid, of the given date.\n        // A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\n        TimeGrid.prototype.computeDateTop = function (when, startOfDayDate) {\n            if (!startOfDayDate) {\n                startOfDayDate = core.startOfDay(when);\n            }\n            return this.computeTimeTop(when.valueOf() - startOfDayDate.valueOf());\n        };\n        // Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\n        TimeGrid.prototype.computeTimeTop = function (timeMs) {\n            var len = this.slatEls.length;\n            var dateProfile = this.props.dateProfile;\n            var slatCoverage = (timeMs - core.asRoughMs(dateProfile.minTime)) / core.asRoughMs(this.slotDuration); // floating-point value of # of slots covered\n            var slatIndex;\n            var slatRemainder;\n            // compute a floating-point number for how many slats should be progressed through.\n            // from 0 to number of slats (inclusive)\n            // constrained because minTime/maxTime might be customized.\n            slatCoverage = Math.max(0, slatCoverage);\n            slatCoverage = Math.min(len, slatCoverage);\n            // an integer index of the furthest whole slat\n            // from 0 to number slats (*exclusive*, so len-1)\n            slatIndex = Math.floor(slatCoverage);\n            slatIndex = Math.min(slatIndex, len - 1);\n            // how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\n            // could be 1.0 if slatCoverage is covering *all* the slots\n            slatRemainder = slatCoverage - slatIndex;\n            return this.slatPositions.tops[slatIndex] +\n                this.slatPositions.getHeight(slatIndex) * slatRemainder;\n        };\n        // For each segment in an array, computes and assigns its top and bottom properties\n        TimeGrid.prototype.computeSegVerticals = function (segs) {\n            var eventMinHeight = this.opt('timeGridEventMinHeight');\n            var i;\n            var seg;\n            var dayDate;\n            for (i = 0; i < segs.length; i++) {\n                seg = segs[i];\n                dayDate = this.props.cells[seg.col].date;\n                seg.top = this.computeDateTop(seg.start, dayDate);\n                seg.bottom = Math.max(seg.top + eventMinHeight, this.computeDateTop(seg.end, dayDate));\n            }\n        };\n        // Given segments that already have their top/bottom properties computed, applies those values to\n        // the segments' elements.\n        TimeGrid.prototype.assignSegVerticals = function (segs) {\n            var i;\n            var seg;\n            for (i = 0; i < segs.length; i++) {\n                seg = segs[i];\n                core.applyStyle(seg.el, this.generateSegVerticalCss(seg));\n            }\n        };\n        // Generates an object with CSS properties for the top/bottom coordinates of a segment element\n        TimeGrid.prototype.generateSegVerticalCss = function (seg) {\n            return {\n                top: seg.top,\n                bottom: -seg.bottom // flipped because needs to be space beyond bottom edge of event container\n            };\n        };\n        /* Sizing\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype.buildPositionCaches = function () {\n            this.buildColPositions();\n            this.buildSlatPositions();\n        };\n        TimeGrid.prototype.buildColPositions = function () {\n            this.colPositions.build();\n        };\n        TimeGrid.prototype.buildSlatPositions = function () {\n            this.slatPositions.build();\n        };\n        /* Hit System\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype.positionToHit = function (positionLeft, positionTop) {\n            var _a = this, dateEnv = _a.dateEnv, snapsPerSlot = _a.snapsPerSlot, slatPositions = _a.slatPositions, colPositions = _a.colPositions;\n            var colIndex = colPositions.leftToIndex(positionLeft);\n            var slatIndex = slatPositions.topToIndex(positionTop);\n            if (colIndex != null && slatIndex != null) {\n                var slatTop = slatPositions.tops[slatIndex];\n                var slatHeight = slatPositions.getHeight(slatIndex);\n                var partial = (positionTop - slatTop) / slatHeight; // floating point number between 0 and 1\n                var localSnapIndex = Math.floor(partial * snapsPerSlot); // the snap # relative to start of slat\n                var snapIndex = slatIndex * snapsPerSlot + localSnapIndex;\n                var dayDate = this.props.cells[colIndex].date;\n                var time = core.addDurations(this.props.dateProfile.minTime, core.multiplyDuration(this.snapDuration, snapIndex));\n                var start = dateEnv.add(dayDate, time);\n                var end = dateEnv.add(start, this.snapDuration);\n                return {\n                    col: colIndex,\n                    dateSpan: {\n                        range: { start: start, end: end },\n                        allDay: false\n                    },\n                    dayEl: this.colEls[colIndex],\n                    relativeRect: {\n                        left: colPositions.lefts[colIndex],\n                        right: colPositions.rights[colIndex],\n                        top: slatTop,\n                        bottom: slatTop + slatHeight\n                    }\n                };\n            }\n        };\n        /* Event Drag Visualization\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype._renderEventDrag = function (state) {\n            if (state) {\n                this.eventRenderer.hideByHash(state.affectedInstances);\n                if (state.isEvent) {\n                    this.mirrorRenderer.renderSegs(state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n                }\n                else {\n                    this.fillRenderer.renderSegs('highlight', state.segs);\n                }\n            }\n        };\n        TimeGrid.prototype._unrenderEventDrag = function (state) {\n            if (state) {\n                this.eventRenderer.showByHash(state.affectedInstances);\n                this.mirrorRenderer.unrender(state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n                this.fillRenderer.unrender('highlight');\n            }\n        };\n        /* Event Resize Visualization\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype._renderEventResize = function (state) {\n            if (state) {\n                this.eventRenderer.hideByHash(state.affectedInstances);\n                this.mirrorRenderer.renderSegs(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n            }\n        };\n        TimeGrid.prototype._unrenderEventResize = function (state) {\n            if (state) {\n                this.eventRenderer.showByHash(state.affectedInstances);\n                this.mirrorRenderer.unrender(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n            }\n        };\n        /* Selection\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Renders a visual indication of a selection. Overrides the default, which was to simply render a highlight.\n        TimeGrid.prototype._renderDateSelection = function (segs) {\n            if (segs) {\n                if (this.opt('selectMirror')) {\n                    this.mirrorRenderer.renderSegs(segs, { isSelecting: true });\n                }\n                else {\n                    this.fillRenderer.renderSegs('highlight', segs);\n                }\n            }\n        };\n        TimeGrid.prototype._unrenderDateSelection = function (segs) {\n            this.mirrorRenderer.unrender(segs, { isSelecting: true });\n            this.fillRenderer.unrender('highlight');\n        };\n        return TimeGrid;\n    }(core.DateComponent));\n\n    var AllDaySplitter = /** @class */ (function (_super) {\n        __extends(AllDaySplitter, _super);\n        function AllDaySplitter() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        AllDaySplitter.prototype.getKeyInfo = function () {\n            return {\n                allDay: {},\n                timed: {}\n            };\n        };\n        AllDaySplitter.prototype.getKeysForDateSpan = function (dateSpan) {\n            if (dateSpan.allDay) {\n                return ['allDay'];\n            }\n            else {\n                return ['timed'];\n            }\n        };\n        AllDaySplitter.prototype.getKeysForEventDef = function (eventDef) {\n            if (!eventDef.allDay) {\n                return ['timed'];\n            }\n            else if (core.hasBgRendering(eventDef)) {\n                return ['timed', 'allDay'];\n            }\n            else {\n                return ['allDay'];\n            }\n        };\n        return AllDaySplitter;\n    }(core.Splitter));\n\n    var TIMEGRID_ALL_DAY_EVENT_LIMIT = 5;\n    var WEEK_HEADER_FORMAT = core.createFormatter({ week: 'short' });\n    /* An abstract class for all timegrid-related views. Displays one more columns with time slots running vertically.\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // Is a manager for the TimeGrid subcomponent and possibly the DayGrid subcomponent (if allDaySlot is on).\n    // Responsible for managing width/height.\n    var TimeGridView = /** @class */ (function (_super) {\n        __extends(TimeGridView, _super);\n        function TimeGridView(context, viewSpec, dateProfileGenerator, parentEl) {\n            var _this = _super.call(this, context, viewSpec, dateProfileGenerator, parentEl) || this;\n            _this.splitter = new AllDaySplitter();\n            /* Header Render Methods\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that will go before the day-of week header cells\n            _this.renderHeadIntroHtml = function () {\n                var _a = _this, theme = _a.theme, dateEnv = _a.dateEnv;\n                var range = _this.props.dateProfile.renderRange;\n                var dayCnt = core.diffDays(range.start, range.end);\n                var weekText;\n                if (_this.opt('weekNumbers')) {\n                    weekText = dateEnv.format(range.start, WEEK_HEADER_FORMAT);\n                    return '' +\n                        '<th class=\"fc-axis fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.axisStyleAttr() + '>' +\n                        core.buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                        _this, { date: range.start, type: 'week', forceOff: dayCnt > 1 }, core.htmlEscape(weekText) // inner HTML\n                        ) +\n                        '</th>';\n                }\n                else {\n                    return '<th class=\"fc-axis ' + theme.getClass('widgetHeader') + '\" ' + _this.axisStyleAttr() + '></th>';\n                }\n            };\n            /* Time Grid Render Methods\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that goes before the bg of the TimeGrid slot area. Long vertical column.\n            _this.renderTimeGridBgIntroHtml = function () {\n                var theme = _this.theme;\n                return '<td class=\"fc-axis ' + theme.getClass('widgetContent') + '\" ' + _this.axisStyleAttr() + '></td>';\n            };\n            // Generates the HTML that goes before all other types of cells.\n            // Affects content-skeleton, mirror-skeleton, highlight-skeleton for both the time-grid and day-grid.\n            _this.renderTimeGridIntroHtml = function () {\n                return '<td class=\"fc-axis\" ' + _this.axisStyleAttr() + '></td>';\n            };\n            /* Day Grid Render Methods\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that goes before the all-day cells\n            _this.renderDayGridBgIntroHtml = function () {\n                var theme = _this.theme;\n                return '' +\n                    '<td class=\"fc-axis ' + theme.getClass('widgetContent') + '\" ' + _this.axisStyleAttr() + '>' +\n                    '<span>' + // needed for matchCellWidths\n                    core.getAllDayHtml(_this) +\n                    '</span>' +\n                    '</td>';\n            };\n            // Generates the HTML that goes before all other types of cells.\n            // Affects content-skeleton, mirror-skeleton, highlight-skeleton for both the time-grid and day-grid.\n            _this.renderDayGridIntroHtml = function () {\n                return '<td class=\"fc-axis\" ' + _this.axisStyleAttr() + '></td>';\n            };\n            _this.el.classList.add('fc-timeGrid-view');\n            _this.el.innerHTML = _this.renderSkeletonHtml();\n            _this.scroller = new core.ScrollComponent('hidden', // overflow x\n            'auto' // overflow y\n            );\n            var timeGridWrapEl = _this.scroller.el;\n            _this.el.querySelector('.fc-body > tr > td').appendChild(timeGridWrapEl);\n            timeGridWrapEl.classList.add('fc-time-grid-container');\n            var timeGridEl = core.createElement('div', { className: 'fc-time-grid' });\n            timeGridWrapEl.appendChild(timeGridEl);\n            _this.timeGrid = new TimeGrid(_this.context, timeGridEl, {\n                renderBgIntroHtml: _this.renderTimeGridBgIntroHtml,\n                renderIntroHtml: _this.renderTimeGridIntroHtml\n            });\n            if (_this.opt('allDaySlot')) { // should we display the \"all-day\" area?\n                _this.dayGrid = new daygrid.DayGrid(// the all-day subcomponent of this view\n                _this.context, _this.el.querySelector('.fc-day-grid'), {\n                    renderNumberIntroHtml: _this.renderDayGridIntroHtml,\n                    renderBgIntroHtml: _this.renderDayGridBgIntroHtml,\n                    renderIntroHtml: _this.renderDayGridIntroHtml,\n                    colWeekNumbersVisible: false,\n                    cellWeekNumbersVisible: false\n                });\n                // have the day-grid extend it's coordinate area over the <hr> dividing the two grids\n                _this.dayGrid.bottomCoordPadding = _this.el.querySelector('.fc-divider').offsetHeight;\n            }\n            return _this;\n        }\n        TimeGridView.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.timeGrid.destroy();\n            if (this.dayGrid) {\n                this.dayGrid.destroy();\n            }\n            this.scroller.destroy();\n        };\n        /* Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Builds the HTML skeleton for the view.\n        // The day-grid and time-grid components will render inside containers defined by this HTML.\n        TimeGridView.prototype.renderSkeletonHtml = function () {\n            var theme = this.theme;\n            return '' +\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                (this.opt('columnHeader') ?\n                    '<thead class=\"fc-head\">' +\n                        '<tr>' +\n                        '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                        '</tr>' +\n                        '</thead>' :\n                    '') +\n                '<tbody class=\"fc-body\">' +\n                '<tr>' +\n                '<td class=\"' + theme.getClass('widgetContent') + '\">' +\n                (this.opt('allDaySlot') ?\n                    '<div class=\"fc-day-grid\"></div>' +\n                        '<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\" />' :\n                    '') +\n                '</td>' +\n                '</tr>' +\n                '</tbody>' +\n                '</table>';\n        };\n        /* Now Indicator\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGridView.prototype.getNowIndicatorUnit = function () {\n            return this.timeGrid.getNowIndicatorUnit();\n        };\n        // subclasses should implement\n        // renderNowIndicator(date: DateMarker) {\n        // }\n        TimeGridView.prototype.unrenderNowIndicator = function () {\n            this.timeGrid.unrenderNowIndicator();\n        };\n        /* Dimensions\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n            _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n            this.timeGrid.updateSize(isResize);\n            if (this.dayGrid) {\n                this.dayGrid.updateSize(isResize);\n            }\n        };\n        // Adjusts the vertical dimensions of the view to the specified values\n        TimeGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n            var _this = this;\n            var eventLimit;\n            var scrollerHeight;\n            var scrollbarWidths;\n            // make all axis cells line up\n            this.axisWidth = core.matchCellWidths(core.findElements(this.el, '.fc-axis'));\n            // hack to give the view some height prior to timeGrid's columns being rendered\n            // TODO: separate setting height from scroller VS timeGrid.\n            if (!this.timeGrid.colEls) {\n                if (!isAuto) {\n                    scrollerHeight = this.computeScrollerHeight(viewHeight);\n                    this.scroller.setHeight(scrollerHeight);\n                }\n                return;\n            }\n            // set of fake row elements that must compensate when scroller has scrollbars\n            var noScrollRowEls = core.findElements(this.el, '.fc-row').filter(function (node) {\n                return !_this.scroller.el.contains(node);\n            });\n            // reset all dimensions back to the original state\n            this.timeGrid.bottomRuleEl.style.display = 'none'; // will be shown later if this <hr> is necessary\n            this.scroller.clear(); // sets height to 'auto' and clears overflow\n            noScrollRowEls.forEach(core.uncompensateScroll);\n            // limit number of events in the all-day area\n            if (this.dayGrid) {\n                this.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n                eventLimit = this.opt('eventLimit');\n                if (eventLimit && typeof eventLimit !== 'number') {\n                    eventLimit = TIMEGRID_ALL_DAY_EVENT_LIMIT; // make sure \"auto\" goes to a real number\n                }\n                if (eventLimit) {\n                    this.dayGrid.limitRows(eventLimit);\n                }\n            }\n            if (!isAuto) { // should we force dimensions of the scroll container?\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n                scrollbarWidths = this.scroller.getScrollbarWidths();\n                if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                    // make the all-day and header rows lines up\n                    noScrollRowEls.forEach(function (rowEl) {\n                        core.compensateScroll(rowEl, scrollbarWidths);\n                    });\n                    // the scrollbar compensation might have changed text flow, which might affect height, so recalculate\n                    // and reapply the desired height to the scroller.\n                    scrollerHeight = this.computeScrollerHeight(viewHeight);\n                    this.scroller.setHeight(scrollerHeight);\n                }\n                // guarantees the same scrollbar widths\n                this.scroller.lockOverflow(scrollbarWidths);\n                // if there's any space below the slats, show the horizontal rule.\n                // this won't cause any new overflow, because lockOverflow already called.\n                if (this.timeGrid.getTotalSlatHeight() < scrollerHeight) {\n                    this.timeGrid.bottomRuleEl.style.display = '';\n                }\n            }\n        };\n        // given a desired total height of the view, returns what the height of the scroller should be\n        TimeGridView.prototype.computeScrollerHeight = function (viewHeight) {\n            return viewHeight -\n                core.subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n        };\n        /* Scroll\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Computes the initial pre-configured scroll state prior to allowing the user to change it\n        TimeGridView.prototype.computeDateScroll = function (timeMs) {\n            var top = this.timeGrid.computeTimeTop(timeMs);\n            // zoom can give weird floating-point values. rather scroll a little bit further\n            top = Math.ceil(top);\n            if (top) {\n                top++; // to overcome top border that slots beyond the first have. looks better\n            }\n            return { top: top };\n        };\n        TimeGridView.prototype.queryDateScroll = function () {\n            return { top: this.scroller.getScrollTop() };\n        };\n        TimeGridView.prototype.applyDateScroll = function (scroll) {\n            if (scroll.top !== undefined) {\n                this.scroller.setScrollTop(scroll.top);\n            }\n        };\n        // Generates an HTML attribute string for setting the width of the axis, if it is known\n        TimeGridView.prototype.axisStyleAttr = function () {\n            if (this.axisWidth != null) {\n                return 'style=\"width:' + this.axisWidth + 'px\"';\n            }\n            return '';\n        };\n        return TimeGridView;\n    }(core.View));\n    TimeGridView.prototype.usesMinMaxTime = true; // indicates that minTime/maxTime affects rendering\n\n    var SimpleTimeGrid = /** @class */ (function (_super) {\n        __extends(SimpleTimeGrid, _super);\n        function SimpleTimeGrid(context, timeGrid) {\n            var _this = _super.call(this, context, timeGrid.el) || this;\n            _this.buildDayRanges = core.memoize(buildDayRanges);\n            _this.slicer = new TimeGridSlicer();\n            _this.timeGrid = timeGrid;\n            context.calendar.registerInteractiveComponent(_this, {\n                el: _this.timeGrid.el\n            });\n            return _this;\n        }\n        SimpleTimeGrid.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.calendar.unregisterInteractiveComponent(this);\n        };\n        SimpleTimeGrid.prototype.render = function (props) {\n            var dateProfile = props.dateProfile, dayTable = props.dayTable;\n            var dayRanges = this.dayRanges = this.buildDayRanges(dayTable, dateProfile, this.dateEnv);\n            this.timeGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, null, this.timeGrid, dayRanges), { dateProfile: dateProfile, cells: dayTable.cells[0] }));\n        };\n        SimpleTimeGrid.prototype.renderNowIndicator = function (date) {\n            this.timeGrid.renderNowIndicator(this.slicer.sliceNowDate(date, this.timeGrid, this.dayRanges), date);\n        };\n        SimpleTimeGrid.prototype.buildPositionCaches = function () {\n            this.timeGrid.buildPositionCaches();\n        };\n        SimpleTimeGrid.prototype.queryHit = function (positionLeft, positionTop) {\n            var rawHit = this.timeGrid.positionToHit(positionLeft, positionTop);\n            if (rawHit) {\n                return {\n                    component: this.timeGrid,\n                    dateSpan: rawHit.dateSpan,\n                    dayEl: rawHit.dayEl,\n                    rect: {\n                        left: rawHit.relativeRect.left,\n                        right: rawHit.relativeRect.right,\n                        top: rawHit.relativeRect.top,\n                        bottom: rawHit.relativeRect.bottom\n                    },\n                    layer: 0\n                };\n            }\n        };\n        return SimpleTimeGrid;\n    }(core.DateComponent));\n    function buildDayRanges(dayTable, dateProfile, dateEnv) {\n        var ranges = [];\n        for (var _i = 0, _a = dayTable.headerDates; _i < _a.length; _i++) {\n            var date = _a[_i];\n            ranges.push({\n                start: dateEnv.add(date, dateProfile.minTime),\n                end: dateEnv.add(date, dateProfile.maxTime)\n            });\n        }\n        return ranges;\n    }\n    var TimeGridSlicer = /** @class */ (function (_super) {\n        __extends(TimeGridSlicer, _super);\n        function TimeGridSlicer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        TimeGridSlicer.prototype.sliceRange = function (range, dayRanges) {\n            var segs = [];\n            for (var col = 0; col < dayRanges.length; col++) {\n                var segRange = core.intersectRanges(range, dayRanges[col]);\n                if (segRange) {\n                    segs.push({\n                        start: segRange.start,\n                        end: segRange.end,\n                        isStart: segRange.start.valueOf() === range.start.valueOf(),\n                        isEnd: segRange.end.valueOf() === range.end.valueOf(),\n                        col: col\n                    });\n                }\n            }\n            return segs;\n        };\n        return TimeGridSlicer;\n    }(core.Slicer));\n\n    var TimeGridView$1 = /** @class */ (function (_super) {\n        __extends(TimeGridView, _super);\n        function TimeGridView(_context, viewSpec, dateProfileGenerator, parentEl) {\n            var _this = _super.call(this, _context, viewSpec, dateProfileGenerator, parentEl) || this;\n            _this.buildDayTable = core.memoize(buildDayTable);\n            if (_this.opt('columnHeader')) {\n                _this.header = new core.DayHeader(_this.context, _this.el.querySelector('.fc-head-container'));\n            }\n            _this.simpleTimeGrid = new SimpleTimeGrid(_this.context, _this.timeGrid);\n            if (_this.dayGrid) {\n                _this.simpleDayGrid = new daygrid.SimpleDayGrid(_this.context, _this.dayGrid);\n            }\n            return _this;\n        }\n        TimeGridView.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            if (this.header) {\n                this.header.destroy();\n            }\n            this.simpleTimeGrid.destroy();\n            if (this.simpleDayGrid) {\n                this.simpleDayGrid.destroy();\n            }\n        };\n        TimeGridView.prototype.render = function (props) {\n            _super.prototype.render.call(this, props); // for flags for updateSize\n            var dateProfile = this.props.dateProfile;\n            var dayTable = this.buildDayTable(dateProfile, this.dateProfileGenerator);\n            var splitProps = this.splitter.splitProps(props);\n            if (this.header) {\n                this.header.receiveProps({\n                    dateProfile: dateProfile,\n                    dates: dayTable.headerDates,\n                    datesRepDistinctDays: true,\n                    renderIntroHtml: this.renderHeadIntroHtml\n                });\n            }\n            this.simpleTimeGrid.receiveProps(__assign({}, splitProps['timed'], { dateProfile: dateProfile,\n                dayTable: dayTable }));\n            if (this.simpleDayGrid) {\n                this.simpleDayGrid.receiveProps(__assign({}, splitProps['allDay'], { dateProfile: dateProfile,\n                    dayTable: dayTable, nextDayThreshold: this.nextDayThreshold, isRigid: false }));\n            }\n        };\n        TimeGridView.prototype.renderNowIndicator = function (date) {\n            this.simpleTimeGrid.renderNowIndicator(date);\n        };\n        return TimeGridView;\n    }(TimeGridView));\n    function buildDayTable(dateProfile, dateProfileGenerator) {\n        var daySeries = new core.DaySeries(dateProfile.renderRange, dateProfileGenerator);\n        return new core.DayTable(daySeries, false);\n    }\n\n    var main = core.createPlugin({\n        defaultView: 'timeGridWeek',\n        views: {\n            timeGrid: {\n                class: TimeGridView$1,\n                allDaySlot: true,\n                slotDuration: '00:30:00',\n                slotEventOverlap: true // a bad name. confused with overlap/constraint system\n            },\n            timeGridDay: {\n                type: 'timeGrid',\n                duration: { days: 1 }\n            },\n            timeGridWeek: {\n                type: 'timeGrid',\n                duration: { weeks: 1 }\n            }\n        }\n    });\n\n    exports.AbstractTimeGridView = TimeGridView;\n    exports.TimeGrid = TimeGrid;\n    exports.TimeGridSlicer = TimeGridSlicer;\n    exports.TimeGridView = TimeGridView$1;\n    exports.buildDayRanges = buildDayRanges;\n    exports.buildDayTable = buildDayTable;\n    exports.default = main;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","export default \"<div class=\\\"content-section introduction\\\">\\n    <div>\\n        <span class=\\\"feature-title\\\">FullCalendar</span>\\n        <span>An event calendar based on the FullCalendar library.</span>\\n    </div>\\n</div>\\n\\n<div class=\\\"content-section implementation\\\">\\n    <p-fullCalendar [events]=\\\"events\\\" [options]=\\\"options\\\"></p-fullCalendar>\\n</div>\\n\\n<div class=\\\"content-section documentation\\\">\\n    <p-tabView>\\n        <p-tabPanel header=\\\"Documentation\\\">\\n            <h3>Import</h3>\\n<pre>\\n<code class=\\\"language-typescript\\\" pCode ngNonBindable>\\nimport &#123;FullCalendarModule&#125; from 'primeng/fullcalendar';\\n</code>\\n</pre>\\n\\n            <h3>Getting Started</h3>\\n            <p>FullCalendar is a wrapper around on <a href=\\\"https://fullcalendar.io/docs/v4\\\">FullCalendar 4.1.0+</a> so FullCalendar core needs to be included in your project. For complete documentation and samples please refer to the <a href=\\\"https://fullcalendar.io/\\\">FullCalendar website</a>.</p>\\n<pre>\\n<code class=\\\"language-markup\\\" pCode ngNonBindable>\\nnpm install @fullcalendar/core --save\\n</code>\\n</pre>\\n    \\n            <h3>Plugins</h3>\\n            <p>FullCalendar is plugin based so install the plugins you require and define them with the options property.</p>\\n<pre>\\n<code class=\\\"language-markup\\\" pCode ngNonBindable>\\nnpm install @fullcalendar/daygrid --save\\nnpm install @fullcalendar/timegrid --save\\nnpm install @fullcalendar/interaction --save\\n</code>\\n</pre>\\n\\n            <p>Styles of the plugins can be defined in angular.json or with CSS imports.</p>\\n\\n<pre>\\n<code class=\\\"language-javascript\\\" pCode ngNonBindable>\\n\\\"styles\\\": [\\n    \\\"node_modules/@fullcalendar/core/main.min.css\\\",\\n    \\\"node_modules/@fullcalendar/daygrid/main.min.css\\\",\\n    \\\"node_modules/@fullcalendar/timegrid/main.min.css\\\",\\n    //...\\n</code>\\n</pre>\\n\\n            <h3>Event API</h3>\\n            <p>Events should be an array and defined using the events property. In this example, we'll be utilizing a service to load our data. See the <a href=\\\"https://fullcalendar.io/docs\\\">documentation</a> for \\n            more information about the Event API.</p>\\n\\n<pre>\\n<code class=\\\"language-typescript\\\" pCode ngNonBindable>\\n@Injectable()\\nexport class EventService &#123;\\n    \\n    constructor(private http: Http) &#123;&#125;\\n\\n    getEvents() &#123;\\n        return this.http.get('showcase/resources/data/calendarevents.json')\\n                    .toPromise()\\n                    .then(res =&gt; &lt;any[]&gt; res.json().data)\\n                    .then(data =&gt; &#123; return data; &#125;);\\n    &#125;\\n&#125;\\n</code>\\n</pre>\\n\\n            <p>Sample events data as JSON.</p>\\n<pre>\\n    <code class=\\\"language-typescript\\\" pCode ngNonBindable>\\n&#123;\\n    \\\"data\\\": [\\n        &#123;\\n            \\\"id\\\": 1,\\n    \\t\\t\\\"title\\\": \\\"All Day Event\\\",\\n    \\t\\t\\\"start\\\": \\\"2017-02-01\\\"\\n        &#125;,\\n    \\t&#123;\\n            \\\"id\\\": 2,\\n    \\t\\t\\\"title\\\": \\\"Long Event\\\",\\n    \\t\\t\\\"start\\\": \\\"2017-02-07\\\",\\n    \\t\\t\\\"end\\\": \\\"2017-02-10\\\"\\n        &#125;,\\n    \\t&#123;\\n    \\t\\t\\\"id\\\": 3,\\n    \\t\\t\\\"title\\\": \\\"Repeating Event\\\",\\n    \\t\\t\\\"start\\\": \\\"2017-02-09T16:00:00\\\"\\n        &#125;,\\n        //...\\n</code>\\n</pre>\\n\\n        <h3>Putting It Together</h3>\\n        <p>FullCalendar has a long list of customization parameters that are defined with the options property. Example below customizes the views, defaultDate and header.</p>\\n\\n<pre>\\n<code class=\\\"language-markup\\\" pCode ngNonBindable>\\n&lt;p-fullCalendar [events]=\\\"events\\\" [options]=\\\"options\\\"&gt;&lt;/p-fullCalendar&gt;\\n</code>\\n</pre>\\n\\n<pre>\\n<code class=\\\"language-typescript\\\" pCode ngNonBindable>\\nimport dayGridPlugin from '@fullcalendar/daygrid';\\nimport timeGridPlugin from '@fullcalendar/timegrid';\\nimport interactionPlugin from '@fullcalendar/interaction';\\n\\nexport class FullCalendarDemo implements OnInit &#123;\\n\\n    events: any[];\\n\\n    options: any;\\n            \\n    constructor(private eventService: EventService) &#123; &#125;\\n\\n    ngOnInit() &#123;\\n        this.eventService.getEvents().then(events => &#123;this.events = events;&#125;);\\n        \\n        this.options = &#123;\\n            plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\\n            defaultDate: '2017-02-01',\\n            header: &#123;\\n                left: 'prev,next',\\n                center: 'title',\\n                right: 'month,agendaWeek,agendaDay'\\n            &#125;\\n        &#125;\\n    &#125;\\n\\n&#125;\\n</code>\\n</pre>\\n\\n            <h3>Change Detection</h3>\\n            <p>Updates to the events or options are reflected to the UI whenever a change occurs. An important note here is that UI update only happens whenever a new instance is created\\n                on these twp properties. Simply changing the events array without creating a new instance of the array or updating a property inside options will have no effect.\\n            </p>\\n<pre>\\n<code class=\\\"language-typescript\\\" pCode ngNonBindable>\\nupdate() &#123;\\n    //incorrect\\n    this.events.push(&#123;\\n        \\\"title\\\": \\\"Conference\\\",\\n        \\\"start\\\": \\\"2016-01-11\\\",\\n        \\\"end\\\": \\\"2016-01-13\\\"\\n    &#125;);\\n\\n    //correct\\n    this.events = [...this.events, &#123;\\n        \\\"title\\\": \\\"Conference\\\",\\n        \\\"start\\\": \\\"2016-01-11\\\",\\n        \\\"end\\\": \\\"2016-01-13\\\"\\n    &#125;];\\n\\n    //incorrect\\n    this.options.weekends = false;\\n\\n    //correct\\n    this.options = &#123;...this.options, weekends: false&#125;;\\n&#125;\\n</code>\\n</pre>\\n\\n            <h3>Callbacks</h3>\\n            <p>Callbacks of the FullCalendar are also defined with the options property.</p>\\n<pre>\\n<code class=\\\"language-typescript\\\" pCode ngNonBindable>\\nthis.options = &#123;\\n    plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\\n    header: &#123;\\n        left: 'prev,next',\\n        center: 'title',\\n        right: 'month,agendaWeek,agendaDay'\\n    &#125;,\\n    dateClick: (e) =>  &#123;\\n        //handle date click\\n    &#125;\\n&#125;\\n</code>\\n</pre>\\n\\n            <h3>Methods</h3>\\n            <p>Methods of the underlying calendar instance is accessible using the reference of the components getCalendar() API.</p>\\n<pre>\\n<code class=\\\"language-markup\\\" pCode ngNonBindable>\\n&lt;p-fullCalendar #fc [events]=\\\"events\\\" [options]=\\\"options\\\"&gt;&lt;/p-fullCalendar&gt;\\n</code>\\n</pre>\\n\\n<pre>\\n<code class=\\\"language-typescript\\\" pCode ngNonBindable>\\n@ViewChild('fc') fc: FullCalendar;\\n\\ngotoDate(date: Date) &#123;\\n    this.fc.getCalendar().gotoDate(date);\\n&#125;\\n</code>\\n</pre>\\n            \\n            <h3>Properties</h3>\\n            <div class=\\\"doc-tablewrapper\\\">\\n                <table class=\\\"doc-table\\\">\\n                    <thead>\\n                    <tr>\\n                        <th>Name</th>\\n                        <th>Type</th>\\n                        <th>Description</th>\\n                    </tr>\\n                    </thead>\\n                    <tbody>\\n                        <tr>\\n                            <td>events</td>\\n                            <td>array</td>\\n                            <td>An array of events to display.</td>\\n                        </tr>\\n                        <tr>\\n                            <td>options</td>\\n                            <td>Object</td>\\n                            <td>A configuration object to define properties of FullCalendar.</td>\\n                        </tr>\\n                    </tbody>\\n                </table>\\n            </div>\\n                        \\n            <h3>Dependencies</h3>\\n            <p><a href=\\\"https://fullcalendar.io/docs/v4\\\">FullCalendar</a>.</p>\\n        </p-tabPanel>\\n        <p-tabPanel header=\\\"Source\\\">\\n            <a href=\\\"https://github.com/primefaces/primeng/tree/master/src/app/showcase/components/fullcalendar\\\" class=\\\"btn-viewsource\\\" target=\\\"_blank\\\">\\n                <span>View on GitHub</span>\\n            </a>\\n            <a href=\\\"https://stackblitz.com/edit/primeng-fullcalendar-demo\\\" class=\\\"btn-viewsource\\\" style=\\\"margin-left: .5em;\\\" target=\\\"_blank\\\">\\n                <span>Edit in StackBlitz</span>\\n            </a>\\n<pre>\\n<code class=\\\"language-markup\\\" pCode ngNonBindable>\\n&lt;p-fullCalendar [events]=\\\"events\\\" [options]=\\\"options\\\"&gt;&lt;/p-fullCalendar&gt;\\n</code>\\n</pre>\\n\\n<pre>\\n<code class=\\\"language-typescript\\\" pCode ngNonBindable>\\nimport dayGridPlugin from '@fullcalendar/daygrid';\\nimport timeGridPlugin from '@fullcalendar/timegrid';\\nimport interactionPlugin from '@fullcalendar/interaction';\\n\\nexport class FullCalendarDemo implements OnInit &#123;\\n\\n    events: any[];\\n\\n    options: any;\\n            \\n    constructor(private eventService: EventService) &#123; &#125;\\n\\n    ngOnInit() &#123;\\n        this.eventService.getEvents().then(events => &#123;this.events = events;&#125;);\\n        \\n        this.options = &#123;\\n            plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\\n            defaultDate: '2017-02-01',\\n            header: &#123;\\n                left: 'prev,next',\\n                center: 'title',\\n                right: 'month,agendaWeek,agendaDay'\\n            &#125;,\\n            editable: true\\n        &#125;;\\n    &#125;\\n\\n&#125;\\n</code>\\n</pre>\\n\\n<pre>\\n<code class=\\\"language-typescript\\\" pCode ngNonBindable>\\n@Injectable()\\nexport class EventService &#123;\\n    \\n    constructor(private http: Http) &#123;&#125;\\n\\n    getEvents() &#123;\\n        return this.http.get('showcase/resources/data/calendarevents.json')\\n                    .toPromise()\\n                    .then(res =&gt; &lt;any[]&gt; res.json().data)\\n                    .then(data =&gt; &#123; return data; &#125;);\\n    &#125;\\n&#125;\\n</code>\\n</pre>\\n        </p-tabPanel>\\n        <p-tabPanel header=\\\"StackBlitz\\\">\\n            <ng-template pTemplate=\\\"content\\\">\\n                <iframe src=\\\"https://stackblitz.com/edit/primeng-fullcalendar-demo?embed=1\\\" style=\\\"width: 100%; height: 768px; border: none;\\\"></iframe>\\n            </ng-template>\\n        </p-tabPanel>\\n    </p-tabView>\\n</div>\\n\";","import {NgModule} from '@angular/core';\nimport {RouterModule} from '@angular/router'\nimport {FullCalendarDemo} from './fullcalendardemo';\n\n@NgModule({\n\timports: [\n\t\tRouterModule.forChild([\n\t\t\t{path:'',component: FullCalendarDemo}\n\t\t])\n\t],\n\texports: [\n\t\tRouterModule\n\t]\n})\nexport class FullCalendarDemoRoutingModule {}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule} from '@angular/forms';\nimport {FullCalendarDemo} from './fullcalendardemo';\nimport {FullCalendarDemoRoutingModule} from './fullcalendardemo-routing.module';\nimport {FullCalendarModule} from 'primeng/fullcalendar';\nimport {DialogModule} from 'primeng/dialog';\nimport {InputTextModule} from 'primeng/inputtext';\nimport {CalendarModule} from 'primeng/calendar';\nimport {CheckboxModule} from 'primeng/checkbox';\nimport {ButtonModule} from 'primeng/button';\nimport {TabViewModule} from 'primeng/tabview';\nimport {CodeHighlighterModule} from 'primeng/codehighlighter';\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n        FormsModule,\n\t\tFullCalendarDemoRoutingModule,\n        FullCalendarModule,\n        DialogModule,\n        InputTextModule,\n        CalendarModule,\n        CheckboxModule,\n        ButtonModule,\n        TabViewModule,\n        CodeHighlighterModule\n\t],\n\tdeclarations: [\n\t\tFullCalendarDemo\n\t]\n})\nexport class FullCalendarDemoModule {}\n","import {Component,OnInit} from '@angular/core';\nimport {EventService} from '../../service/eventservice';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\n\n@Component({\n    templateUrl: './fullcalendardemo.html'\n})\nexport class FullCalendarDemo implements OnInit {\n\n    events: any[];\n\n    options: any;\n    \n    header: any;\n            \n    constructor(private eventService: EventService) { }\n\n    ngOnInit() {\n        this.eventService.getEvents().then(events => {this.events = events;});\n        \n        this.options = {\n            plugins:[ dayGridPlugin, timeGridPlugin, interactionPlugin ],\n            defaultDate: '2017-02-01',\n            header: {\n                left: 'prev,next',\n                center: 'title',\n                right: 'dayGridMonth,timeGridWeek,timeGridDay'\n            },\n            editable: true\n        };\n    }\n}"]}