{"version":3,"sources":["webpack:///node_modules/@fullcalendar/core/main.js","webpack:///src/app/components/checkbox/checkbox.ts","webpack:///src/app/components/checkbox/public_api.ts","webpack:///src/app/components/fullcalendar/fullcalendar.ts","webpack:///src/app/components/fullcalendar/public_api.ts"],"names":["global","factory","exports","elementPropHash","className","colSpan","rowSpan","containerTagHash","createElement","tagName","attrs","content","el","document","attrName","applyStyle","setAttribute","innerHTML","appendToElement","htmlToElement","html","trim","container","computeContainerTag","firstChild","htmlToElements","Array","prototype","slice","call","htmlToNodeList","childNodes","substr","normalizeContent","i","length","appendChild","prependToElement","parent","newEls","afterEl","insertBefore","insertAfterElement","refEl","nextSibling","parentNode","els","Node","removeElement","removeChild","matchesMethod","Element","matches","matchesSelector","msMatchesSelector","closestMethod","closest","selector","documentElement","contains","elementMatches","parentElement","nodeType","elementClosest","findElements","containers","HTMLElement","allMatches","querySelectorAll","j","push","findChildren","parents","children","childNode","forceClassName","bool","classList","add","remove","PIXEL_PROP_RE","props","propName","applyStyleProp","name","val","style","test","pointInsideRect","point","rect","left","right","top","bottom","intersectRects","rect1","rect2","res","Math","max","min","translateRect","deltaX","deltaY","constrainPoint","getRectCenter","diffPoints","point1","point2","isRtlScrollbarOnLeft","getIsRtlScrollbarOnLeft","computeIsRtlScrollbarOnLeft","outerEl","position","border","padding","overflow","direction","body","innerEl","getBoundingClientRect","sanitizeScrollbarWidth","width","round","computeEdges","getPadding","computedStyle","window","getComputedStyle","borderLeft","parseInt","borderLeftWidth","borderRight","borderRightWidth","borderTop","borderTopWidth","borderBottom","borderBottomWidth","scrollbarLeftRight","offsetWidth","clientWidth","scrollbarBottom","offsetHeight","clientHeight","scrollbarLeft","scrollbarRight","paddingLeft","paddingRight","paddingTop","paddingBottom","computeInnerRect","goWithinPadding","outerRect","computeRect","edges","pageXOffset","pageYOffset","computeViewportRect","computeHeightAndMargins","computed","height","marginTop","marginBottom","getClippingParents","overflowY","overflowX","computeClippingRect","map","concat","reduce","rect0","preventDefault","ev","listenBySelector","eventType","handler","realHandler","matchedChild","target","addEventListener","removeEventListener","listenToHoverBySelector","onMouseEnter","onMouseLeave","currentMatchedChild","realOnMouseLeave_1","transitionEventNames","whenTransitionDone","callback","realCallback","forEach","eventName","DAY_IDS","addWeeks","m","n","a","dateToUtcArray","arrayToUtcDate","addDays","addMs","diffWeeks","m0","m1","diffDays","valueOf","diffHours","diffMinutes","diffSeconds","diffDayAndTime","m0day","startOfDay","m1day","years","months","days","milliseconds","diffWholeWeeks","d","diffWholeDays","timeAsMs","getUTCFullYear","getUTCMonth","getUTCDate","startOfHour","getUTCHours","startOfMinute","getUTCMinutes","startOfSecond","getUTCSeconds","weekOfYear","marker","dow","doy","y","w","weekOfGivenYear","nextW","year","firstWeekStart","firstWeekOffset","dayStart","floor","fwd","fwdlw","getUTCDay","dateToLocalArray","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","arrayToLocalDate","Date","getUTCMilliseconds","UTC","apply","isValidDate","isNaN","INTERNAL_UNITS","PARSE_RE","createDuration","input","unit","_a","parseString","normalizeObject","s","exec","sign","obj","month","day","getWeeksFromInput","hours","hour","minutes","minute","seconds","second","millisecond","ms","weeks","week","durationsEqual","d0","d1","isSingleDay","dur","addDurations","subtractDurations","multiplyDuration","asRoughYears","asRoughDays","asRoughMonths","asRoughMs","asRoughMinutes","asRoughSeconds","wholeDivideDurations","numerator","denominator","localRes","isInt","greatestDurationDenominator","dontReturnWeeks","value","compensateScroll","rowEl","scrollbarWidths","marginLeft","marginRight","uncompensateScroll","disableCursor","enableCursor","distributeHeight","availableHeight","shouldRedistribute","minOffset1","minOffset2","flexEls","flexOffsets","flexHeights","usedHeight","undistributeHeight","minOffset","naturalOffset","naturalHeight","newHeight","matchCellWidths","maxInnerWidth","innerWidth_1","subtractInnerElHeight","reflowStyleProps","diff","resetStyleProps","preventSelection","allowSelection","preventContextMenu","allowContextMenu","parseFieldSpecs","specs","tokens","token","split","isArray","charAt","field","substring","order","func","compareByFieldSpecs","obj0","obj1","fieldSpecs","cmp","compareByFieldSpec","fieldSpec","flexibleCompare","b","String","localeCompare","capitaliseFirstLetter","str","toUpperCase","padStart","len","compareNumbers","applyAll","functions","thisObj","args","ret","firstDefined","_i","arguments","undefined","debounce","wait","timeout","context","timestamp","result","later","last","setTimeout","refineProps","rawProps","processors","defaults","leftoverProps","refined","key","processor","Function","Number","Boolean","freezeRaw","raw","computeAlignedDayRange","timedRange","dayCnt","start","end","computeVisibleDayRange","nextDayThreshold","startDay","endDay","endTimeMS","isMultiDayRange","range","visibleRange","diffDates","date0","date1","dateEnv","largeUnit","diffWholeYears","diffWholeMonths","extendStatics","Object","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","constructor","create","__assign","assign","t","parseRecurring","eventInput","allDayDefault","recurringTypes","leftovers","localLeftovers","parsed","parse","allDay","allDayGuess","duration","typeData","typeId","expandRecurringRanges","eventDef","framingRange","typeDef","recurringDef","markers","expand","mergeProps","propObjs","complexProps","dest","complexObjs","unshift","filterHash","hash","filtered","mapHash","newHash","arrayToHash","a_1","item","hashValuesToArray","parseEvents","rawEvents","sourceId","calendar","allowOpenRange","eventStore","createEmptyEventStore","rawEvents_1","rawEvent","tuple","parseEvent","eventTupleToStore","defs","def","defId","instance","instances","instanceId","expandRecurring","starts","pluginSystem","hooks","defaultAllDayEventDuration","defaultTimedEventDuration","starts_1","createEventInstance","getRelevantEvents","def_1","newStore","filterEventStoreDefs","lookDef","isEventDefsGrouped","def0","def1","groupId","transformRawEvents","eventSource","calEachTransform","opt","sourceEachTransform","eventDataTransform","transformEachRawEvent","refinedEvents","rawEvents_2","refinedEvent","mergeEventStores","store0","store1","filterFunc","parseRange","createMarker","invertRanges","ranges","constraintRange","invertedRanges","dateRange","sort","compareRanges","range0","range1","intersectRanges","newRange","rangesEqual","rangesIntersect","rangeContainsRange","outerRange","innerRange","rangeContainsMarker","constrainMarkerToRange","removeExact","array","exactVal","removeCnt","splice","isArraysEqual","a0","a1","memoize","workerFunc","memoizeOutput","equalityFunc","cachedRes","newRes","EXTENDED_SETTINGS_AND_SEVERITIES","separator","omitZeroMinute","meridiem","omitCommas","STANDARD_DATE_PROP_SEVERITIES","timeZoneName","era","weekday","MERIDIEM_RE","COMMA_RE","MULTI_SPACE_RE","LTR_RE","UTC_RE","NativeFormatter","formatSettings","standardDateProps","extendedSettings","severity","name_1","buildFormattingFunc","format","formatRange","diffSeverity","computeMarkerDiffSeverity","calendarSystem","biggestUnitForPartial","full0","full1","partialDateProps","computePartialFormattingOptions","partialFormattingFunc","partial0","partial1","insertion","findCommonInsertion","before","after","getLargestUnit","standardDatePropCnt","keys","formatTimeZoneOffset","timeZoneOffset","formatWeekNumber","computeWeekNumber","weekLabel","locale","buildNativeFormattingFunc","sanitizeSettings","timeZone","normalFormat","Intl","DateTimeFormat","codes","zeroFormat","zeroProps","postProcess","replace","injectTzoStr","toLocaleLowerCase","tzoStr","replaced","num","display","parts","simpleNumberFormat","options","isRtl","reverse","join","ca","getMarkerYear","getMarkerMonth","getMarkerDay","biggestUnit","partialOptions","name_2","i0","found0","indexOf","before0","after0","i1","found1","before1","after1","CmdFormatter","cmdStr","cmdFormatter","createVerboseFormattingArg","FuncFormatter","createFormatter","defaultSeparator","buildIsoString","stripZeroTime","toISOString","formatIsoTimeString","doIso","abs","mins","startInfo","expandZonedMarker","endInfo","localeCodes","dateInfo","markerToArray","EventSourceApi","internalEventSource","dispatch","type","refetch","sourceIds","defineProperty","get","publicId","enumerable","configurable","meta","url","EventApi","_calendar","_def","_instance","setProp","_b","DATE_PROPS","NON_DATE_PROPS","mutate","standardProps","UNSCOPED_EVENT_UI_PROPS","ui","backgroundColor","borderColor","startEditable","durationEditable","setExtendedProp","extendedProps","setStart","startInput","instanceRange","startDelta","granularity","endDelta","maintainDuration","origDuration","newDuration","setEnd","endInput","hasEnd","setDates","moveStart","deltaInput","delta","moveEnd","moveDates","setAllDay","formatInput","formatter","forcedStartTzo","forcedEndTzo","forcedTzo","mutation","fromApi","state","eventSources","toDate","title","rendering","constraints","overlap","allows","textColor","classNames","sliceEventStore","eventUiBases","inverseBgByGroupId","inverseBgByDefId","defByGroupId","bgRanges","fgRanges","eventUis","compileEventUis","origRange","normalRange","slicedRange","isStart","isEnd","invertedRanges_1","invertedRange","invertedRanges_2","bg","fg","hasBgRendering","filterSegsViaEls","view","segs","isMirror","hasPublicHandlers","filter","seg","custom","publiclyTrigger","event","eventRange","segs_1","setElSeg","fcSeg","getElSeg","eventDefs","compileEventUi","uis","combineEventUis","applyMutationToEventStore","eventConfigBase","eventConfigs","applyMutationToEventDef","eventDefMutationAppliers","applyMutationToEventInstance","eventConfig","appliers","willDeltasAffectDuration","copy","appliers_1","applier","eventInstance","forceAllDay","clearEnd","getDefaultEventEnd","reduceEventStore","action","dateProfile","receiveRawEvents","fetchId","fetchRange","addEvent","activeRange","rezoneDates","oldDateEnv","applyMutationToRelated","excludeInstances","excludeEventsBySourceId","latestFetchId","subset","expandRange","newDateEnv","canComputeOffset","relevant","removals","isInteractionValid","interaction","isNewPropsValid","eventDrag","isDateSelectionValid","dateSelection","newProps","businessHours","eventSelection","eventResize","isPropsValid","dateSpanMeta","filterConfig","isInteractionPropsValid","isDateSelectionPropsValid","subjectEventStore","mutatedEvents","subjectDefs","subjectInstances","subjectConfigs","isEvent","selectionConfig","otherEventStore","affectedEvents","otherDefs","otherInstances","otherConfigs","subjectInstanceId","subjectInstance","subjectRange","subjectConfig","subjectDef","allConstraintsPass","overlapFunc","otherInstanceId","otherInstance","otherOverlap","subjectAllow","subjectDateSpan","origDef","origInstance","eventApi","buildDateSpanApi","relevantEventStore","relevantDefs","relevantInstances","selection","selectionRange","relevantInstanceId","relevantInstance","selectionAllow","fullDateSpan","businessHoursUnexpanded","constraints_1","constraint","anyRangesContainRange","constraintToRanges","eventStoreToRanges","outerRanges","outerRanges_1","normalizeConstraint","htmlEscape","cssToStr","cssProps","statements","attrsToStr","parseClassName","editable","allow","color","processUnscopedUiProps","processScopedUiProps","prefix","rawScoped","rawUnscoped","wasFound","scopedKey","EMPTY_EVENT_UI","combineTwoEventUis","item0","item1","id","uid","computeIsAllDayDefault","leftovers0","recurringRes","parseEventDef","leftovers1","singleRes","parseSingle","pluckNonDateProps","eventDefParsers","eventDefParser","newLeftovers","freeze","pluckDateProps","startMeta","startMarker","endMeta","endMarker","createMarkerMeta","isTimeUnspecified","preLeftovers","source","DEF_DEFAULTS","startTime","endTime","daysOfWeek","parseBusinessHours","refineInputs","rawDefs","rawDef","memoizeRendering","renderFunc","unrenderFunc","dependencies","dependents","thisContext","prevArgs","unrender","dependents_1","dependent","dependencies_1","dependency","isValuesSimilar","val0","val1","depth","isArraysSimilar","isObjectsSimilar","prop","computeChangedProps","anyKeysRemoved","EMPTY_EVENT_STORE","Splitter","getKeysForEventDefs","_getKeysForEventDefs","splitDateSelection","_splitDateSpan","splitEventStore","_splitEventStore","splitIndividualUi","_splitIndividualUi","splitEventDrag","_splitInteraction","splitEventResize","eventUiBuilders","splitProps","_this","keyInfos","getKeyInfo","defKeys","dateSelections","individualUi","eventStores","eventDrags","eventResizes","info","buildEventUiForKey","keyInfo","buildEventUi","dateSpan","dateSpans","getKeysForDateSpan","keys_1","getKeysForEventDef","splitStores","_c","splitHashes","splitStates","affectedStores_1","mutatedKeysByDefId","mutatedStores_1","populate","origSeg","allUi","eventUiForKey","baseParts","stuff","buildGotoAnchorHtml","component","gotoOptions","innerHtml","forceOff","finalOptions","formatIso","omitTime","JSON","stringify","getAllDayHtml","getDayClasses","noThemeHighlight","theme","classes","todayStart","todayEnd","currentRange","getNow","getClass","unpromisify","success","failure","isResolved","wrappedSuccess","wrappedFailure","then","Mixin","mixInto","destClass","mixIntoObj","destObj","getOwnPropertyNames","mixOver","EmitterMixin","_super","on","addToHash","_handlers","one","_oneHandlers","off","removeFromHash","trigger","triggerWith","hasHandlers","PositionCache","originEl","isHorizontal","isVertical","build","originClientRect","buildElHorizontals","buildElVerticals","originClientLeft","lefts","rights","originClientTop","tops","bottoms","leftToIndex","leftPosition","topToIndex","topPosition","getWidth","leftIndex","getHeight","topIndex","ScrollController","getMaxScrollTop","getScrollHeight","getClientHeight","getMaxScrollLeft","getScrollWidth","getClientWidth","canScrollVertically","canScrollHorizontally","canScrollUp","getScrollTop","canScrollDown","canScrollLeft","getScrollLeft","canScrollRight","ElementScrollController","scrollTop","scrollLeft","setScrollTop","setScrollLeft","scrollWidth","scrollHeight","WindowScrollController","scroll","ScrollComponent","applyOverflow","clear","setHeight","destroy","lockOverflow","getScrollbarWidths","Theme","calendarOptions","processIconOverride","iconOverrideOption","setIconOverride","iconOverrideHash","iconClassesCopy","buttonName","iconClasses","applyIconOverridePrefix","iconOverridePrefix","getIconClass","baseIconClass","getCustomButtonIconClass","customButtonProps","iconOverrideCustomButtonOption","guid","Component","isView","addEqualityFuncs","newFuncs","equalityFuncs","receiveProps","recycleProps","anyChanges","comboProps","render","oldProps","DateComponent","buildPositionCaches","queryHit","positionLeft","positionTop","elWidth","elHeight","validRange","publiclyTriggerAfterSizing","triggerRenderedSegs","isMirrors","loadingLevel","afterSizingTriggers","_eventsPositioned","triggerWillRemoveSegs","segs_2","segs_3","isValidSegDownEl","isPopover","isInPopover","isValidDateDownEl","segEl","fgSegSelector","bgSegSelector","uid$1","createPlugin","deps","reducers","eventDragMutationMassagers","dateSelectionTransformers","datePointTransforms","dateSpanTransforms","views","viewPropsTransformers","externalDefTransforms","eventResizeJoinTransforms","viewContainerModifiers","eventDropTransformers","componentInteractions","calendarInteractions","themeClasses","eventSourceDefs","namedTimeZonedImpl","defaultView","elementDraggingImpl","optionChangeHandlers","PluginSystem","addedHash","plugin","dep","combineHooks","hooks0","hooks1","eventSourceDef","ignoreRange","parseMeta","events","fetch","arg","ArrayEventSourcePlugin","eventSourceDef$1","bind","startStr","endStr","FuncEventSourcePlugin","requestJson","method","params","successCallback","failureCallback","injectQueryStringParams","encodeParams","xhr","XMLHttpRequest","open","setRequestHeader","onload","status","responseText","err","onerror","send","encodeURIComponent","eventSourceDef$2","extraParams","startParam","endParam","timeZoneParam","requestParams","buildRequestParams","errorMessage","message","JsonFeedEventSourcePlugin","customRequestParams","recurring","startRecur","endRecur","anyValid","clippedFramingRange","expandRanges","SimpleRecurrencePlugin","dowHash","dayMarker","instanceStarts","instanceStart","DefaultOptionChangeHandlers","handleEventSources","plugins","handlePlugins","inputs","unfoundSources","newInputs","inputs_1","inputFound","_raw","unfoundSources_1","unfoundSource","newInputs_1","newInput","addEventSource","addPluginInputs","config","globalDefaults","defaultRangeSeparator","titleRangeSeparator","forceEventDuration","columnHeader","aspectRatio","header","center","weekends","weekNumbers","weekNumberCalculation","scrollTime","minTime","maxTime","showNonCurrentDates","lazyFetching","locales","timeGridEventMinHeight","themeSystem","dragRevertDuration","dragScroll","allDayMaintainDuration","unselectAuto","dropAccept","eventOrder","eventLimit","eventLimitClick","dayPopoverFormat","handleWindowResize","windowResizeDelay","longPressDelay","eventDragMinDistance","rtlDefaults","buttonIcons","prev","next","prevYear","nextYear","complexOptions","mergeOptions","optionObjs","INTERNAL_PLUGINS","refinePluginDefs","pluginInputs","pluginInputs_1","pluginInput","globalName","console","warn","RAW_EN_LOCALE","code","dir","buttonText","today","list","allDayText","eventLimitText","noEventsMessage","parseRawLocales","explicitRawLocales","defaultCode","globalArray","globalObject","allRawLocales","rawLocaleMap","en","allRawLocales_1","rawLocale","buildLocale","inputSingular","available","parseLocale","queryLocale","codeArg","queryRawLocale","simpleId","merged","NumberFormat","OptionsManager","overrides","dynamicOverrides","compute","addDynamic","reset","localeDefaults","dirDefaults","calendarSystemClassMap","registerCalendarSystem","theClass","createCalendarSystem","GregorianCalendarSystem","arrayToMarker","arr","ISO_RE","DateEnv","settings","isNamedTimeZone","namedTimeZoneImpl","weekDow","weekDoy","firstDay","weekNumberFunc","createNowMarker","timestampToMarker","getYear","subtract","addYears","addMonths","greatestWholeUnit","countDurationsBetween","startOf","startOfYear","startOfMonth","startOfWeek","dateOptions","offsetForMarker","isEndExclusive","extraOptions","omitTimeZoneOffset","timestampToArray","getTimezoneOffset","offsetForArray","SIMPLE_SOURCE_PROPS","uid$2","doesSourceNeedRange","sourceDefId","parseEventSource","parseEventSourceProps","isFetching","reduceEventSources","addSources","sources","removeSource","fetchDirtySources","fetchSourcesByIds","excludeStaticSources","receiveResponse","uid$3","eventSourceHash","sources_1","sourceHash","isSourceDirty","prevSources","sourceIdHash","nextSources","fetchSource","sourceDef","calSuccess","calSuccessRes","sourceSuccessRes","error","callFailure","DateProfileGenerator","viewSpec","initHiddenDays","buildPrev","currentDateProfile","currentDate","prevDate","currentRangeUnit","dateIncrement","buildNext","nextDate","forceToValid","currentInfo","isRangeAllDay","renderRange","isValid","buildValidRange","trimHiddenDays","buildCurrentRangeInfo","buildRenderRange","adjustActiveRange","buildDateIncrement","getRangeOption","dayCount","durationUnit","buildRangeFromDuration","buildRangeFromDayCount","buildCustomVisibleRange","getFallbackDuration","usesMinMaxTime","alignment","dateAlignment","dateIncrementInput","dateIncrementDuration","isHiddenDay","skipHiddenDays","computeRes","customAlignment","runningCount","fallback","otherArgs","hiddenDays","isHiddenDayHash","Error","inc","isExclusive","isDateProfilesEqual","p0","p1","viewType","reduceViewType","reduceDateProfile","nextState","reduceCurrentDate","reduceDateSelection","reduceSelectedEvent","reduceEventDrag","reduceEventResize","eventSourceLoadingLevel","computeLoadingLevel","reducerFunc","currentViewType","newDateProfile","dateProfileGenerators","dateMarker","generator","newDate","currentSelection","currentInstanceId","eventInstanceId","currentDrag","newDrag","currentResize","newResize","cnt","STANDARD_PROPS","parseDateSpan","defaultDuration","span","parseOpenDateSpan","isDateSpansEqual","span0","span1","isSpanPropsEqual","buildDatePointApi","dateStr","fabricateEventRange","compileViewDefs","defaultConfigs","overrideConfigs","ensureViewDef","viewDef","buildViewDef","defaultConfig","overrideConfig","queryProp","superType","findViewNameBySubclass","superDef","viewSubclass","configs","superProto","getPrototypeOf","parseViewConfigs","parseViewConfig","VIEW_DEF_PROPS","buildViewSpecs","defaultInputs","optionsManager","viewDefs","buildViewSpec","durationInput","singleUnit","singleUnitOverrides","denom","queryButtonText","buttonTextMap","buttonTextKey","buttonTextOverride","buttonTextDefault","Toolbar","extraClassName","_renderLayout","renderLayout","unrenderLayout","_updateTitle","updateTitle","_updateActiveButton","updateActiveButton","_updateToday","updateToday","_updatePrev","updatePrev","_updateNext","updateNext","layout","activeButton","isTodayEnabled","isPrevEnabled","isNextEnabled","viewsWithButtons","renderSection","buttonStr","viewSpecs","sectionEl","calendarCustomButtons","customButtons","calendarButtonTextOverrides","calendarButtonText","buttonGroupStr","groupChildren","isOnlyButtons","groupEl","buttonClick","buttonIcon","buttonInnerHtml","buttonClasses","buttonEl","buttonAriaAttr","click","text","changeView","buttonGroupClassName","toggleButtonEnabled","titleEl","innerText","disabled","CalendarComponent","_renderToolbars","renderToolbars","buildViewPropTransformers","contentEl","modifyViewContainer","toggleElClassNames","computeTitle","footer","dirClassName","themeClassName","freezeHeight","dateProfileGenerator","renderView","updateSize","thawHeight","headerLayout","footerLayout","now","todayInfo","prevInfo","nextInfo","toolbarProps","addScroll","queryScroll","viewProps","transformers","transformers_1","transformer","transform","isResize","isHeightAuto","computeHeightVars","viewHeight","updateNowIndicator","popScroll","heightInput","contentHeightInput","queryToolbarsHeight","viewOptions","titleFormat","computeTitleFormat","theClasses","Interaction","parseInteractionSettings","useEventCenter","interactionSettingsToStore","interactionSettingsStore","EventClicking","handleSegClick","hasUrlContainer","querySelector","href","jsEvent","defaultPrevented","location","EventHovering","handleEventElRemove","currentSegEl","handleSegLeave","handleSegEnter","triggerEvent","removeHoverListeners","publicEvName","StandardTheme","widget","widgetHeader","widgetContent","buttonGroup","button","buttonActive","popoverHeader","popoverContent","headerRow","dayRow","listView","close","Calendar","buildDateEnv","buildTheme","buildEventUiSingleBase","_buildEventUiSingleBase","buildSelectionConfig","_buildSelectionConfig","buildEventUiBySource","buildEventUiBases","interactionsStore","actionQueue","isReducing","needsRerender","needsFullRerender","isRendering","renderingPauseDepth","buildDelayedRerender","isViewUpdated","isDatesUpdated","isEventsUpdated","handleOptions","hydrate","calendarInteractionClass","pluginDefs","pluginDefs_1","pluginDef","renderableEventStore","bindHandlers","executeRender","requestRerender","unbindHandlers","removeNavLinkListener","anchorEl","getAttribute","customAction","viewOpt","zoomTo","windowResizeProxy","windowResize","buildInitialState","rawSources","singleRawSource","rawSources_1","rawSource","batchRendering","getInitialDate","oldState","shift","newState","needsFull","delayedRerender","tryRerender","renderComponent","savedScroll","eventUiSingleBase","eventUiBySource","applyScroll","releaseAfterSizingTriggers","resetOptions","changeHandlers","oldOptions","oldNormalOptions","normalOptions","specialOptions","processOptions","name_3","setOptions","name_4","name_5","mode","isTimeZoneDirty","isSizeDirty","anyDifficultOptions","name_6","setOption","getOption","viewOpts","pluginHooks","rerenderDelay","availableRawLocales","dateProfileGeneratorClass","getAvailableLocaleCodes","rawOpts","eventEditable","optHandler","name_7","isValidViewType","dateOrRange","unselect","spec","getUnitViewSpec","viewTypes","defaultDateInput","gotoDate","zonedDateInput","incrementDate","formatDate","isHandlingWindowResize","registerInteractiveComponent","settingsInput","DEFAULT_INTERACTIONS","interactionClasses","interactions","interactionClass","unregisterInteractiveComponent","listener","select","dateOrObj","endDate","selectionInput","triggerDateSelect","pev","triggerDateUnselect","origEvent","triggerDateClick","dayEl","sourceInput","sourceApi","getEventSourceById","getEventById","getEvents","eventApis","removeAllEvents","rerenderEvents","getEventSources","sourceApis","internalId","removeAllEventSources","refetchEvents","scrollToTime","timeInput","time","themeClass","View","parentEl","renderDatesMem","renderDatesWrap","unrenderDatesWrap","renderBusinessHoursMem","renderBusinessHours","unrenderBusinessHours","renderDateSelectionMem","renderDateSelectionWrap","unrenderDateSelectionWrap","renderEventsMem","renderEvents","unrenderEvents","renderEventSelectionMem","renderEventSelectionWrap","unrenderEventSelectionWrap","renderEventDragMem","renderEventDragWrap","unrenderEventDragWrap","renderEventResizeMem","renderEventResizeWrap","unrenderEventResizeWrap","eventOrderSpecs","initialize","isAuto","updateBaseSize","renderDates","timeMs","startNowIndicator","stopNowIndicator","unrenderDates","renderDateSelection","unrenderDateSelection","sliceEvents","renderEventSelection","unrenderEventSelection","renderEventDrag","unrenderEventDrag","renderEventResize","unrenderEventResize","update","delay","getNowIndicatorUnit","initialNowDate","initialNowQueriedMs","nowIndicatorTimeoutID","nowIndicatorIntervalID","setInterval","unrenderNowIndicator","renderNowIndicator","isNowIndicatorRendered","clearTimeout","clearInterval","queuedScroll","applyQueuedScroll","queryDateScroll","computeDateScroll","applyDateScroll","FgEventRenderer","renderSegs","mirrorInfo","rangeUpdated","renderSegEls","attachSegs","_segs","detachSegs","displayEventTime","displayEventEnd","eventTimeFormat","computeEventTimeFormat","computeDisplayEventTime","computeDisplayEventEnd","renderSegHtml","getSegClasses","isDraggable","isResizable","isDragging","isResizing","getTimeText","displayEnd","_getTimeText","getSkinCss","sortEventSegs","objs","buildSegCompareObj","c","_seg","computeSizes","force","computeSegSizes","assignSizes","assignSegSizes","hideByHash","visibility","showByHash","selectByInstanceId","unselectByInstanceId","FillRenderer","fillSegTag","dirtySizeFlags","containerElsByType","segsByType","getSegsByType","renderedSegs","containerEls","css","toLowerCase","NamedTimeZoneImpl","ElementDragging","emitter","setMirrorIsVisible","setMirrorNeedsRevert","setAutoScrollEnabled","dateInput","buildDateEnv$1","dateMeta","DRAG_META_PROPS","DRAG_META_DEFAULTS","parseDragMeta","computeFallbackHeaderFormat","datesRepDistinctDays","renderDateCell","colCnt","colHeadFormat","colspan","otherAttrs","isDateValid","columnHeaderHtml","columnHeaderText","DayHeader","thead","dates","renderIntroHtml","dates_1","DaySeries","indices","dayIndex","sliceRange","firstIndex","getDateDayIndex","lastIndex","clippedFirstIndex","clippedLastIndex","ceil","dayOffset","DayTable","daySeries","breakOnWeeks","daysPerRow","rowCnt","cells","buildCells","headerDates","buildHeaderDates","rows","row","col","buildCell","seriesSeg","index","nextIndex","firstCol","lastCol","Slicer","sliceBusinessHours","_sliceBusinessHours","sliceDateSelection","_sliceDateSpan","_sliceEventStore","sliceEventDrag","_sliceInteraction","sliceEventResize","sliceProps","extraArgs","eventSegs","dateSelectionSegs","businessHourSegs","fgEventSegs","bgEventSegs","sliceNowDate","computeActiveRange","rangeRes","sliceEventRanges","affectedInstances","sourceSeg","eventRanges","eventRanges_1","sliceEventRange","isComponentAllDay","version","parseMarker","CHECKBOX_VALUE_ACCESSOR","provide","useExisting","Checkbox","multi","cd","checkboxIcon","onChange","onModelChange","onModelTouched","focused","checked","onClick","checkbox","focus","readonly","updateModel","binary","addValue","removeValue","model","formControl","setValue","emit","originalEvent","handleChange","isChecked","onFocus","onBlur","inputViewChild","nativeElement","writeValue","markForCheck","registerOnChange","fn","registerOnTouched","setDisabledState","template","providers","changeDetection","Default","CheckboxModule","imports","declarations","FullCalendar","ngOnInit","ngAfterViewChecked","initialized","offsetParent","_events","_options","optionValue","getCalendar","ngOnDestroy","FullCalendarModule"],"mappings":"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","file":"default~components-fullcalendar-fullcalendardemo-module~components-inputnumber-inputnumberdemo-module-es5.js","sourcesContent":["/*!\nFullCalendar Core Package v4.1.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = global || self, factory(global.FullCalendar = {}));\n}(this, function (exports) { 'use strict';\n\n    // Creating\n    // ----------------------------------------------------------------------------------------------------------------\n    var elementPropHash = {\n        className: true,\n        colSpan: true,\n        rowSpan: true\n    };\n    var containerTagHash = {\n        '<tr': 'tbody',\n        '<td': 'tr'\n    };\n    function createElement(tagName, attrs, content) {\n        var el = document.createElement(tagName);\n        if (attrs) {\n            for (var attrName in attrs) {\n                if (attrName === 'style') {\n                    applyStyle(el, attrs[attrName]);\n                }\n                else if (elementPropHash[attrName]) {\n                    el[attrName] = attrs[attrName];\n                }\n                else {\n                    el.setAttribute(attrName, attrs[attrName]);\n                }\n            }\n        }\n        if (typeof content === 'string') {\n            el.innerHTML = content; // shortcut. no need to process HTML in any way\n        }\n        else if (content != null) {\n            appendToElement(el, content);\n        }\n        return el;\n    }\n    function htmlToElement(html) {\n        html = html.trim();\n        var container = document.createElement(computeContainerTag(html));\n        container.innerHTML = html;\n        return container.firstChild;\n    }\n    function htmlToElements(html) {\n        return Array.prototype.slice.call(htmlToNodeList(html));\n    }\n    function htmlToNodeList(html) {\n        html = html.trim();\n        var container = document.createElement(computeContainerTag(html));\n        container.innerHTML = html;\n        return container.childNodes;\n    }\n    // assumes html already trimmed and tag names are lowercase\n    function computeContainerTag(html) {\n        return containerTagHash[html.substr(0, 3) // faster than using regex\n        ] || 'div';\n    }\n    function appendToElement(el, content) {\n        var childNodes = normalizeContent(content);\n        for (var i = 0; i < childNodes.length; i++) {\n            el.appendChild(childNodes[i]);\n        }\n    }\n    function prependToElement(parent, content) {\n        var newEls = normalizeContent(content);\n        var afterEl = parent.firstChild || null; // if no firstChild, will append to end, but that's okay, b/c there were no children\n        for (var i = 0; i < newEls.length; i++) {\n            parent.insertBefore(newEls[i], afterEl);\n        }\n    }\n    function insertAfterElement(refEl, content) {\n        var newEls = normalizeContent(content);\n        var afterEl = refEl.nextSibling || null;\n        for (var i = 0; i < newEls.length; i++) {\n            refEl.parentNode.insertBefore(newEls[i], afterEl);\n        }\n    }\n    function normalizeContent(content) {\n        var els;\n        if (typeof content === 'string') {\n            els = htmlToElements(content);\n        }\n        else if (content instanceof Node) {\n            els = [content];\n        }\n        else { // Node[] or NodeList\n            els = Array.prototype.slice.call(content);\n        }\n        return els;\n    }\n    function removeElement(el) {\n        if (el.parentNode) {\n            el.parentNode.removeChild(el);\n        }\n    }\n    // Querying\n    // ----------------------------------------------------------------------------------------------------------------\n    // from https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\n    var matchesMethod = Element.prototype.matches ||\n        Element.prototype.matchesSelector ||\n        Element.prototype.msMatchesSelector;\n    var closestMethod = Element.prototype.closest || function (selector) {\n        // polyfill\n        var el = this;\n        if (!document.documentElement.contains(el)) {\n            return null;\n        }\n        do {\n            if (elementMatches(el, selector)) {\n                return el;\n            }\n            el = el.parentElement || el.parentNode;\n        } while (el !== null && el.nodeType === 1);\n        return null;\n    };\n    function elementClosest(el, selector) {\n        return closestMethod.call(el, selector);\n    }\n    function elementMatches(el, selector) {\n        return matchesMethod.call(el, selector);\n    }\n    // accepts multiple subject els\n    // returns a real array. good for methods like forEach\n    function findElements(container, selector) {\n        var containers = container instanceof HTMLElement ? [container] : container;\n        var allMatches = [];\n        for (var i = 0; i < containers.length; i++) {\n            var matches = containers[i].querySelectorAll(selector);\n            for (var j = 0; j < matches.length; j++) {\n                allMatches.push(matches[j]);\n            }\n        }\n        return allMatches;\n    }\n    // accepts multiple subject els\n    // only queries direct child elements\n    function findChildren(parent, selector) {\n        var parents = parent instanceof HTMLElement ? [parent] : parent;\n        var allMatches = [];\n        for (var i = 0; i < parents.length; i++) {\n            var childNodes = parents[i].children; // only ever elements\n            for (var j = 0; j < childNodes.length; j++) {\n                var childNode = childNodes[j];\n                if (!selector || elementMatches(childNode, selector)) {\n                    allMatches.push(childNode);\n                }\n            }\n        }\n        return allMatches;\n    }\n    // Attributes\n    // ----------------------------------------------------------------------------------------------------------------\n    function forceClassName(el, className, bool) {\n        if (bool) {\n            el.classList.add(className);\n        }\n        else {\n            el.classList.remove(className);\n        }\n    }\n    // Style\n    // ----------------------------------------------------------------------------------------------------------------\n    var PIXEL_PROP_RE = /(top|left|right|bottom|width|height)$/i;\n    function applyStyle(el, props) {\n        for (var propName in props) {\n            applyStyleProp(el, propName, props[propName]);\n        }\n    }\n    function applyStyleProp(el, name, val) {\n        if (val == null) {\n            el.style[name] = '';\n        }\n        else if (typeof val === 'number' && PIXEL_PROP_RE.test(name)) {\n            el.style[name] = val + 'px';\n        }\n        else {\n            el.style[name] = val;\n        }\n    }\n\n    function pointInsideRect(point, rect) {\n        return point.left >= rect.left &&\n            point.left < rect.right &&\n            point.top >= rect.top &&\n            point.top < rect.bottom;\n    }\n    // Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\n    function intersectRects(rect1, rect2) {\n        var res = {\n            left: Math.max(rect1.left, rect2.left),\n            right: Math.min(rect1.right, rect2.right),\n            top: Math.max(rect1.top, rect2.top),\n            bottom: Math.min(rect1.bottom, rect2.bottom)\n        };\n        if (res.left < res.right && res.top < res.bottom) {\n            return res;\n        }\n        return false;\n    }\n    function translateRect(rect, deltaX, deltaY) {\n        return {\n            left: rect.left + deltaX,\n            right: rect.right + deltaX,\n            top: rect.top + deltaY,\n            bottom: rect.bottom + deltaY\n        };\n    }\n    // Returns a new point that will have been moved to reside within the given rectangle\n    function constrainPoint(point, rect) {\n        return {\n            left: Math.min(Math.max(point.left, rect.left), rect.right),\n            top: Math.min(Math.max(point.top, rect.top), rect.bottom)\n        };\n    }\n    // Returns a point that is the center of the given rectangle\n    function getRectCenter(rect) {\n        return {\n            left: (rect.left + rect.right) / 2,\n            top: (rect.top + rect.bottom) / 2\n        };\n    }\n    // Subtracts point2's coordinates from point1's coordinates, returning a delta\n    function diffPoints(point1, point2) {\n        return {\n            left: point1.left - point2.left,\n            top: point1.top - point2.top\n        };\n    }\n\n    // Logic for determining if, when the element is right-to-left, the scrollbar appears on the left side\n    var isRtlScrollbarOnLeft = null;\n    function getIsRtlScrollbarOnLeft() {\n        if (isRtlScrollbarOnLeft === null) {\n            isRtlScrollbarOnLeft = computeIsRtlScrollbarOnLeft();\n        }\n        return isRtlScrollbarOnLeft;\n    }\n    function computeIsRtlScrollbarOnLeft() {\n        var outerEl = createElement('div', {\n            style: {\n                position: 'absolute',\n                top: -1000,\n                left: 0,\n                border: 0,\n                padding: 0,\n                overflow: 'scroll',\n                direction: 'rtl'\n            }\n        }, '<div></div>');\n        document.body.appendChild(outerEl);\n        var innerEl = outerEl.firstChild;\n        var res = innerEl.getBoundingClientRect().left > outerEl.getBoundingClientRect().left;\n        removeElement(outerEl);\n        return res;\n    }\n    // The scrollbar width computations in computeEdges are sometimes flawed when it comes to\n    // retina displays, rounding, and IE11. Massage them into a usable value.\n    function sanitizeScrollbarWidth(width) {\n        width = Math.max(0, width); // no negatives\n        width = Math.round(width);\n        return width;\n    }\n\n    function computeEdges(el, getPadding) {\n        if (getPadding === void 0) { getPadding = false; }\n        var computedStyle = window.getComputedStyle(el);\n        var borderLeft = parseInt(computedStyle.borderLeftWidth, 10) || 0;\n        var borderRight = parseInt(computedStyle.borderRightWidth, 10) || 0;\n        var borderTop = parseInt(computedStyle.borderTopWidth, 10) || 0;\n        var borderBottom = parseInt(computedStyle.borderBottomWidth, 10) || 0;\n        var scrollbarLeftRight = sanitizeScrollbarWidth(el.offsetWidth - el.clientWidth - borderLeft - borderRight);\n        var scrollbarBottom = sanitizeScrollbarWidth(el.offsetHeight - el.clientHeight - borderTop - borderBottom);\n        var res = {\n            borderLeft: borderLeft,\n            borderRight: borderRight,\n            borderTop: borderTop,\n            borderBottom: borderBottom,\n            scrollbarBottom: scrollbarBottom,\n            scrollbarLeft: 0,\n            scrollbarRight: 0\n        };\n        if (getIsRtlScrollbarOnLeft() && computedStyle.direction === 'rtl') { // is the scrollbar on the left side?\n            res.scrollbarLeft = scrollbarLeftRight;\n        }\n        else {\n            res.scrollbarRight = scrollbarLeftRight;\n        }\n        if (getPadding) {\n            res.paddingLeft = parseInt(computedStyle.paddingLeft, 10) || 0;\n            res.paddingRight = parseInt(computedStyle.paddingRight, 10) || 0;\n            res.paddingTop = parseInt(computedStyle.paddingTop, 10) || 0;\n            res.paddingBottom = parseInt(computedStyle.paddingBottom, 10) || 0;\n        }\n        return res;\n    }\n    function computeInnerRect(el, goWithinPadding) {\n        if (goWithinPadding === void 0) { goWithinPadding = false; }\n        var outerRect = computeRect(el);\n        var edges = computeEdges(el, goWithinPadding);\n        var res = {\n            left: outerRect.left + edges.borderLeft + edges.scrollbarLeft,\n            right: outerRect.right - edges.borderRight - edges.scrollbarRight,\n            top: outerRect.top + edges.borderTop,\n            bottom: outerRect.bottom - edges.borderBottom - edges.scrollbarBottom\n        };\n        if (goWithinPadding) {\n            res.left += edges.paddingLeft;\n            res.right -= edges.paddingRight;\n            res.top += edges.paddingTop;\n            res.bottom -= edges.paddingBottom;\n        }\n        return res;\n    }\n    function computeRect(el) {\n        var rect = el.getBoundingClientRect();\n        return {\n            left: rect.left + window.pageXOffset,\n            top: rect.top + window.pageYOffset,\n            right: rect.right + window.pageXOffset,\n            bottom: rect.bottom + window.pageYOffset\n        };\n    }\n    function computeViewportRect() {\n        return {\n            left: window.pageXOffset,\n            right: window.pageXOffset + document.documentElement.clientWidth,\n            top: window.pageYOffset,\n            bottom: window.pageYOffset + document.documentElement.clientHeight\n        };\n    }\n    function computeHeightAndMargins(el) {\n        var computed = window.getComputedStyle(el);\n        return el.getBoundingClientRect().height +\n            parseInt(computed.marginTop, 10) +\n            parseInt(computed.marginBottom, 10);\n    }\n    // does not return window\n    function getClippingParents(el) {\n        var parents = [];\n        while (el instanceof HTMLElement) { // will stop when gets to document or null\n            var computedStyle = window.getComputedStyle(el);\n            if (computedStyle.position === 'fixed') {\n                break;\n            }\n            if ((/(auto|scroll)/).test(computedStyle.overflow + computedStyle.overflowY + computedStyle.overflowX)) {\n                parents.push(el);\n            }\n            el = el.parentNode;\n        }\n        return parents;\n    }\n    function computeClippingRect(el) {\n        return getClippingParents(el)\n            .map(function (el) {\n            return computeInnerRect(el);\n        })\n            .concat(computeViewportRect())\n            .reduce(function (rect0, rect1) {\n            return intersectRects(rect0, rect1) || rect1; // should always intersect\n        });\n    }\n\n    // Stops a mouse/touch event from doing it's native browser action\n    function preventDefault(ev) {\n        ev.preventDefault();\n    }\n    // Event Delegation\n    // ----------------------------------------------------------------------------------------------------------------\n    function listenBySelector(container, eventType, selector, handler) {\n        function realHandler(ev) {\n            var matchedChild = elementClosest(ev.target, selector);\n            if (matchedChild) {\n                handler.call(matchedChild, ev, matchedChild);\n            }\n        }\n        container.addEventListener(eventType, realHandler);\n        return function () {\n            container.removeEventListener(eventType, realHandler);\n        };\n    }\n    function listenToHoverBySelector(container, selector, onMouseEnter, onMouseLeave) {\n        var currentMatchedChild;\n        return listenBySelector(container, 'mouseover', selector, function (ev, matchedChild) {\n            if (matchedChild !== currentMatchedChild) {\n                currentMatchedChild = matchedChild;\n                onMouseEnter(ev, matchedChild);\n                var realOnMouseLeave_1 = function (ev) {\n                    currentMatchedChild = null;\n                    onMouseLeave(ev, matchedChild);\n                    matchedChild.removeEventListener('mouseleave', realOnMouseLeave_1);\n                };\n                // listen to the next mouseleave, and then unattach\n                matchedChild.addEventListener('mouseleave', realOnMouseLeave_1);\n            }\n        });\n    }\n    // Animation\n    // ----------------------------------------------------------------------------------------------------------------\n    var transitionEventNames = [\n        'webkitTransitionEnd',\n        'otransitionend',\n        'oTransitionEnd',\n        'msTransitionEnd',\n        'transitionend'\n    ];\n    // triggered only when the next single subsequent transition finishes\n    function whenTransitionDone(el, callback) {\n        var realCallback = function (ev) {\n            callback(ev);\n            transitionEventNames.forEach(function (eventName) {\n                el.removeEventListener(eventName, realCallback);\n            });\n        };\n        transitionEventNames.forEach(function (eventName) {\n            el.addEventListener(eventName, realCallback); // cross-browser way to determine when the transition finishes\n        });\n    }\n\n    var DAY_IDS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\n    // Adding\n    function addWeeks(m, n) {\n        var a = dateToUtcArray(m);\n        a[2] += n * 7;\n        return arrayToUtcDate(a);\n    }\n    function addDays(m, n) {\n        var a = dateToUtcArray(m);\n        a[2] += n;\n        return arrayToUtcDate(a);\n    }\n    function addMs(m, n) {\n        var a = dateToUtcArray(m);\n        a[6] += n;\n        return arrayToUtcDate(a);\n    }\n    // Diffing (all return floats)\n    function diffWeeks(m0, m1) {\n        return diffDays(m0, m1) / 7;\n    }\n    function diffDays(m0, m1) {\n        return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60 * 24);\n    }\n    function diffHours(m0, m1) {\n        return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60);\n    }\n    function diffMinutes(m0, m1) {\n        return (m1.valueOf() - m0.valueOf()) / (1000 * 60);\n    }\n    function diffSeconds(m0, m1) {\n        return (m1.valueOf() - m0.valueOf()) / 1000;\n    }\n    function diffDayAndTime(m0, m1) {\n        var m0day = startOfDay(m0);\n        var m1day = startOfDay(m1);\n        return {\n            years: 0,\n            months: 0,\n            days: Math.round(diffDays(m0day, m1day)),\n            milliseconds: (m1.valueOf() - m1day.valueOf()) - (m0.valueOf() - m0day.valueOf())\n        };\n    }\n    // Diffing Whole Units\n    function diffWholeWeeks(m0, m1) {\n        var d = diffWholeDays(m0, m1);\n        if (d !== null && d % 7 === 0) {\n            return d / 7;\n        }\n        return null;\n    }\n    function diffWholeDays(m0, m1) {\n        if (timeAsMs(m0) === timeAsMs(m1)) {\n            return Math.round(diffDays(m0, m1));\n        }\n        return null;\n    }\n    // Start-Of\n    function startOfDay(m) {\n        return arrayToUtcDate([\n            m.getUTCFullYear(),\n            m.getUTCMonth(),\n            m.getUTCDate()\n        ]);\n    }\n    function startOfHour(m) {\n        return arrayToUtcDate([\n            m.getUTCFullYear(),\n            m.getUTCMonth(),\n            m.getUTCDate(),\n            m.getUTCHours()\n        ]);\n    }\n    function startOfMinute(m) {\n        return arrayToUtcDate([\n            m.getUTCFullYear(),\n            m.getUTCMonth(),\n            m.getUTCDate(),\n            m.getUTCHours(),\n            m.getUTCMinutes()\n        ]);\n    }\n    function startOfSecond(m) {\n        return arrayToUtcDate([\n            m.getUTCFullYear(),\n            m.getUTCMonth(),\n            m.getUTCDate(),\n            m.getUTCHours(),\n            m.getUTCMinutes(),\n            m.getUTCSeconds()\n        ]);\n    }\n    // Week Computation\n    function weekOfYear(marker, dow, doy) {\n        var y = marker.getUTCFullYear();\n        var w = weekOfGivenYear(marker, y, dow, doy);\n        if (w < 1) {\n            return weekOfGivenYear(marker, y - 1, dow, doy);\n        }\n        var nextW = weekOfGivenYear(marker, y + 1, dow, doy);\n        if (nextW >= 1) {\n            return Math.min(w, nextW);\n        }\n        return w;\n    }\n    function weekOfGivenYear(marker, year, dow, doy) {\n        var firstWeekStart = arrayToUtcDate([year, 0, 1 + firstWeekOffset(year, dow, doy)]);\n        var dayStart = startOfDay(marker);\n        var days = Math.round(diffDays(firstWeekStart, dayStart));\n        return Math.floor(days / 7) + 1; // zero-indexed\n    }\n    // start-of-first-week - start-of-year\n    function firstWeekOffset(year, dow, doy) {\n        // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n        var fwd = 7 + dow - doy;\n        // first-week day local weekday -- which local weekday is fwd\n        var fwdlw = (7 + arrayToUtcDate([year, 0, fwd]).getUTCDay() - dow) % 7;\n        return -fwdlw + fwd - 1;\n    }\n    // Array Conversion\n    function dateToLocalArray(date) {\n        return [\n            date.getFullYear(),\n            date.getMonth(),\n            date.getDate(),\n            date.getHours(),\n            date.getMinutes(),\n            date.getSeconds(),\n            date.getMilliseconds()\n        ];\n    }\n    function arrayToLocalDate(a) {\n        return new Date(a[0], a[1] || 0, a[2] == null ? 1 : a[2], // day of month\n        a[3] || 0, a[4] || 0, a[5] || 0);\n    }\n    function dateToUtcArray(date) {\n        return [\n            date.getUTCFullYear(),\n            date.getUTCMonth(),\n            date.getUTCDate(),\n            date.getUTCHours(),\n            date.getUTCMinutes(),\n            date.getUTCSeconds(),\n            date.getUTCMilliseconds()\n        ];\n    }\n    function arrayToUtcDate(a) {\n        // according to web standards (and Safari), a month index is required.\n        // massage if only given a year.\n        if (a.length === 1) {\n            a = a.concat([0]);\n        }\n        return new Date(Date.UTC.apply(Date, a));\n    }\n    // Other Utils\n    function isValidDate(m) {\n        return !isNaN(m.valueOf());\n    }\n    function timeAsMs(m) {\n        return m.getUTCHours() * 1000 * 60 * 60 +\n            m.getUTCMinutes() * 1000 * 60 +\n            m.getUTCSeconds() * 1000 +\n            m.getUTCMilliseconds();\n    }\n\n    var INTERNAL_UNITS = ['years', 'months', 'days', 'milliseconds'];\n    var PARSE_RE = /^(-?)(?:(\\d+)\\.)?(\\d+):(\\d\\d)(?::(\\d\\d)(?:\\.(\\d\\d\\d))?)?/;\n    // Parsing and Creation\n    function createDuration(input, unit) {\n        var _a;\n        if (typeof input === 'string') {\n            return parseString(input);\n        }\n        else if (typeof input === 'object' && input) { // non-null object\n            return normalizeObject(input);\n        }\n        else if (typeof input === 'number') {\n            return normalizeObject((_a = {}, _a[unit || 'milliseconds'] = input, _a));\n        }\n        else {\n            return null;\n        }\n    }\n    function parseString(s) {\n        var m = PARSE_RE.exec(s);\n        if (m) {\n            var sign = m[1] ? -1 : 1;\n            return {\n                years: 0,\n                months: 0,\n                days: sign * (m[2] ? parseInt(m[2], 10) : 0),\n                milliseconds: sign * ((m[3] ? parseInt(m[3], 10) : 0) * 60 * 60 * 1000 + // hours\n                    (m[4] ? parseInt(m[4], 10) : 0) * 60 * 1000 + // minutes\n                    (m[5] ? parseInt(m[5], 10) : 0) * 1000 + // seconds\n                    (m[6] ? parseInt(m[6], 10) : 0) // ms\n                )\n            };\n        }\n        return null;\n    }\n    function normalizeObject(obj) {\n        return {\n            years: obj.years || obj.year || 0,\n            months: obj.months || obj.month || 0,\n            days: (obj.days || obj.day || 0) +\n                getWeeksFromInput(obj) * 7,\n            milliseconds: (obj.hours || obj.hour || 0) * 60 * 60 * 1000 + // hours\n                (obj.minutes || obj.minute || 0) * 60 * 1000 + // minutes\n                (obj.seconds || obj.second || 0) * 1000 + // seconds\n                (obj.milliseconds || obj.millisecond || obj.ms || 0) // ms\n        };\n    }\n    function getWeeksFromInput(obj) {\n        return obj.weeks || obj.week || 0;\n    }\n    // Equality\n    function durationsEqual(d0, d1) {\n        return d0.years === d1.years &&\n            d0.months === d1.months &&\n            d0.days === d1.days &&\n            d0.milliseconds === d1.milliseconds;\n    }\n    function isSingleDay(dur) {\n        return dur.years === 0 && dur.months === 0 && dur.days === 1 && dur.milliseconds === 0;\n    }\n    // Simple Math\n    function addDurations(d0, d1) {\n        return {\n            years: d0.years + d1.years,\n            months: d0.months + d1.months,\n            days: d0.days + d1.days,\n            milliseconds: d0.milliseconds + d1.milliseconds\n        };\n    }\n    function subtractDurations(d1, d0) {\n        return {\n            years: d1.years - d0.years,\n            months: d1.months - d0.months,\n            days: d1.days - d0.days,\n            milliseconds: d1.milliseconds - d0.milliseconds\n        };\n    }\n    function multiplyDuration(d, n) {\n        return {\n            years: d.years * n,\n            months: d.months * n,\n            days: d.days * n,\n            milliseconds: d.milliseconds * n\n        };\n    }\n    // Conversions\n    // \"Rough\" because they are based on average-case Gregorian months/years\n    function asRoughYears(dur) {\n        return asRoughDays(dur) / 365;\n    }\n    function asRoughMonths(dur) {\n        return asRoughDays(dur) / 30;\n    }\n    function asRoughDays(dur) {\n        return asRoughMs(dur) / 864e5;\n    }\n    function asRoughMinutes(dur) {\n        return asRoughMs(dur) / (1000 * 60);\n    }\n    function asRoughSeconds(dur) {\n        return asRoughMs(dur) / 1000;\n    }\n    function asRoughMs(dur) {\n        return dur.years * (365 * 864e5) +\n            dur.months * (30 * 864e5) +\n            dur.days * 864e5 +\n            dur.milliseconds;\n    }\n    // Advanced Math\n    function wholeDivideDurations(numerator, denominator) {\n        var res = null;\n        for (var i = 0; i < INTERNAL_UNITS.length; i++) {\n            var unit = INTERNAL_UNITS[i];\n            if (denominator[unit]) {\n                var localRes = numerator[unit] / denominator[unit];\n                if (!isInt(localRes) || (res !== null && res !== localRes)) {\n                    return null;\n                }\n                res = localRes;\n            }\n            else if (numerator[unit]) {\n                // needs to divide by something but can't!\n                return null;\n            }\n        }\n        return res;\n    }\n    function greatestDurationDenominator(dur, dontReturnWeeks) {\n        var ms = dur.milliseconds;\n        if (ms) {\n            if (ms % 1000 !== 0) {\n                return { unit: 'millisecond', value: ms };\n            }\n            if (ms % (1000 * 60) !== 0) {\n                return { unit: 'second', value: ms / 1000 };\n            }\n            if (ms % (1000 * 60 * 60) !== 0) {\n                return { unit: 'minute', value: ms / (1000 * 60) };\n            }\n            if (ms) {\n                return { unit: 'hour', value: ms / (1000 * 60 * 60) };\n            }\n        }\n        if (dur.days) {\n            if (!dontReturnWeeks && dur.days % 7 === 0) {\n                return { unit: 'week', value: dur.days / 7 };\n            }\n            return { unit: 'day', value: dur.days };\n        }\n        if (dur.months) {\n            return { unit: 'month', value: dur.months };\n        }\n        if (dur.years) {\n            return { unit: 'year', value: dur.years };\n        }\n        return { unit: 'millisecond', value: 0 };\n    }\n\n    /* FullCalendar-specific DOM Utilities\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // Given the scrollbar widths of some other container, create borders/margins on rowEls in order to match the left\n    // and right space that was offset by the scrollbars. A 1-pixel border first, then margin beyond that.\n    function compensateScroll(rowEl, scrollbarWidths) {\n        if (scrollbarWidths.left) {\n            applyStyle(rowEl, {\n                borderLeftWidth: 1,\n                marginLeft: scrollbarWidths.left - 1\n            });\n        }\n        if (scrollbarWidths.right) {\n            applyStyle(rowEl, {\n                borderRightWidth: 1,\n                marginRight: scrollbarWidths.right - 1\n            });\n        }\n    }\n    // Undoes compensateScroll and restores all borders/margins\n    function uncompensateScroll(rowEl) {\n        applyStyle(rowEl, {\n            marginLeft: '',\n            marginRight: '',\n            borderLeftWidth: '',\n            borderRightWidth: ''\n        });\n    }\n    // Make the mouse cursor express that an event is not allowed in the current area\n    function disableCursor() {\n        document.body.classList.add('fc-not-allowed');\n    }\n    // Returns the mouse cursor to its original look\n    function enableCursor() {\n        document.body.classList.remove('fc-not-allowed');\n    }\n    // Given a total available height to fill, have `els` (essentially child rows) expand to accomodate.\n    // By default, all elements that are shorter than the recommended height are expanded uniformly, not considering\n    // any other els that are already too tall. if `shouldRedistribute` is on, it considers these tall rows and\n    // reduces the available height.\n    function distributeHeight(els, availableHeight, shouldRedistribute) {\n        // *FLOORING NOTE*: we floor in certain places because zoom can give inaccurate floating-point dimensions,\n        // and it is better to be shorter than taller, to avoid creating unnecessary scrollbars.\n        var minOffset1 = Math.floor(availableHeight / els.length); // for non-last element\n        var minOffset2 = Math.floor(availableHeight - minOffset1 * (els.length - 1)); // for last element *FLOORING NOTE*\n        var flexEls = []; // elements that are allowed to expand. array of DOM nodes\n        var flexOffsets = []; // amount of vertical space it takes up\n        var flexHeights = []; // actual css height\n        var usedHeight = 0;\n        undistributeHeight(els); // give all elements their natural height\n        // find elements that are below the recommended height (expandable).\n        // important to query for heights in a single first pass (to avoid reflow oscillation).\n        els.forEach(function (el, i) {\n            var minOffset = i === els.length - 1 ? minOffset2 : minOffset1;\n            var naturalOffset = computeHeightAndMargins(el);\n            if (naturalOffset < minOffset) {\n                flexEls.push(el);\n                flexOffsets.push(naturalOffset);\n                flexHeights.push(el.offsetHeight);\n            }\n            else {\n                // this element stretches past recommended height (non-expandable). mark the space as occupied.\n                usedHeight += naturalOffset;\n            }\n        });\n        // readjust the recommended height to only consider the height available to non-maxed-out rows.\n        if (shouldRedistribute) {\n            availableHeight -= usedHeight;\n            minOffset1 = Math.floor(availableHeight / flexEls.length);\n            minOffset2 = Math.floor(availableHeight - minOffset1 * (flexEls.length - 1)); // *FLOORING NOTE*\n        }\n        // assign heights to all expandable elements\n        flexEls.forEach(function (el, i) {\n            var minOffset = i === flexEls.length - 1 ? minOffset2 : minOffset1;\n            var naturalOffset = flexOffsets[i];\n            var naturalHeight = flexHeights[i];\n            var newHeight = minOffset - (naturalOffset - naturalHeight); // subtract the margin/padding\n            if (naturalOffset < minOffset) { // we check this again because redistribution might have changed things\n                el.style.height = newHeight + 'px';\n            }\n        });\n    }\n    // Undoes distrubuteHeight, restoring all els to their natural height\n    function undistributeHeight(els) {\n        els.forEach(function (el) {\n            el.style.height = '';\n        });\n    }\n    // Given `els`, a set of <td> cells, find the cell with the largest natural width and set the widths of all the\n    // cells to be that width.\n    // PREREQUISITE: if you want a cell to take up width, it needs to have a single inner element w/ display:inline\n    function matchCellWidths(els) {\n        var maxInnerWidth = 0;\n        els.forEach(function (el) {\n            var innerEl = el.firstChild; // hopefully an element\n            if (innerEl instanceof HTMLElement) {\n                var innerWidth_1 = innerEl.offsetWidth;\n                if (innerWidth_1 > maxInnerWidth) {\n                    maxInnerWidth = innerWidth_1;\n                }\n            }\n        });\n        maxInnerWidth++; // sometimes not accurate of width the text needs to stay on one line. insurance\n        els.forEach(function (el) {\n            el.style.width = maxInnerWidth + 'px';\n        });\n        return maxInnerWidth;\n    }\n    // Given one element that resides inside another,\n    // Subtracts the height of the inner element from the outer element.\n    function subtractInnerElHeight(outerEl, innerEl) {\n        // effin' IE8/9/10/11 sometimes returns 0 for dimensions. this weird hack was the only thing that worked\n        var reflowStyleProps = {\n            position: 'relative',\n            left: -1 // ensure reflow in case the el was already relative. negative is less likely to cause new scroll\n        };\n        applyStyle(outerEl, reflowStyleProps);\n        applyStyle(innerEl, reflowStyleProps);\n        var diff = outerEl.offsetHeight - innerEl.offsetHeight; // grab the dimensions\n        // undo hack\n        var resetStyleProps = { position: '', left: '' };\n        applyStyle(outerEl, resetStyleProps);\n        applyStyle(innerEl, resetStyleProps);\n        return diff;\n    }\n    /* Selection\n    ----------------------------------------------------------------------------------------------------------------------*/\n    function preventSelection(el) {\n        el.classList.add('fc-unselectable');\n        el.addEventListener('selectstart', preventDefault);\n    }\n    function allowSelection(el) {\n        el.classList.remove('fc-unselectable');\n        el.removeEventListener('selectstart', preventDefault);\n    }\n    /* Context Menu\n    ----------------------------------------------------------------------------------------------------------------------*/\n    function preventContextMenu(el) {\n        el.addEventListener('contextmenu', preventDefault);\n    }\n    function allowContextMenu(el) {\n        el.removeEventListener('contextmenu', preventDefault);\n    }\n    /* Object Ordering by Field\n    ----------------------------------------------------------------------------------------------------------------------*/\n    function parseFieldSpecs(input) {\n        var specs = [];\n        var tokens = [];\n        var i;\n        var token;\n        if (typeof input === 'string') {\n            tokens = input.split(/\\s*,\\s*/);\n        }\n        else if (typeof input === 'function') {\n            tokens = [input];\n        }\n        else if (Array.isArray(input)) {\n            tokens = input;\n        }\n        for (i = 0; i < tokens.length; i++) {\n            token = tokens[i];\n            if (typeof token === 'string') {\n                specs.push(token.charAt(0) === '-' ?\n                    { field: token.substring(1), order: -1 } :\n                    { field: token, order: 1 });\n            }\n            else if (typeof token === 'function') {\n                specs.push({ func: token });\n            }\n        }\n        return specs;\n    }\n    function compareByFieldSpecs(obj0, obj1, fieldSpecs) {\n        var i;\n        var cmp;\n        for (i = 0; i < fieldSpecs.length; i++) {\n            cmp = compareByFieldSpec(obj0, obj1, fieldSpecs[i]);\n            if (cmp) {\n                return cmp;\n            }\n        }\n        return 0;\n    }\n    function compareByFieldSpec(obj0, obj1, fieldSpec) {\n        if (fieldSpec.func) {\n            return fieldSpec.func(obj0, obj1);\n        }\n        return flexibleCompare(obj0[fieldSpec.field], obj1[fieldSpec.field])\n            * (fieldSpec.order || 1);\n    }\n    function flexibleCompare(a, b) {\n        if (!a && !b) {\n            return 0;\n        }\n        if (b == null) {\n            return -1;\n        }\n        if (a == null) {\n            return 1;\n        }\n        if (typeof a === 'string' || typeof b === 'string') {\n            return String(a).localeCompare(String(b));\n        }\n        return a - b;\n    }\n    /* String Utilities\n    ----------------------------------------------------------------------------------------------------------------------*/\n    function capitaliseFirstLetter(str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    }\n    function padStart(val, len) {\n        var s = String(val);\n        return '000'.substr(0, len - s.length) + s;\n    }\n    /* Number Utilities\n    ----------------------------------------------------------------------------------------------------------------------*/\n    function compareNumbers(a, b) {\n        return a - b;\n    }\n    function isInt(n) {\n        return n % 1 === 0;\n    }\n    /* Weird Utilities\n    ----------------------------------------------------------------------------------------------------------------------*/\n    function applyAll(functions, thisObj, args) {\n        if (typeof functions === 'function') { // supplied a single function\n            functions = [functions];\n        }\n        if (functions) {\n            var i = void 0;\n            var ret = void 0;\n            for (i = 0; i < functions.length; i++) {\n                ret = functions[i].apply(thisObj, args) || ret;\n            }\n            return ret;\n        }\n    }\n    function firstDefined() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        for (var i = 0; i < args.length; i++) {\n            if (args[i] !== undefined) {\n                return args[i];\n            }\n        }\n    }\n    // Returns a function, that, as long as it continues to be invoked, will not\n    // be triggered. The function will be called after it stops being called for\n    // N milliseconds. If `immediate` is passed, trigger the function on the\n    // leading edge, instead of the trailing.\n    // https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714\n    function debounce(func, wait) {\n        var timeout;\n        var args;\n        var context;\n        var timestamp;\n        var result;\n        var later = function () {\n            var last = new Date().valueOf() - timestamp;\n            if (last < wait) {\n                timeout = setTimeout(later, wait - last);\n            }\n            else {\n                timeout = null;\n                result = func.apply(context, args);\n                context = args = null;\n            }\n        };\n        return function () {\n            context = this;\n            args = arguments;\n            timestamp = new Date().valueOf();\n            if (!timeout) {\n                timeout = setTimeout(later, wait);\n            }\n            return result;\n        };\n    }\n    // Number and Boolean are only types that defaults or not computed for\n    // TODO: write more comments\n    function refineProps(rawProps, processors, defaults, leftoverProps) {\n        if (defaults === void 0) { defaults = {}; }\n        var refined = {};\n        for (var key in processors) {\n            var processor = processors[key];\n            if (rawProps[key] !== undefined) {\n                // found\n                if (processor === Function) {\n                    refined[key] = typeof rawProps[key] === 'function' ? rawProps[key] : null;\n                }\n                else if (processor) { // a refining function?\n                    refined[key] = processor(rawProps[key]);\n                }\n                else {\n                    refined[key] = rawProps[key];\n                }\n            }\n            else if (defaults[key] !== undefined) {\n                // there's an explicit default\n                refined[key] = defaults[key];\n            }\n            else {\n                // must compute a default\n                if (processor === String) {\n                    refined[key] = ''; // empty string is default for String\n                }\n                else if (!processor || processor === Number || processor === Boolean || processor === Function) {\n                    refined[key] = null; // assign null for other non-custom processor funcs\n                }\n                else {\n                    refined[key] = processor(null); // run the custom processor func\n                }\n            }\n        }\n        if (leftoverProps) {\n            for (var key in rawProps) {\n                if (processors[key] === undefined) {\n                    leftoverProps[key] = rawProps[key];\n                }\n            }\n        }\n        return refined;\n    }\n    /*\n    Get a snapshot of an object, so we can compare it to later revisions.\n    Intentionally only works with arrays, jaja\n    */\n    function freezeRaw(raw) {\n        if (Array.isArray(raw)) {\n            return Array.prototype.slice.call(raw);\n        }\n        return raw;\n    }\n    /* Date stuff that doesn't belong in datelib core\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // given a timed range, computes an all-day range that has the same exact duration,\n    // but whose start time is aligned with the start of the day.\n    function computeAlignedDayRange(timedRange) {\n        var dayCnt = Math.floor(diffDays(timedRange.start, timedRange.end)) || 1;\n        var start = startOfDay(timedRange.start);\n        var end = addDays(start, dayCnt);\n        return { start: start, end: end };\n    }\n    // given a timed range, computes an all-day range based on how for the end date bleeds into the next day\n    // TODO: give nextDayThreshold a default arg\n    function computeVisibleDayRange(timedRange, nextDayThreshold) {\n        if (nextDayThreshold === void 0) { nextDayThreshold = createDuration(0); }\n        var startDay = null;\n        var endDay = null;\n        if (timedRange.end) {\n            endDay = startOfDay(timedRange.end);\n            var endTimeMS = timedRange.end.valueOf() - endDay.valueOf(); // # of milliseconds into `endDay`\n            // If the end time is actually inclusively part of the next day and is equal to or\n            // beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\n            // Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\n            if (endTimeMS && endTimeMS >= asRoughMs(nextDayThreshold)) {\n                endDay = addDays(endDay, 1);\n            }\n        }\n        if (timedRange.start) {\n            startDay = startOfDay(timedRange.start); // the beginning of the day the range starts\n            // If end is within `startDay` but not past nextDayThreshold, assign the default duration of one day.\n            if (endDay && endDay <= startDay) {\n                endDay = addDays(startDay, 1);\n            }\n        }\n        return { start: startDay, end: endDay };\n    }\n    // spans from one day into another?\n    function isMultiDayRange(range) {\n        var visibleRange = computeVisibleDayRange(range);\n        return diffDays(visibleRange.start, visibleRange.end) > 1;\n    }\n    function diffDates(date0, date1, dateEnv, largeUnit) {\n        if (largeUnit === 'year') {\n            return createDuration(dateEnv.diffWholeYears(date0, date1), 'year');\n        }\n        else if (largeUnit === 'month') {\n            return createDuration(dateEnv.diffWholeMonths(date0, date1), 'month');\n        }\n        else {\n            return diffDayAndTime(date0, date1); // returns a duration\n        }\n    }\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    function parseRecurring(eventInput, allDayDefault, dateEnv, recurringTypes, leftovers) {\n        for (var i = 0; i < recurringTypes.length; i++) {\n            var localLeftovers = {};\n            var parsed = recurringTypes[i].parse(eventInput, localLeftovers, dateEnv);\n            if (parsed) {\n                var allDay = localLeftovers.allDay;\n                delete localLeftovers.allDay; // remove from leftovers\n                if (allDay == null) {\n                    allDay = allDayDefault;\n                    if (allDay == null) {\n                        allDay = parsed.allDayGuess;\n                        if (allDay == null) {\n                            allDay = false;\n                        }\n                    }\n                }\n                __assign(leftovers, localLeftovers);\n                return {\n                    allDay: allDay,\n                    duration: parsed.duration,\n                    typeData: parsed.typeData,\n                    typeId: i\n                };\n            }\n        }\n        return null;\n    }\n    /*\n    Event MUST have a recurringDef\n    */\n    function expandRecurringRanges(eventDef, framingRange, dateEnv, recurringTypes) {\n        var typeDef = recurringTypes[eventDef.recurringDef.typeId];\n        var markers = typeDef.expand(eventDef.recurringDef.typeData, framingRange, dateEnv);\n        // the recurrence plugins don't guarantee that all-day events are start-of-day, so we have to\n        if (eventDef.allDay) {\n            markers = markers.map(startOfDay);\n        }\n        return markers;\n    }\n\n    // Merges an array of objects into a single object.\n    // The second argument allows for an array of property names who's object values will be merged together.\n    function mergeProps(propObjs, complexProps) {\n        var dest = {};\n        var i;\n        var name;\n        var complexObjs;\n        var j;\n        var val;\n        var props;\n        if (complexProps) {\n            for (i = 0; i < complexProps.length; i++) {\n                name = complexProps[i];\n                complexObjs = [];\n                // collect the trailing object values, stopping when a non-object is discovered\n                for (j = propObjs.length - 1; j >= 0; j--) {\n                    val = propObjs[j][name];\n                    if (typeof val === 'object' && val) { // non-null object\n                        complexObjs.unshift(val);\n                    }\n                    else if (val !== undefined) {\n                        dest[name] = val; // if there were no objects, this value will be used\n                        break;\n                    }\n                }\n                // if the trailing values were objects, use the merged value\n                if (complexObjs.length) {\n                    dest[name] = mergeProps(complexObjs);\n                }\n            }\n        }\n        // copy values into the destination, going from last to first\n        for (i = propObjs.length - 1; i >= 0; i--) {\n            props = propObjs[i];\n            for (name in props) {\n                if (!(name in dest)) { // if already assigned by previous props or complex props, don't reassign\n                    dest[name] = props[name];\n                }\n            }\n        }\n        return dest;\n    }\n    function filterHash(hash, func) {\n        var filtered = {};\n        for (var key in hash) {\n            if (func(hash[key], key)) {\n                filtered[key] = hash[key];\n            }\n        }\n        return filtered;\n    }\n    function mapHash(hash, func) {\n        var newHash = {};\n        for (var key in hash) {\n            newHash[key] = func(hash[key], key);\n        }\n        return newHash;\n    }\n    function arrayToHash(a) {\n        var hash = {};\n        for (var _i = 0, a_1 = a; _i < a_1.length; _i++) {\n            var item = a_1[_i];\n            hash[item] = true;\n        }\n        return hash;\n    }\n    function hashValuesToArray(obj) {\n        var a = [];\n        for (var key in obj) {\n            a.push(obj[key]);\n        }\n        return a;\n    }\n\n    function parseEvents(rawEvents, sourceId, calendar, allowOpenRange) {\n        var eventStore = createEmptyEventStore();\n        for (var _i = 0, rawEvents_1 = rawEvents; _i < rawEvents_1.length; _i++) {\n            var rawEvent = rawEvents_1[_i];\n            var tuple = parseEvent(rawEvent, sourceId, calendar, allowOpenRange);\n            if (tuple) {\n                eventTupleToStore(tuple, eventStore);\n            }\n        }\n        return eventStore;\n    }\n    function eventTupleToStore(tuple, eventStore) {\n        if (eventStore === void 0) { eventStore = createEmptyEventStore(); }\n        eventStore.defs[tuple.def.defId] = tuple.def;\n        if (tuple.instance) {\n            eventStore.instances[tuple.instance.instanceId] = tuple.instance;\n        }\n        return eventStore;\n    }\n    function expandRecurring(eventStore, framingRange, calendar) {\n        var dateEnv = calendar.dateEnv;\n        var defs = eventStore.defs, instances = eventStore.instances;\n        // remove existing recurring instances\n        instances = filterHash(instances, function (instance) {\n            return !defs[instance.defId].recurringDef;\n        });\n        for (var defId in defs) {\n            var def = defs[defId];\n            if (def.recurringDef) {\n                var starts = expandRecurringRanges(def, framingRange, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes);\n                var duration = def.recurringDef.duration;\n                if (!duration) {\n                    duration = def.allDay ?\n                        calendar.defaultAllDayEventDuration :\n                        calendar.defaultTimedEventDuration;\n                }\n                for (var _i = 0, starts_1 = starts; _i < starts_1.length; _i++) {\n                    var start = starts_1[_i];\n                    var instance = createEventInstance(defId, {\n                        start: start,\n                        end: dateEnv.add(start, duration)\n                    });\n                    instances[instance.instanceId] = instance;\n                }\n            }\n        }\n        return { defs: defs, instances: instances };\n    }\n    // retrieves events that have the same groupId as the instance specified by `instanceId`\n    // or they are the same as the instance.\n    // why might instanceId not be in the store? an event from another calendar?\n    function getRelevantEvents(eventStore, instanceId) {\n        var instance = eventStore.instances[instanceId];\n        if (instance) {\n            var def_1 = eventStore.defs[instance.defId];\n            // get events/instances with same group\n            var newStore = filterEventStoreDefs(eventStore, function (lookDef) {\n                return isEventDefsGrouped(def_1, lookDef);\n            });\n            // add the original\n            // TODO: wish we could use eventTupleToStore or something like it\n            newStore.defs[def_1.defId] = def_1;\n            newStore.instances[instance.instanceId] = instance;\n            return newStore;\n        }\n        return createEmptyEventStore();\n    }\n    function isEventDefsGrouped(def0, def1) {\n        return Boolean(def0.groupId && def0.groupId === def1.groupId);\n    }\n    function transformRawEvents(rawEvents, eventSource, calendar) {\n        var calEachTransform = calendar.opt('eventDataTransform');\n        var sourceEachTransform = eventSource ? eventSource.eventDataTransform : null;\n        if (sourceEachTransform) {\n            rawEvents = transformEachRawEvent(rawEvents, sourceEachTransform);\n        }\n        if (calEachTransform) {\n            rawEvents = transformEachRawEvent(rawEvents, calEachTransform);\n        }\n        return rawEvents;\n    }\n    function transformEachRawEvent(rawEvents, func) {\n        var refinedEvents;\n        if (!func) {\n            refinedEvents = rawEvents;\n        }\n        else {\n            refinedEvents = [];\n            for (var _i = 0, rawEvents_2 = rawEvents; _i < rawEvents_2.length; _i++) {\n                var rawEvent = rawEvents_2[_i];\n                var refinedEvent = func(rawEvent);\n                if (refinedEvent) {\n                    refinedEvents.push(refinedEvent);\n                }\n                else if (refinedEvent == null) {\n                    refinedEvents.push(rawEvent);\n                } // if a different falsy value, do nothing\n            }\n        }\n        return refinedEvents;\n    }\n    function createEmptyEventStore() {\n        return { defs: {}, instances: {} };\n    }\n    function mergeEventStores(store0, store1) {\n        return {\n            defs: __assign({}, store0.defs, store1.defs),\n            instances: __assign({}, store0.instances, store1.instances)\n        };\n    }\n    function filterEventStoreDefs(eventStore, filterFunc) {\n        var defs = filterHash(eventStore.defs, filterFunc);\n        var instances = filterHash(eventStore.instances, function (instance) {\n            return defs[instance.defId]; // still exists?\n        });\n        return { defs: defs, instances: instances };\n    }\n\n    function parseRange(input, dateEnv) {\n        var start = null;\n        var end = null;\n        if (input.start) {\n            start = dateEnv.createMarker(input.start);\n        }\n        if (input.end) {\n            end = dateEnv.createMarker(input.end);\n        }\n        if (!start && !end) {\n            return null;\n        }\n        if (start && end && end < start) {\n            return null;\n        }\n        return { start: start, end: end };\n    }\n    // SIDE-EFFECT: will mutate ranges.\n    // Will return a new array result.\n    function invertRanges(ranges, constraintRange) {\n        var invertedRanges = [];\n        var start = constraintRange.start; // the end of the previous range. the start of the new range\n        var i;\n        var dateRange;\n        // ranges need to be in order. required for our date-walking algorithm\n        ranges.sort(compareRanges);\n        for (i = 0; i < ranges.length; i++) {\n            dateRange = ranges[i];\n            // add the span of time before the event (if there is any)\n            if (dateRange.start > start) { // compare millisecond time (skip any ambig logic)\n                invertedRanges.push({ start: start, end: dateRange.start });\n            }\n            if (dateRange.end > start) {\n                start = dateRange.end;\n            }\n        }\n        // add the span of time after the last event (if there is any)\n        if (start < constraintRange.end) { // compare millisecond time (skip any ambig logic)\n            invertedRanges.push({ start: start, end: constraintRange.end });\n        }\n        return invertedRanges;\n    }\n    function compareRanges(range0, range1) {\n        return range0.start.valueOf() - range1.start.valueOf(); // earlier ranges go first\n    }\n    function intersectRanges(range0, range1) {\n        var start = range0.start;\n        var end = range0.end;\n        var newRange = null;\n        if (range1.start !== null) {\n            if (start === null) {\n                start = range1.start;\n            }\n            else {\n                start = new Date(Math.max(start.valueOf(), range1.start.valueOf()));\n            }\n        }\n        if (range1.end != null) {\n            if (end === null) {\n                end = range1.end;\n            }\n            else {\n                end = new Date(Math.min(end.valueOf(), range1.end.valueOf()));\n            }\n        }\n        if (start === null || end === null || start < end) {\n            newRange = { start: start, end: end };\n        }\n        return newRange;\n    }\n    function rangesEqual(range0, range1) {\n        return (range0.start === null ? null : range0.start.valueOf()) === (range1.start === null ? null : range1.start.valueOf()) &&\n            (range0.end === null ? null : range0.end.valueOf()) === (range1.end === null ? null : range1.end.valueOf());\n    }\n    function rangesIntersect(range0, range1) {\n        return (range0.end === null || range1.start === null || range0.end > range1.start) &&\n            (range0.start === null || range1.end === null || range0.start < range1.end);\n    }\n    function rangeContainsRange(outerRange, innerRange) {\n        return (outerRange.start === null || (innerRange.start !== null && innerRange.start >= outerRange.start)) &&\n            (outerRange.end === null || (innerRange.end !== null && innerRange.end <= outerRange.end));\n    }\n    function rangeContainsMarker(range, date) {\n        return (range.start === null || date >= range.start) &&\n            (range.end === null || date < range.end);\n    }\n    // If the given date is not within the given range, move it inside.\n    // (If it's past the end, make it one millisecond before the end).\n    function constrainMarkerToRange(date, range) {\n        if (range.start != null && date < range.start) {\n            return range.start;\n        }\n        if (range.end != null && date >= range.end) {\n            return new Date(range.end.valueOf() - 1);\n        }\n        return date;\n    }\n\n    function removeExact(array, exactVal) {\n        var removeCnt = 0;\n        var i = 0;\n        while (i < array.length) {\n            if (array[i] === exactVal) {\n                array.splice(i, 1);\n                removeCnt++;\n            }\n            else {\n                i++;\n            }\n        }\n        return removeCnt;\n    }\n    function isArraysEqual(a0, a1) {\n        var len = a0.length;\n        var i;\n        if (len !== a1.length) { // not array? or not same length?\n            return false;\n        }\n        for (i = 0; i < len; i++) {\n            if (a0[i] !== a1[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function memoize(workerFunc) {\n        var args;\n        var res;\n        return function () {\n            if (!args || !isArraysEqual(args, arguments)) {\n                args = arguments;\n                res = workerFunc.apply(this, arguments);\n            }\n            return res;\n        };\n    }\n    /*\n    always executes the workerFunc, but if the result is equal to the previous result,\n    return the previous result instead.\n    */\n    function memoizeOutput(workerFunc, equalityFunc) {\n        var cachedRes = null;\n        return function () {\n            var newRes = workerFunc.apply(this, arguments);\n            if (cachedRes === null || !(cachedRes === newRes || equalityFunc(cachedRes, newRes))) {\n                cachedRes = newRes;\n            }\n            return cachedRes;\n        };\n    }\n\n    var EXTENDED_SETTINGS_AND_SEVERITIES = {\n        week: 3,\n        separator: 0,\n        omitZeroMinute: 0,\n        meridiem: 0,\n        omitCommas: 0\n    };\n    var STANDARD_DATE_PROP_SEVERITIES = {\n        timeZoneName: 7,\n        era: 6,\n        year: 5,\n        month: 4,\n        day: 2,\n        weekday: 2,\n        hour: 1,\n        minute: 1,\n        second: 1\n    };\n    var MERIDIEM_RE = /\\s*([ap])\\.?m\\.?/i; // eats up leading spaces too\n    var COMMA_RE = /,/g; // we need re for globalness\n    var MULTI_SPACE_RE = /\\s+/g;\n    var LTR_RE = /\\u200e/g; // control character\n    var UTC_RE = /UTC|GMT/;\n    var NativeFormatter = /** @class */ (function () {\n        function NativeFormatter(formatSettings) {\n            var standardDateProps = {};\n            var extendedSettings = {};\n            var severity = 0;\n            for (var name_1 in formatSettings) {\n                if (name_1 in EXTENDED_SETTINGS_AND_SEVERITIES) {\n                    extendedSettings[name_1] = formatSettings[name_1];\n                    severity = Math.max(EXTENDED_SETTINGS_AND_SEVERITIES[name_1], severity);\n                }\n                else {\n                    standardDateProps[name_1] = formatSettings[name_1];\n                    if (name_1 in STANDARD_DATE_PROP_SEVERITIES) {\n                        severity = Math.max(STANDARD_DATE_PROP_SEVERITIES[name_1], severity);\n                    }\n                }\n            }\n            this.standardDateProps = standardDateProps;\n            this.extendedSettings = extendedSettings;\n            this.severity = severity;\n            this.buildFormattingFunc = memoize(buildFormattingFunc);\n        }\n        NativeFormatter.prototype.format = function (date, context) {\n            return this.buildFormattingFunc(this.standardDateProps, this.extendedSettings, context)(date);\n        };\n        NativeFormatter.prototype.formatRange = function (start, end, context) {\n            var _a = this, standardDateProps = _a.standardDateProps, extendedSettings = _a.extendedSettings;\n            var diffSeverity = computeMarkerDiffSeverity(start.marker, end.marker, context.calendarSystem);\n            if (!diffSeverity) {\n                return this.format(start, context);\n            }\n            var biggestUnitForPartial = diffSeverity;\n            if (biggestUnitForPartial > 1 && // the two dates are different in a way that's larger scale than time\n                (standardDateProps.year === 'numeric' || standardDateProps.year === '2-digit') &&\n                (standardDateProps.month === 'numeric' || standardDateProps.month === '2-digit') &&\n                (standardDateProps.day === 'numeric' || standardDateProps.day === '2-digit')) {\n                biggestUnitForPartial = 1; // make it look like the dates are only different in terms of time\n            }\n            var full0 = this.format(start, context);\n            var full1 = this.format(end, context);\n            if (full0 === full1) {\n                return full0;\n            }\n            var partialDateProps = computePartialFormattingOptions(standardDateProps, biggestUnitForPartial);\n            var partialFormattingFunc = buildFormattingFunc(partialDateProps, extendedSettings, context);\n            var partial0 = partialFormattingFunc(start);\n            var partial1 = partialFormattingFunc(end);\n            var insertion = findCommonInsertion(full0, partial0, full1, partial1);\n            var separator = extendedSettings.separator || '';\n            if (insertion) {\n                return insertion.before + partial0 + separator + partial1 + insertion.after;\n            }\n            return full0 + separator + full1;\n        };\n        NativeFormatter.prototype.getLargestUnit = function () {\n            switch (this.severity) {\n                case 7:\n                case 6:\n                case 5:\n                    return 'year';\n                case 4:\n                    return 'month';\n                case 3:\n                    return 'week';\n                default:\n                    return 'day';\n            }\n        };\n        return NativeFormatter;\n    }());\n    function buildFormattingFunc(standardDateProps, extendedSettings, context) {\n        var standardDatePropCnt = Object.keys(standardDateProps).length;\n        if (standardDatePropCnt === 1 && standardDateProps.timeZoneName === 'short') {\n            return function (date) {\n                return formatTimeZoneOffset(date.timeZoneOffset);\n            };\n        }\n        if (standardDatePropCnt === 0 && extendedSettings.week) {\n            return function (date) {\n                return formatWeekNumber(context.computeWeekNumber(date.marker), context.weekLabel, context.locale, extendedSettings.week);\n            };\n        }\n        return buildNativeFormattingFunc(standardDateProps, extendedSettings, context);\n    }\n    function buildNativeFormattingFunc(standardDateProps, extendedSettings, context) {\n        standardDateProps = __assign({}, standardDateProps); // copy\n        extendedSettings = __assign({}, extendedSettings); // copy\n        sanitizeSettings(standardDateProps, extendedSettings);\n        standardDateProps.timeZone = 'UTC'; // we leverage the only guaranteed timeZone for our UTC markers\n        var normalFormat = new Intl.DateTimeFormat(context.locale.codes, standardDateProps);\n        var zeroFormat; // needed?\n        if (extendedSettings.omitZeroMinute) {\n            var zeroProps = __assign({}, standardDateProps);\n            delete zeroProps.minute; // seconds and ms were already considered in sanitizeSettings\n            zeroFormat = new Intl.DateTimeFormat(context.locale.codes, zeroProps);\n        }\n        return function (date) {\n            var marker = date.marker;\n            var format;\n            if (zeroFormat && !marker.getUTCMinutes()) {\n                format = zeroFormat;\n            }\n            else {\n                format = normalFormat;\n            }\n            var s = format.format(marker);\n            return postProcess(s, date, standardDateProps, extendedSettings, context);\n        };\n    }\n    function sanitizeSettings(standardDateProps, extendedSettings) {\n        // deal with a browser inconsistency where formatting the timezone\n        // requires that the hour/minute be present.\n        if (standardDateProps.timeZoneName) {\n            if (!standardDateProps.hour) {\n                standardDateProps.hour = '2-digit';\n            }\n            if (!standardDateProps.minute) {\n                standardDateProps.minute = '2-digit';\n            }\n        }\n        // only support short timezone names\n        if (standardDateProps.timeZoneName === 'long') {\n            standardDateProps.timeZoneName = 'short';\n        }\n        // if requesting to display seconds, MUST display minutes\n        if (extendedSettings.omitZeroMinute && (standardDateProps.second || standardDateProps.millisecond)) {\n            delete extendedSettings.omitZeroMinute;\n        }\n    }\n    function postProcess(s, date, standardDateProps, extendedSettings, context) {\n        s = s.replace(LTR_RE, ''); // remove left-to-right control chars. do first. good for other regexes\n        if (standardDateProps.timeZoneName === 'short') {\n            s = injectTzoStr(s, (context.timeZone === 'UTC' || date.timeZoneOffset == null) ?\n                'UTC' : // important to normalize for IE, which does \"GMT\"\n                formatTimeZoneOffset(date.timeZoneOffset));\n        }\n        if (extendedSettings.omitCommas) {\n            s = s.replace(COMMA_RE, '').trim();\n        }\n        if (extendedSettings.omitZeroMinute) {\n            s = s.replace(':00', ''); // zeroFormat doesn't always achieve this\n        }\n        // ^ do anything that might create adjacent spaces before this point,\n        // because MERIDIEM_RE likes to eat up loading spaces\n        if (extendedSettings.meridiem === false) {\n            s = s.replace(MERIDIEM_RE, '').trim();\n        }\n        else if (extendedSettings.meridiem === 'narrow') { // a/p\n            s = s.replace(MERIDIEM_RE, function (m0, m1) {\n                return m1.toLocaleLowerCase();\n            });\n        }\n        else if (extendedSettings.meridiem === 'short') { // am/pm\n            s = s.replace(MERIDIEM_RE, function (m0, m1) {\n                return m1.toLocaleLowerCase() + 'm';\n            });\n        }\n        else if (extendedSettings.meridiem === 'lowercase') { // other meridiem transformers already converted to lowercase\n            s = s.replace(MERIDIEM_RE, function (m0) {\n                return m0.toLocaleLowerCase();\n            });\n        }\n        s = s.replace(MULTI_SPACE_RE, ' ');\n        s = s.trim();\n        return s;\n    }\n    function injectTzoStr(s, tzoStr) {\n        var replaced = false;\n        s = s.replace(UTC_RE, function () {\n            replaced = true;\n            return tzoStr;\n        });\n        // IE11 doesn't include UTC/GMT in the original string, so append to end\n        if (!replaced) {\n            s += ' ' + tzoStr;\n        }\n        return s;\n    }\n    function formatWeekNumber(num, weekLabel, locale, display) {\n        var parts = [];\n        if (display === 'narrow') {\n            parts.push(weekLabel);\n        }\n        else if (display === 'short') {\n            parts.push(weekLabel, ' ');\n        }\n        // otherwise, considered 'numeric'\n        parts.push(locale.simpleNumberFormat.format(num));\n        if (locale.options.isRtl) { // TODO: use control characters instead?\n            parts.reverse();\n        }\n        return parts.join('');\n    }\n    // Range Formatting Utils\n    // 0 = exactly the same\n    // 1 = different by time\n    // and bigger\n    function computeMarkerDiffSeverity(d0, d1, ca) {\n        if (ca.getMarkerYear(d0) !== ca.getMarkerYear(d1)) {\n            return 5;\n        }\n        if (ca.getMarkerMonth(d0) !== ca.getMarkerMonth(d1)) {\n            return 4;\n        }\n        if (ca.getMarkerDay(d0) !== ca.getMarkerDay(d1)) {\n            return 2;\n        }\n        if (timeAsMs(d0) !== timeAsMs(d1)) {\n            return 1;\n        }\n        return 0;\n    }\n    function computePartialFormattingOptions(options, biggestUnit) {\n        var partialOptions = {};\n        for (var name_2 in options) {\n            if (!(name_2 in STANDARD_DATE_PROP_SEVERITIES) || // not a date part prop (like timeZone)\n                STANDARD_DATE_PROP_SEVERITIES[name_2] <= biggestUnit) {\n                partialOptions[name_2] = options[name_2];\n            }\n        }\n        return partialOptions;\n    }\n    function findCommonInsertion(full0, partial0, full1, partial1) {\n        var i0 = 0;\n        while (i0 < full0.length) {\n            var found0 = full0.indexOf(partial0, i0);\n            if (found0 === -1) {\n                break;\n            }\n            var before0 = full0.substr(0, found0);\n            i0 = found0 + partial0.length;\n            var after0 = full0.substr(i0);\n            var i1 = 0;\n            while (i1 < full1.length) {\n                var found1 = full1.indexOf(partial1, i1);\n                if (found1 === -1) {\n                    break;\n                }\n                var before1 = full1.substr(0, found1);\n                i1 = found1 + partial1.length;\n                var after1 = full1.substr(i1);\n                if (before0 === before1 && after0 === after1) {\n                    return {\n                        before: before0,\n                        after: after0\n                    };\n                }\n            }\n        }\n        return null;\n    }\n\n    /*\n    TODO: fix the terminology of \"formatter\" vs \"formatting func\"\n    */\n    /*\n    At the time of instantiation, this object does not know which cmd-formatting system it will use.\n    It receives this at the time of formatting, as a setting.\n    */\n    var CmdFormatter = /** @class */ (function () {\n        function CmdFormatter(cmdStr, separator) {\n            this.cmdStr = cmdStr;\n            this.separator = separator;\n        }\n        CmdFormatter.prototype.format = function (date, context) {\n            return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(date, null, context, this.separator));\n        };\n        CmdFormatter.prototype.formatRange = function (start, end, context) {\n            return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(start, end, context, this.separator));\n        };\n        return CmdFormatter;\n    }());\n\n    var FuncFormatter = /** @class */ (function () {\n        function FuncFormatter(func) {\n            this.func = func;\n        }\n        FuncFormatter.prototype.format = function (date, context) {\n            return this.func(createVerboseFormattingArg(date, null, context));\n        };\n        FuncFormatter.prototype.formatRange = function (start, end, context) {\n            return this.func(createVerboseFormattingArg(start, end, context));\n        };\n        return FuncFormatter;\n    }());\n\n    // Formatter Object Creation\n    function createFormatter(input, defaultSeparator) {\n        if (typeof input === 'object' && input) { // non-null object\n            if (typeof defaultSeparator === 'string') {\n                input = __assign({ separator: defaultSeparator }, input);\n            }\n            return new NativeFormatter(input);\n        }\n        else if (typeof input === 'string') {\n            return new CmdFormatter(input, defaultSeparator);\n        }\n        else if (typeof input === 'function') {\n            return new FuncFormatter(input);\n        }\n    }\n    // String Utils\n    // timeZoneOffset is in minutes\n    function buildIsoString(marker, timeZoneOffset, stripZeroTime) {\n        if (stripZeroTime === void 0) { stripZeroTime = false; }\n        var s = marker.toISOString();\n        s = s.replace('.000', '');\n        if (stripZeroTime) {\n            s = s.replace('T00:00:00Z', '');\n        }\n        if (s.length > 10) { // time part wasn't stripped, can add timezone info\n            if (timeZoneOffset == null) {\n                s = s.replace('Z', '');\n            }\n            else if (timeZoneOffset !== 0) {\n                s = s.replace('Z', formatTimeZoneOffset(timeZoneOffset, true));\n            }\n            // otherwise, its UTC-0 and we want to keep the Z\n        }\n        return s;\n    }\n    function formatIsoTimeString(marker) {\n        return padStart(marker.getUTCHours(), 2) + ':' +\n            padStart(marker.getUTCMinutes(), 2) + ':' +\n            padStart(marker.getUTCSeconds(), 2);\n    }\n    function formatTimeZoneOffset(minutes, doIso) {\n        if (doIso === void 0) { doIso = false; }\n        var sign = minutes < 0 ? '-' : '+';\n        var abs = Math.abs(minutes);\n        var hours = Math.floor(abs / 60);\n        var mins = Math.round(abs % 60);\n        if (doIso) {\n            return sign + padStart(hours, 2) + ':' + padStart(mins, 2);\n        }\n        else {\n            return 'GMT' + sign + hours + (mins ? ':' + padStart(mins, 2) : '');\n        }\n    }\n    // Arg Utils\n    function createVerboseFormattingArg(start, end, context, separator) {\n        var startInfo = expandZonedMarker(start, context.calendarSystem);\n        var endInfo = end ? expandZonedMarker(end, context.calendarSystem) : null;\n        return {\n            date: startInfo,\n            start: startInfo,\n            end: endInfo,\n            timeZone: context.timeZone,\n            localeCodes: context.locale.codes,\n            separator: separator\n        };\n    }\n    function expandZonedMarker(dateInfo, calendarSystem) {\n        var a = calendarSystem.markerToArray(dateInfo.marker);\n        return {\n            marker: dateInfo.marker,\n            timeZoneOffset: dateInfo.timeZoneOffset,\n            array: a,\n            year: a[0],\n            month: a[1],\n            day: a[2],\n            hour: a[3],\n            minute: a[4],\n            second: a[5],\n            millisecond: a[6]\n        };\n    }\n\n    var EventSourceApi = /** @class */ (function () {\n        function EventSourceApi(calendar, internalEventSource) {\n            this.calendar = calendar;\n            this.internalEventSource = internalEventSource;\n        }\n        EventSourceApi.prototype.remove = function () {\n            this.calendar.dispatch({\n                type: 'REMOVE_EVENT_SOURCE',\n                sourceId: this.internalEventSource.sourceId\n            });\n        };\n        EventSourceApi.prototype.refetch = function () {\n            this.calendar.dispatch({\n                type: 'FETCH_EVENT_SOURCES',\n                sourceIds: [this.internalEventSource.sourceId]\n            });\n        };\n        Object.defineProperty(EventSourceApi.prototype, \"id\", {\n            get: function () {\n                return this.internalEventSource.publicId;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventSourceApi.prototype, \"url\", {\n            // only relevant to json-feed event sources\n            get: function () {\n                return this.internalEventSource.meta.url;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        return EventSourceApi;\n    }());\n\n    var EventApi = /** @class */ (function () {\n        function EventApi(calendar, def, instance) {\n            this._calendar = calendar;\n            this._def = def;\n            this._instance = instance || null;\n        }\n        /*\n        TODO: make event struct more responsible for this\n        */\n        EventApi.prototype.setProp = function (name, val) {\n            var _a, _b;\n            if (name in DATE_PROPS) ;\n            else if (name in NON_DATE_PROPS) {\n                if (typeof NON_DATE_PROPS[name] === 'function') {\n                    val = NON_DATE_PROPS[name](val);\n                }\n                this.mutate({\n                    standardProps: (_a = {}, _a[name] = val, _a)\n                });\n            }\n            else if (name in UNSCOPED_EVENT_UI_PROPS) {\n                var ui = void 0;\n                if (typeof UNSCOPED_EVENT_UI_PROPS[name] === 'function') {\n                    val = UNSCOPED_EVENT_UI_PROPS[name](val);\n                }\n                if (name === 'color') {\n                    ui = { backgroundColor: val, borderColor: val };\n                }\n                else if (name === 'editable') {\n                    ui = { startEditable: val, durationEditable: val };\n                }\n                else {\n                    ui = (_b = {}, _b[name] = val, _b);\n                }\n                this.mutate({\n                    standardProps: { ui: ui }\n                });\n            }\n        };\n        EventApi.prototype.setExtendedProp = function (name, val) {\n            var _a;\n            this.mutate({\n                extendedProps: (_a = {}, _a[name] = val, _a)\n            });\n        };\n        EventApi.prototype.setStart = function (startInput, options) {\n            if (options === void 0) { options = {}; }\n            var dateEnv = this._calendar.dateEnv;\n            var start = dateEnv.createMarker(startInput);\n            if (start && this._instance) { // TODO: warning if parsed bad\n                var instanceRange = this._instance.range;\n                var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity); // what if parsed bad!?\n                var endDelta = null;\n                if (options.maintainDuration) {\n                    var origDuration = diffDates(instanceRange.start, instanceRange.end, dateEnv, options.granularity);\n                    var newDuration = diffDates(start, instanceRange.end, dateEnv, options.granularity);\n                    endDelta = subtractDurations(origDuration, newDuration);\n                }\n                this.mutate({ startDelta: startDelta, endDelta: endDelta });\n            }\n        };\n        EventApi.prototype.setEnd = function (endInput, options) {\n            if (options === void 0) { options = {}; }\n            var dateEnv = this._calendar.dateEnv;\n            var end;\n            if (endInput != null) {\n                end = dateEnv.createMarker(endInput);\n                if (!end) {\n                    return; // TODO: warning if parsed bad\n                }\n            }\n            if (this._instance) {\n                if (end) {\n                    var endDelta = diffDates(this._instance.range.end, end, dateEnv, options.granularity);\n                    this.mutate({ endDelta: endDelta });\n                }\n                else {\n                    this.mutate({ standardProps: { hasEnd: false } });\n                }\n            }\n        };\n        EventApi.prototype.setDates = function (startInput, endInput, options) {\n            if (options === void 0) { options = {}; }\n            var dateEnv = this._calendar.dateEnv;\n            var standardProps = { allDay: options.allDay };\n            var start = dateEnv.createMarker(startInput);\n            var end;\n            if (!start) {\n                return; // TODO: warning if parsed bad\n            }\n            if (endInput != null) {\n                end = dateEnv.createMarker(endInput);\n                if (!end) { // TODO: warning if parsed bad\n                    return;\n                }\n            }\n            if (this._instance) {\n                var instanceRange = this._instance.range;\n                // when computing the diff for an event being converted to all-day,\n                // compute diff off of the all-day values the way event-mutation does.\n                if (options.allDay === true) {\n                    instanceRange = computeAlignedDayRange(instanceRange);\n                }\n                var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity);\n                if (end) {\n                    var endDelta = diffDates(instanceRange.end, end, dateEnv, options.granularity);\n                    this.mutate({ startDelta: startDelta, endDelta: endDelta, standardProps: standardProps });\n                }\n                else {\n                    standardProps.hasEnd = false;\n                    this.mutate({ startDelta: startDelta, standardProps: standardProps });\n                }\n            }\n        };\n        EventApi.prototype.moveStart = function (deltaInput) {\n            var delta = createDuration(deltaInput);\n            if (delta) { // TODO: warning if parsed bad\n                this.mutate({ startDelta: delta });\n            }\n        };\n        EventApi.prototype.moveEnd = function (deltaInput) {\n            var delta = createDuration(deltaInput);\n            if (delta) { // TODO: warning if parsed bad\n                this.mutate({ endDelta: delta });\n            }\n        };\n        EventApi.prototype.moveDates = function (deltaInput) {\n            var delta = createDuration(deltaInput);\n            if (delta) { // TODO: warning if parsed bad\n                this.mutate({ startDelta: delta, endDelta: delta });\n            }\n        };\n        EventApi.prototype.setAllDay = function (allDay, options) {\n            if (options === void 0) { options = {}; }\n            var standardProps = { allDay: allDay };\n            var maintainDuration = options.maintainDuration;\n            if (maintainDuration == null) {\n                maintainDuration = this._calendar.opt('allDayMaintainDuration');\n            }\n            if (this._def.allDay !== allDay) {\n                standardProps.hasEnd = maintainDuration;\n            }\n            this.mutate({ standardProps: standardProps });\n        };\n        EventApi.prototype.formatRange = function (formatInput) {\n            var dateEnv = this._calendar.dateEnv;\n            var instance = this._instance;\n            var formatter = createFormatter(formatInput, this._calendar.opt('defaultRangeSeparator'));\n            if (this._def.hasEnd) {\n                return dateEnv.formatRange(instance.range.start, instance.range.end, formatter, {\n                    forcedStartTzo: instance.forcedStartTzo,\n                    forcedEndTzo: instance.forcedEndTzo\n                });\n            }\n            else {\n                return dateEnv.format(instance.range.start, formatter, {\n                    forcedTzo: instance.forcedStartTzo\n                });\n            }\n        };\n        EventApi.prototype.mutate = function (mutation) {\n            var def = this._def;\n            var instance = this._instance;\n            if (instance) {\n                this._calendar.dispatch({\n                    type: 'MUTATE_EVENTS',\n                    instanceId: instance.instanceId,\n                    mutation: mutation,\n                    fromApi: true\n                });\n                var eventStore = this._calendar.state.eventStore;\n                this._def = eventStore.defs[def.defId];\n                this._instance = eventStore.instances[instance.instanceId];\n            }\n        };\n        EventApi.prototype.remove = function () {\n            this._calendar.dispatch({\n                type: 'REMOVE_EVENT_DEF',\n                defId: this._def.defId\n            });\n        };\n        Object.defineProperty(EventApi.prototype, \"source\", {\n            get: function () {\n                var sourceId = this._def.sourceId;\n                if (sourceId) {\n                    return new EventSourceApi(this._calendar, this._calendar.state.eventSources[sourceId]);\n                }\n                return null;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"start\", {\n            get: function () {\n                return this._instance ?\n                    this._calendar.dateEnv.toDate(this._instance.range.start) :\n                    null;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"end\", {\n            get: function () {\n                return (this._instance && this._def.hasEnd) ?\n                    this._calendar.dateEnv.toDate(this._instance.range.end) :\n                    null;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"id\", {\n            // computable props that all access the def\n            // TODO: find a TypeScript-compatible way to do this at scale\n            get: function () { return this._def.publicId; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"groupId\", {\n            get: function () { return this._def.groupId; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"allDay\", {\n            get: function () { return this._def.allDay; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"title\", {\n            get: function () { return this._def.title; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"url\", {\n            get: function () { return this._def.url; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"rendering\", {\n            get: function () { return this._def.rendering; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"startEditable\", {\n            get: function () { return this._def.ui.startEditable; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"durationEditable\", {\n            get: function () { return this._def.ui.durationEditable; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"constraint\", {\n            get: function () { return this._def.ui.constraints[0] || null; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"overlap\", {\n            get: function () { return this._def.ui.overlap; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"allow\", {\n            get: function () { return this._def.ui.allows[0] || null; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"backgroundColor\", {\n            get: function () { return this._def.ui.backgroundColor; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"borderColor\", {\n            get: function () { return this._def.ui.borderColor; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"textColor\", {\n            get: function () { return this._def.ui.textColor; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"classNames\", {\n            // NOTE: user can't modify these because Object.freeze was called in event-def parsing\n            get: function () { return this._def.ui.classNames; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(EventApi.prototype, \"extendedProps\", {\n            get: function () { return this._def.extendedProps; },\n            enumerable: true,\n            configurable: true\n        });\n        return EventApi;\n    }());\n\n    /*\n    Specifying nextDayThreshold signals that all-day ranges should be sliced.\n    */\n    function sliceEventStore(eventStore, eventUiBases, framingRange, nextDayThreshold) {\n        var inverseBgByGroupId = {};\n        var inverseBgByDefId = {};\n        var defByGroupId = {};\n        var bgRanges = [];\n        var fgRanges = [];\n        var eventUis = compileEventUis(eventStore.defs, eventUiBases);\n        for (var defId in eventStore.defs) {\n            var def = eventStore.defs[defId];\n            if (def.rendering === 'inverse-background') {\n                if (def.groupId) {\n                    inverseBgByGroupId[def.groupId] = [];\n                    if (!defByGroupId[def.groupId]) {\n                        defByGroupId[def.groupId] = def;\n                    }\n                }\n                else {\n                    inverseBgByDefId[defId] = [];\n                }\n            }\n        }\n        for (var instanceId in eventStore.instances) {\n            var instance = eventStore.instances[instanceId];\n            var def = eventStore.defs[instance.defId];\n            var ui = eventUis[def.defId];\n            var origRange = instance.range;\n            var normalRange = (!def.allDay && nextDayThreshold) ?\n                computeVisibleDayRange(origRange, nextDayThreshold) :\n                origRange;\n            var slicedRange = intersectRanges(normalRange, framingRange);\n            if (slicedRange) {\n                if (def.rendering === 'inverse-background') {\n                    if (def.groupId) {\n                        inverseBgByGroupId[def.groupId].push(slicedRange);\n                    }\n                    else {\n                        inverseBgByDefId[instance.defId].push(slicedRange);\n                    }\n                }\n                else {\n                    (def.rendering === 'background' ? bgRanges : fgRanges).push({\n                        def: def,\n                        ui: ui,\n                        instance: instance,\n                        range: slicedRange,\n                        isStart: normalRange.start && normalRange.start.valueOf() === slicedRange.start.valueOf(),\n                        isEnd: normalRange.end && normalRange.end.valueOf() === slicedRange.end.valueOf()\n                    });\n                }\n            }\n        }\n        for (var groupId in inverseBgByGroupId) { // BY GROUP\n            var ranges = inverseBgByGroupId[groupId];\n            var invertedRanges = invertRanges(ranges, framingRange);\n            for (var _i = 0, invertedRanges_1 = invertedRanges; _i < invertedRanges_1.length; _i++) {\n                var invertedRange = invertedRanges_1[_i];\n                var def = defByGroupId[groupId];\n                var ui = eventUis[def.defId];\n                bgRanges.push({\n                    def: def,\n                    ui: ui,\n                    instance: null,\n                    range: invertedRange,\n                    isStart: false,\n                    isEnd: false\n                });\n            }\n        }\n        for (var defId in inverseBgByDefId) {\n            var ranges = inverseBgByDefId[defId];\n            var invertedRanges = invertRanges(ranges, framingRange);\n            for (var _a = 0, invertedRanges_2 = invertedRanges; _a < invertedRanges_2.length; _a++) {\n                var invertedRange = invertedRanges_2[_a];\n                bgRanges.push({\n                    def: eventStore.defs[defId],\n                    ui: eventUis[defId],\n                    instance: null,\n                    range: invertedRange,\n                    isStart: false,\n                    isEnd: false\n                });\n            }\n        }\n        return { bg: bgRanges, fg: fgRanges };\n    }\n    function hasBgRendering(def) {\n        return def.rendering === 'background' || def.rendering === 'inverse-background';\n    }\n    function filterSegsViaEls(view, segs, isMirror) {\n        if (view.hasPublicHandlers('eventRender')) {\n            segs = segs.filter(function (seg) {\n                var custom = view.publiclyTrigger('eventRender', [\n                    {\n                        event: new EventApi(view.calendar, seg.eventRange.def, seg.eventRange.instance),\n                        isMirror: isMirror,\n                        isStart: seg.isStart,\n                        isEnd: seg.isEnd,\n                        // TODO: include seg.range once all components consistently generate it\n                        el: seg.el,\n                        view: view\n                    }\n                ]);\n                if (custom === false) { // means don't render at all\n                    return false;\n                }\n                else if (custom && custom !== true) {\n                    seg.el = custom;\n                }\n                return true;\n            });\n        }\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            setElSeg(seg.el, seg);\n        }\n        return segs;\n    }\n    function setElSeg(el, seg) {\n        el.fcSeg = seg;\n    }\n    function getElSeg(el) {\n        return el.fcSeg || null;\n    }\n    // event ui computation\n    function compileEventUis(eventDefs, eventUiBases) {\n        return mapHash(eventDefs, function (eventDef) {\n            return compileEventUi(eventDef, eventUiBases);\n        });\n    }\n    function compileEventUi(eventDef, eventUiBases) {\n        var uis = [];\n        if (eventUiBases['']) {\n            uis.push(eventUiBases['']);\n        }\n        if (eventUiBases[eventDef.defId]) {\n            uis.push(eventUiBases[eventDef.defId]);\n        }\n        uis.push(eventDef.ui);\n        return combineEventUis(uis);\n    }\n\n    // applies the mutation to ALL defs/instances within the event store\n    function applyMutationToEventStore(eventStore, eventConfigBase, mutation, calendar) {\n        var eventConfigs = compileEventUis(eventStore.defs, eventConfigBase);\n        var dest = createEmptyEventStore();\n        for (var defId in eventStore.defs) {\n            var def = eventStore.defs[defId];\n            dest.defs[defId] = applyMutationToEventDef(def, eventConfigs[defId], mutation, calendar.pluginSystem.hooks.eventDefMutationAppliers, calendar);\n        }\n        for (var instanceId in eventStore.instances) {\n            var instance = eventStore.instances[instanceId];\n            var def = dest.defs[instance.defId]; // important to grab the newly modified def\n            dest.instances[instanceId] = applyMutationToEventInstance(instance, def, eventConfigs[instance.defId], mutation, calendar);\n        }\n        return dest;\n    }\n    function applyMutationToEventDef(eventDef, eventConfig, mutation, appliers, calendar) {\n        var standardProps = mutation.standardProps || {};\n        // if hasEnd has not been specified, guess a good value based on deltas.\n        // if duration will change, there's no way the default duration will persist,\n        // and thus, we need to mark the event as having a real end\n        if (standardProps.hasEnd == null &&\n            eventConfig.durationEditable &&\n            willDeltasAffectDuration(eventConfig.startEditable ? mutation.startDelta : null, mutation.endDelta || null)) {\n            standardProps.hasEnd = true; // TODO: is this mutation okay?\n        }\n        var copy = __assign({}, eventDef, standardProps, { ui: __assign({}, eventDef.ui, standardProps.ui) });\n        if (mutation.extendedProps) {\n            copy.extendedProps = __assign({}, copy.extendedProps, mutation.extendedProps);\n        }\n        for (var _i = 0, appliers_1 = appliers; _i < appliers_1.length; _i++) {\n            var applier = appliers_1[_i];\n            applier(copy, mutation, calendar);\n        }\n        if (!copy.hasEnd && calendar.opt('forceEventDuration')) {\n            copy.hasEnd = true;\n        }\n        return copy;\n    }\n    function willDeltasAffectDuration(startDelta, endDelta) {\n        if (startDelta && !asRoughMs(startDelta)) {\n            startDelta = null;\n        }\n        if (endDelta && !asRoughMs(endDelta)) {\n            endDelta = null;\n        }\n        if (!startDelta && !endDelta) {\n            return false;\n        }\n        if (Boolean(startDelta) !== Boolean(endDelta)) {\n            return true;\n        }\n        return !durationsEqual(startDelta, endDelta);\n    }\n    function applyMutationToEventInstance(eventInstance, eventDef, // must first be modified by applyMutationToEventDef\n    eventConfig, mutation, calendar) {\n        var dateEnv = calendar.dateEnv;\n        var forceAllDay = mutation.standardProps && mutation.standardProps.allDay === true;\n        var clearEnd = mutation.standardProps && mutation.standardProps.hasEnd === false;\n        var copy = __assign({}, eventInstance);\n        if (forceAllDay) {\n            copy.range = computeAlignedDayRange(copy.range);\n        }\n        if (mutation.startDelta && eventConfig.startEditable) {\n            copy.range = {\n                start: dateEnv.add(copy.range.start, mutation.startDelta),\n                end: copy.range.end\n            };\n        }\n        if (clearEnd) {\n            copy.range = {\n                start: copy.range.start,\n                end: calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start)\n            };\n        }\n        else if (mutation.endDelta &&\n            (eventConfig.durationEditable ||\n                !willDeltasAffectDuration(// TODO: nonDRY logic above\n                eventConfig.startEditable ? mutation.startDelta : null, mutation.endDelta))) {\n            copy.range = {\n                start: copy.range.start,\n                end: dateEnv.add(copy.range.end, mutation.endDelta)\n            };\n        }\n        // in case event was all-day but the supplied deltas were not\n        // better util for this?\n        if (eventDef.allDay) {\n            copy.range = {\n                start: startOfDay(copy.range.start),\n                end: startOfDay(copy.range.end)\n            };\n        }\n        // handle invalid durations\n        if (copy.range.end < copy.range.start) {\n            copy.range.end = calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start);\n        }\n        return copy;\n    }\n\n    function reduceEventStore (eventStore, action, eventSources, dateProfile, calendar) {\n        switch (action.type) {\n            case 'RECEIVE_EVENTS': // raw\n                return receiveRawEvents(eventStore, eventSources[action.sourceId], action.fetchId, action.fetchRange, action.rawEvents, calendar);\n            case 'ADD_EVENTS': // already parsed, but not expanded\n                return addEvent(eventStore, action.eventStore, // new ones\n                dateProfile ? dateProfile.activeRange : null, calendar);\n            case 'MERGE_EVENTS': // already parsed and expanded\n                return mergeEventStores(eventStore, action.eventStore);\n            case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n            case 'NEXT':\n            case 'SET_DATE':\n            case 'SET_VIEW_TYPE':\n                if (dateProfile) {\n                    return expandRecurring(eventStore, dateProfile.activeRange, calendar);\n                }\n                else {\n                    return eventStore;\n                }\n            case 'CHANGE_TIMEZONE':\n                return rezoneDates(eventStore, action.oldDateEnv, calendar.dateEnv);\n            case 'MUTATE_EVENTS':\n                return applyMutationToRelated(eventStore, action.instanceId, action.mutation, action.fromApi, calendar);\n            case 'REMOVE_EVENT_INSTANCES':\n                return excludeInstances(eventStore, action.instances);\n            case 'REMOVE_EVENT_DEF':\n                return filterEventStoreDefs(eventStore, function (eventDef) {\n                    return eventDef.defId !== action.defId;\n                });\n            case 'REMOVE_EVENT_SOURCE':\n                return excludeEventsBySourceId(eventStore, action.sourceId);\n            case 'REMOVE_ALL_EVENT_SOURCES':\n                return filterEventStoreDefs(eventStore, function (eventDef) {\n                    return !eventDef.sourceId; // only keep events with no source id\n                });\n            case 'REMOVE_ALL_EVENTS':\n                return createEmptyEventStore();\n            case 'RESET_EVENTS':\n                return {\n                    defs: eventStore.defs,\n                    instances: eventStore.instances\n                };\n            default:\n                return eventStore;\n        }\n    }\n    function receiveRawEvents(eventStore, eventSource, fetchId, fetchRange, rawEvents, calendar) {\n        if (eventSource && // not already removed\n            fetchId === eventSource.latestFetchId // TODO: wish this logic was always in event-sources\n        ) {\n            var subset = parseEvents(transformRawEvents(rawEvents, eventSource, calendar), eventSource.sourceId, calendar);\n            if (fetchRange) {\n                subset = expandRecurring(subset, fetchRange, calendar);\n            }\n            return mergeEventStores(excludeEventsBySourceId(eventStore, eventSource.sourceId), subset);\n        }\n        return eventStore;\n    }\n    function addEvent(eventStore, subset, expandRange, calendar) {\n        if (expandRange) {\n            subset = expandRecurring(subset, expandRange, calendar);\n        }\n        return mergeEventStores(eventStore, subset);\n    }\n    function rezoneDates(eventStore, oldDateEnv, newDateEnv) {\n        var defs = eventStore.defs;\n        var instances = mapHash(eventStore.instances, function (instance) {\n            var def = defs[instance.defId];\n            if (def.allDay || def.recurringDef) {\n                return instance; // isn't dependent on timezone\n            }\n            else {\n                return __assign({}, instance, { range: {\n                        start: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.start, instance.forcedStartTzo)),\n                        end: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.end, instance.forcedEndTzo))\n                    }, forcedStartTzo: newDateEnv.canComputeOffset ? null : instance.forcedStartTzo, forcedEndTzo: newDateEnv.canComputeOffset ? null : instance.forcedEndTzo });\n            }\n        });\n        return { defs: defs, instances: instances };\n    }\n    function applyMutationToRelated(eventStore, instanceId, mutation, fromApi, calendar) {\n        var relevant = getRelevantEvents(eventStore, instanceId);\n        var eventConfigBase = fromApi ?\n            { '': {\n                    startEditable: true,\n                    durationEditable: true,\n                    constraints: [],\n                    overlap: null,\n                    allows: [],\n                    backgroundColor: '',\n                    borderColor: '',\n                    textColor: '',\n                    classNames: []\n                } } :\n            calendar.eventUiBases;\n        relevant = applyMutationToEventStore(relevant, eventConfigBase, mutation, calendar);\n        return mergeEventStores(eventStore, relevant);\n    }\n    function excludeEventsBySourceId(eventStore, sourceId) {\n        return filterEventStoreDefs(eventStore, function (eventDef) {\n            return eventDef.sourceId !== sourceId;\n        });\n    }\n    // QUESTION: why not just return instances? do a general object-property-exclusion util\n    function excludeInstances(eventStore, removals) {\n        return {\n            defs: eventStore.defs,\n            instances: filterHash(eventStore.instances, function (instance) {\n                return !removals[instance.instanceId];\n            })\n        };\n    }\n\n    // high-level segmenting-aware tester functions\n    // ------------------------------------------------------------------------------------------------------------------------\n    function isInteractionValid(interaction, calendar) {\n        return isNewPropsValid({ eventDrag: interaction }, calendar); // HACK: the eventDrag props is used for ALL interactions\n    }\n    function isDateSelectionValid(dateSelection, calendar) {\n        return isNewPropsValid({ dateSelection: dateSelection }, calendar);\n    }\n    function isNewPropsValid(newProps, calendar) {\n        var view = calendar.view;\n        var props = __assign({ businessHours: view ? view.props.businessHours : createEmptyEventStore(), dateSelection: '', eventStore: calendar.state.eventStore, eventUiBases: calendar.eventUiBases, eventSelection: '', eventDrag: null, eventResize: null }, newProps);\n        return (calendar.pluginSystem.hooks.isPropsValid || isPropsValid)(props, calendar);\n    }\n    function isPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n        if (dateSpanMeta === void 0) { dateSpanMeta = {}; }\n        if (state.eventDrag && !isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n            return false;\n        }\n        if (state.dateSelection && !isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n            return false;\n        }\n        return true;\n    }\n    // Moving Event Validation\n    // ------------------------------------------------------------------------------------------------------------------------\n    function isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n        var interaction = state.eventDrag; // HACK: the eventDrag props is used for ALL interactions\n        var subjectEventStore = interaction.mutatedEvents;\n        var subjectDefs = subjectEventStore.defs;\n        var subjectInstances = subjectEventStore.instances;\n        var subjectConfigs = compileEventUis(subjectDefs, interaction.isEvent ?\n            state.eventUiBases :\n            { '': calendar.selectionConfig } // if not a real event, validate as a selection\n        );\n        if (filterConfig) {\n            subjectConfigs = mapHash(subjectConfigs, filterConfig);\n        }\n        var otherEventStore = excludeInstances(state.eventStore, interaction.affectedEvents.instances); // exclude the subject events. TODO: exclude defs too?\n        var otherDefs = otherEventStore.defs;\n        var otherInstances = otherEventStore.instances;\n        var otherConfigs = compileEventUis(otherDefs, state.eventUiBases);\n        for (var subjectInstanceId in subjectInstances) {\n            var subjectInstance = subjectInstances[subjectInstanceId];\n            var subjectRange = subjectInstance.range;\n            var subjectConfig = subjectConfigs[subjectInstance.defId];\n            var subjectDef = subjectDefs[subjectInstance.defId];\n            // constraint\n            if (!allConstraintsPass(subjectConfig.constraints, subjectRange, otherEventStore, state.businessHours, calendar)) {\n                return false;\n            }\n            // overlap\n            var overlapFunc = calendar.opt('eventOverlap');\n            if (typeof overlapFunc !== 'function') {\n                overlapFunc = null;\n            }\n            for (var otherInstanceId in otherInstances) {\n                var otherInstance = otherInstances[otherInstanceId];\n                // intersect! evaluate\n                if (rangesIntersect(subjectRange, otherInstance.range)) {\n                    var otherOverlap = otherConfigs[otherInstance.defId].overlap;\n                    // consider the other event's overlap. only do this if the subject event is a \"real\" event\n                    if (otherOverlap === false && interaction.isEvent) {\n                        return false;\n                    }\n                    if (subjectConfig.overlap === false) {\n                        return false;\n                    }\n                    if (overlapFunc && !overlapFunc(new EventApi(calendar, otherDefs[otherInstance.defId], otherInstance), // still event\n                    new EventApi(calendar, subjectDef, subjectInstance) // moving event\n                    )) {\n                        return false;\n                    }\n                }\n            }\n            // allow (a function)\n            for (var _i = 0, _a = subjectConfig.allows; _i < _a.length; _i++) {\n                var subjectAllow = _a[_i];\n                var subjectDateSpan = __assign({}, dateSpanMeta, { range: subjectInstance.range, allDay: subjectDef.allDay });\n                var origDef = state.eventStore.defs[subjectDef.defId];\n                var origInstance = state.eventStore.instances[subjectInstanceId];\n                var eventApi = void 0;\n                if (origDef) { // was previously in the calendar\n                    eventApi = new EventApi(calendar, origDef, origInstance);\n                }\n                else { // was an external event\n                    eventApi = new EventApi(calendar, subjectDef); // no instance, because had no dates\n                }\n                if (!subjectAllow(calendar.buildDateSpanApi(subjectDateSpan), eventApi)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    // Date Selection Validation\n    // ------------------------------------------------------------------------------------------------------------------------\n    function isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n        var relevantEventStore = state.eventStore;\n        var relevantDefs = relevantEventStore.defs;\n        var relevantInstances = relevantEventStore.instances;\n        var selection = state.dateSelection;\n        var selectionRange = selection.range;\n        var selectionConfig = calendar.selectionConfig;\n        if (filterConfig) {\n            selectionConfig = filterConfig(selectionConfig);\n        }\n        // constraint\n        if (!allConstraintsPass(selectionConfig.constraints, selectionRange, relevantEventStore, state.businessHours, calendar)) {\n            return false;\n        }\n        // overlap\n        var overlapFunc = calendar.opt('selectOverlap');\n        if (typeof overlapFunc !== 'function') {\n            overlapFunc = null;\n        }\n        for (var relevantInstanceId in relevantInstances) {\n            var relevantInstance = relevantInstances[relevantInstanceId];\n            // intersect! evaluate\n            if (rangesIntersect(selectionRange, relevantInstance.range)) {\n                if (selectionConfig.overlap === false) {\n                    return false;\n                }\n                if (overlapFunc && !overlapFunc(new EventApi(calendar, relevantDefs[relevantInstance.defId], relevantInstance))) {\n                    return false;\n                }\n            }\n        }\n        // allow (a function)\n        for (var _i = 0, _a = selectionConfig.allows; _i < _a.length; _i++) {\n            var selectionAllow = _a[_i];\n            var fullDateSpan = __assign({}, dateSpanMeta, selection);\n            if (!selectionAllow(calendar.buildDateSpanApi(fullDateSpan), null)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    // Constraint Utils\n    // ------------------------------------------------------------------------------------------------------------------------\n    function allConstraintsPass(constraints, subjectRange, otherEventStore, businessHoursUnexpanded, calendar) {\n        for (var _i = 0, constraints_1 = constraints; _i < constraints_1.length; _i++) {\n            var constraint = constraints_1[_i];\n            if (!anyRangesContainRange(constraintToRanges(constraint, subjectRange, otherEventStore, businessHoursUnexpanded, calendar), subjectRange)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    function constraintToRanges(constraint, subjectRange, // for expanding a recurring constraint, or expanding business hours\n    otherEventStore, // for if constraint is an even group ID\n    businessHoursUnexpanded, // for if constraint is 'businessHours'\n    calendar // for expanding businesshours\n    ) {\n        if (constraint === 'businessHours') {\n            return eventStoreToRanges(expandRecurring(businessHoursUnexpanded, subjectRange, calendar));\n        }\n        else if (typeof constraint === 'string') { // an group ID\n            return eventStoreToRanges(filterEventStoreDefs(otherEventStore, function (eventDef) {\n                return eventDef.groupId === constraint;\n            }));\n        }\n        else if (typeof constraint === 'object' && constraint) { // non-null object\n            return eventStoreToRanges(expandRecurring(constraint, subjectRange, calendar));\n        }\n        return []; // if it's false\n    }\n    // TODO: move to event-store file?\n    function eventStoreToRanges(eventStore) {\n        var instances = eventStore.instances;\n        var ranges = [];\n        for (var instanceId in instances) {\n            ranges.push(instances[instanceId].range);\n        }\n        return ranges;\n    }\n    // TODO: move to geom file?\n    function anyRangesContainRange(outerRanges, innerRange) {\n        for (var _i = 0, outerRanges_1 = outerRanges; _i < outerRanges_1.length; _i++) {\n            var outerRange = outerRanges_1[_i];\n            if (rangeContainsRange(outerRange, innerRange)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    // Parsing\n    // ------------------------------------------------------------------------------------------------------------------------\n    function normalizeConstraint(input, calendar) {\n        if (Array.isArray(input)) {\n            return parseEvents(input, '', calendar, true); // allowOpenRange=true\n        }\n        else if (typeof input === 'object' && input) { // non-null object\n            return parseEvents([input], '', calendar, true); // allowOpenRange=true\n        }\n        else if (input != null) {\n            return String(input);\n        }\n        else {\n            return null;\n        }\n    }\n\n    function htmlEscape(s) {\n        return (s + '').replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/'/g, '&#039;')\n            .replace(/\"/g, '&quot;')\n            .replace(/\\n/g, '<br />');\n    }\n    // Given a hash of CSS properties, returns a string of CSS.\n    // Uses property names as-is (no camel-case conversion). Will not make statements for null/undefined values.\n    function cssToStr(cssProps) {\n        var statements = [];\n        for (var name_1 in cssProps) {\n            var val = cssProps[name_1];\n            if (val != null && val !== '') {\n                statements.push(name_1 + ':' + val);\n            }\n        }\n        return statements.join(';');\n    }\n    // Given an object hash of HTML attribute names to values,\n    // generates a string that can be injected between < > in HTML\n    function attrsToStr(attrs) {\n        var parts = [];\n        for (var name_2 in attrs) {\n            var val = attrs[name_2];\n            if (val != null) {\n                parts.push(name_2 + '=\"' + htmlEscape(val) + '\"');\n            }\n        }\n        return parts.join(' ');\n    }\n    function parseClassName(raw) {\n        if (Array.isArray(raw)) {\n            return raw;\n        }\n        else if (typeof raw === 'string') {\n            return raw.split(/\\s+/);\n        }\n        else {\n            return [];\n        }\n    }\n\n    var UNSCOPED_EVENT_UI_PROPS = {\n        editable: Boolean,\n        startEditable: Boolean,\n        durationEditable: Boolean,\n        constraint: null,\n        overlap: null,\n        allow: null,\n        className: parseClassName,\n        classNames: parseClassName,\n        color: String,\n        backgroundColor: String,\n        borderColor: String,\n        textColor: String\n    };\n    function processUnscopedUiProps(rawProps, calendar, leftovers) {\n        var props = refineProps(rawProps, UNSCOPED_EVENT_UI_PROPS, {}, leftovers);\n        var constraint = normalizeConstraint(props.constraint, calendar);\n        return {\n            startEditable: props.startEditable != null ? props.startEditable : props.editable,\n            durationEditable: props.durationEditable != null ? props.durationEditable : props.editable,\n            constraints: constraint != null ? [constraint] : [],\n            overlap: props.overlap,\n            allows: props.allow != null ? [props.allow] : [],\n            backgroundColor: props.backgroundColor || props.color,\n            borderColor: props.borderColor || props.color,\n            textColor: props.textColor,\n            classNames: props.classNames.concat(props.className)\n        };\n    }\n    function processScopedUiProps(prefix, rawScoped, calendar, leftovers) {\n        var rawUnscoped = {};\n        var wasFound = {};\n        for (var key in UNSCOPED_EVENT_UI_PROPS) {\n            var scopedKey = prefix + capitaliseFirstLetter(key);\n            rawUnscoped[key] = rawScoped[scopedKey];\n            wasFound[scopedKey] = true;\n        }\n        if (prefix === 'event') {\n            rawUnscoped.editable = rawScoped.editable; // special case. there is no 'eventEditable', just 'editable'\n        }\n        if (leftovers) {\n            for (var key in rawScoped) {\n                if (!wasFound[key]) {\n                    leftovers[key] = rawScoped[key];\n                }\n            }\n        }\n        return processUnscopedUiProps(rawUnscoped, calendar);\n    }\n    var EMPTY_EVENT_UI = {\n        startEditable: null,\n        durationEditable: null,\n        constraints: [],\n        overlap: null,\n        allows: [],\n        backgroundColor: '',\n        borderColor: '',\n        textColor: '',\n        classNames: []\n    };\n    // prevent against problems with <2 args!\n    function combineEventUis(uis) {\n        return uis.reduce(combineTwoEventUis, EMPTY_EVENT_UI);\n    }\n    function combineTwoEventUis(item0, item1) {\n        return {\n            startEditable: item1.startEditable != null ? item1.startEditable : item0.startEditable,\n            durationEditable: item1.durationEditable != null ? item1.durationEditable : item0.durationEditable,\n            constraints: item0.constraints.concat(item1.constraints),\n            overlap: typeof item1.overlap === 'boolean' ? item1.overlap : item0.overlap,\n            allows: item0.allows.concat(item1.allows),\n            backgroundColor: item1.backgroundColor || item0.backgroundColor,\n            borderColor: item1.borderColor || item0.borderColor,\n            textColor: item1.textColor || item0.textColor,\n            classNames: item0.classNames.concat(item1.classNames)\n        };\n    }\n\n    var NON_DATE_PROPS = {\n        id: String,\n        groupId: String,\n        title: String,\n        url: String,\n        rendering: String,\n        extendedProps: null\n    };\n    var DATE_PROPS = {\n        start: null,\n        date: null,\n        end: null,\n        allDay: null\n    };\n    var uid = 0;\n    function parseEvent(raw, sourceId, calendar, allowOpenRange) {\n        var allDayDefault = computeIsAllDayDefault(sourceId, calendar);\n        var leftovers0 = {};\n        var recurringRes = parseRecurring(raw, // raw, but with single-event stuff stripped out\n        allDayDefault, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes, leftovers0 // will populate with non-recurring props\n        );\n        if (recurringRes) {\n            var def = parseEventDef(leftovers0, sourceId, recurringRes.allDay, Boolean(recurringRes.duration), calendar);\n            def.recurringDef = {\n                typeId: recurringRes.typeId,\n                typeData: recurringRes.typeData,\n                duration: recurringRes.duration\n            };\n            return { def: def, instance: null };\n        }\n        else {\n            var leftovers1 = {};\n            var singleRes = parseSingle(raw, allDayDefault, calendar, leftovers1, allowOpenRange);\n            if (singleRes) {\n                var def = parseEventDef(leftovers1, sourceId, singleRes.allDay, singleRes.hasEnd, calendar);\n                var instance = createEventInstance(def.defId, singleRes.range, singleRes.forcedStartTzo, singleRes.forcedEndTzo);\n                return { def: def, instance: instance };\n            }\n        }\n        return null;\n    }\n    /*\n    Will NOT populate extendedProps with the leftover properties.\n    Will NOT populate date-related props.\n    The EventNonDateInput has been normalized (id => publicId, etc).\n    */\n    function parseEventDef(raw, sourceId, allDay, hasEnd, calendar) {\n        var leftovers = {};\n        var def = pluckNonDateProps(raw, calendar, leftovers);\n        def.defId = String(uid++);\n        def.sourceId = sourceId;\n        def.allDay = allDay;\n        def.hasEnd = hasEnd;\n        for (var _i = 0, _a = calendar.pluginSystem.hooks.eventDefParsers; _i < _a.length; _i++) {\n            var eventDefParser = _a[_i];\n            var newLeftovers = {};\n            eventDefParser(def, leftovers, newLeftovers);\n            leftovers = newLeftovers;\n        }\n        def.extendedProps = __assign(leftovers, def.extendedProps || {});\n        // help out EventApi from having user modify props\n        Object.freeze(def.ui.classNames);\n        Object.freeze(def.extendedProps);\n        return def;\n    }\n    function createEventInstance(defId, range, forcedStartTzo, forcedEndTzo) {\n        return {\n            instanceId: String(uid++),\n            defId: defId,\n            range: range,\n            forcedStartTzo: forcedStartTzo == null ? null : forcedStartTzo,\n            forcedEndTzo: forcedEndTzo == null ? null : forcedEndTzo\n        };\n    }\n    function parseSingle(raw, allDayDefault, calendar, leftovers, allowOpenRange) {\n        var props = pluckDateProps(raw, leftovers);\n        var allDay = props.allDay;\n        var startMeta;\n        var startMarker = null;\n        var hasEnd = false;\n        var endMeta;\n        var endMarker = null;\n        startMeta = calendar.dateEnv.createMarkerMeta(props.start);\n        if (startMeta) {\n            startMarker = startMeta.marker;\n        }\n        else if (!allowOpenRange) {\n            return null;\n        }\n        if (props.end != null) {\n            endMeta = calendar.dateEnv.createMarkerMeta(props.end);\n        }\n        if (allDay == null) {\n            if (allDayDefault != null) {\n                allDay = allDayDefault;\n            }\n            else {\n                // fall back to the date props LAST\n                allDay = (!startMeta || startMeta.isTimeUnspecified) &&\n                    (!endMeta || endMeta.isTimeUnspecified);\n            }\n        }\n        if (allDay && startMarker) {\n            startMarker = startOfDay(startMarker);\n        }\n        if (endMeta) {\n            endMarker = endMeta.marker;\n            if (allDay) {\n                endMarker = startOfDay(endMarker);\n            }\n            if (startMarker && endMarker <= startMarker) {\n                endMarker = null;\n            }\n        }\n        if (endMarker) {\n            hasEnd = true;\n        }\n        else if (!allowOpenRange) {\n            hasEnd = calendar.opt('forceEventDuration') || false;\n            endMarker = calendar.dateEnv.add(startMarker, allDay ?\n                calendar.defaultAllDayEventDuration :\n                calendar.defaultTimedEventDuration);\n        }\n        return {\n            allDay: allDay,\n            hasEnd: hasEnd,\n            range: { start: startMarker, end: endMarker },\n            forcedStartTzo: startMeta ? startMeta.forcedTzo : null,\n            forcedEndTzo: endMeta ? endMeta.forcedTzo : null\n        };\n    }\n    function pluckDateProps(raw, leftovers) {\n        var props = refineProps(raw, DATE_PROPS, {}, leftovers);\n        props.start = (props.start !== null) ? props.start : props.date;\n        delete props.date;\n        return props;\n    }\n    function pluckNonDateProps(raw, calendar, leftovers) {\n        var preLeftovers = {};\n        var props = refineProps(raw, NON_DATE_PROPS, {}, preLeftovers);\n        var ui = processUnscopedUiProps(preLeftovers, calendar, leftovers);\n        props.publicId = props.id;\n        delete props.id;\n        props.ui = ui;\n        return props;\n    }\n    function computeIsAllDayDefault(sourceId, calendar) {\n        var res = null;\n        if (sourceId) {\n            var source = calendar.state.eventSources[sourceId];\n            res = source.allDayDefault;\n        }\n        if (res == null) {\n            res = calendar.opt('allDayDefault');\n        }\n        return res;\n    }\n\n    var DEF_DEFAULTS = {\n        startTime: '09:00',\n        endTime: '17:00',\n        daysOfWeek: [1, 2, 3, 4, 5],\n        rendering: 'inverse-background',\n        classNames: 'fc-nonbusiness',\n        groupId: '_businessHours' // so multiple defs get grouped\n    };\n    /*\n    TODO: pass around as EventDefHash!!!\n    */\n    function parseBusinessHours(input, calendar) {\n        return parseEvents(refineInputs(input), '', calendar);\n    }\n    function refineInputs(input) {\n        var rawDefs;\n        if (input === true) {\n            rawDefs = [{}]; // will get DEF_DEFAULTS verbatim\n        }\n        else if (Array.isArray(input)) {\n            // if specifying an array, every sub-definition NEEDS a day-of-week\n            rawDefs = input.filter(function (rawDef) {\n                return rawDef.daysOfWeek;\n            });\n        }\n        else if (typeof input === 'object' && input) { // non-null object\n            rawDefs = [input];\n        }\n        else { // is probably false\n            rawDefs = [];\n        }\n        rawDefs = rawDefs.map(function (rawDef) {\n            return __assign({}, DEF_DEFAULTS, rawDef);\n        });\n        return rawDefs;\n    }\n\n    function memoizeRendering(renderFunc, unrenderFunc, dependencies) {\n        if (dependencies === void 0) { dependencies = []; }\n        var dependents = [];\n        var thisContext;\n        var prevArgs;\n        function unrender() {\n            if (prevArgs) {\n                for (var _i = 0, dependents_1 = dependents; _i < dependents_1.length; _i++) {\n                    var dependent = dependents_1[_i];\n                    dependent.unrender();\n                }\n                if (unrenderFunc) {\n                    unrenderFunc.apply(thisContext, prevArgs);\n                }\n                prevArgs = null;\n            }\n        }\n        function res() {\n            if (!prevArgs || !isArraysEqual(prevArgs, arguments)) {\n                unrender();\n                thisContext = this;\n                prevArgs = arguments;\n                renderFunc.apply(this, arguments);\n            }\n        }\n        res.dependents = dependents;\n        res.unrender = unrender;\n        for (var _i = 0, dependencies_1 = dependencies; _i < dependencies_1.length; _i++) {\n            var dependency = dependencies_1[_i];\n            dependency.dependents.push(res);\n        }\n        return res;\n    }\n\n    function isValuesSimilar(val0, val1, depth) {\n        if (depth === void 0) { depth = 1; }\n        if (val0 === val1) {\n            return true;\n        }\n        else if (Array.isArray(val0) && Array.isArray(val1)) {\n            return isArraysSimilar(val0, val1, depth);\n        }\n        else if (typeof val0 === 'object' && val0 && typeof val1 === 'object' && val1) { // non-null objects\n            return isObjectsSimilar(val0, val1, depth);\n        }\n        else {\n            return false;\n        }\n    }\n    function isArraysSimilar(a0, a1, depth) {\n        if (depth === void 0) { depth = 1; }\n        if (a0 === a1) {\n            return true;\n        }\n        else if (depth > 0) {\n            if (a0.length !== a1.length) {\n                return false;\n            }\n            else {\n                for (var i = 0; i < a0.length; i++) {\n                    if (!isValuesSimilar(a0[i], a1[i], depth - 1)) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        }\n        else {\n            return false;\n        }\n    }\n    function isObjectsSimilar(obj0, obj1, depth) {\n        if (depth === void 0) { depth = 1; }\n        if (obj0 === obj1) {\n            return true;\n        }\n        else if (depth > 0) {\n            for (var prop in obj0) {\n                if (!(prop in obj1)) {\n                    return false;\n                }\n            }\n            for (var prop in obj1) {\n                if (!(prop in obj0)) {\n                    return false;\n                }\n                else {\n                    if (!isValuesSimilar(obj0[prop], obj1[prop], depth - 1)) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    function computeChangedProps(obj0, obj1, depth) {\n        if (depth === void 0) { depth = 1; }\n        var res = {};\n        for (var prop in obj1) {\n            if (!(prop in obj0) ||\n                !isValuesSimilar(obj0[prop], obj1[prop], depth - 1)) {\n                res[prop] = obj1[prop];\n            }\n        }\n        return res;\n    }\n    function anyKeysRemoved(obj0, obj1) {\n        for (var prop in obj0) {\n            if (!(prop in obj1)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    var EMPTY_EVENT_STORE = createEmptyEventStore(); // for purecomponents. TODO: keep elsewhere\n    var Splitter = /** @class */ (function () {\n        function Splitter() {\n            this.getKeysForEventDefs = memoize(this._getKeysForEventDefs);\n            this.splitDateSelection = memoize(this._splitDateSpan);\n            this.splitEventStore = memoize(this._splitEventStore);\n            this.splitIndividualUi = memoize(this._splitIndividualUi);\n            this.splitEventDrag = memoize(this._splitInteraction);\n            this.splitEventResize = memoize(this._splitInteraction);\n            this.eventUiBuilders = {}; // TODO: typescript protection\n        }\n        Splitter.prototype.splitProps = function (props) {\n            var _this = this;\n            var keyInfos = this.getKeyInfo(props);\n            var defKeys = this.getKeysForEventDefs(props.eventStore);\n            var dateSelections = this.splitDateSelection(props.dateSelection);\n            var individualUi = this.splitIndividualUi(props.eventUiBases, defKeys); // the individual *bases*\n            var eventStores = this.splitEventStore(props.eventStore, defKeys);\n            var eventDrags = this.splitEventDrag(props.eventDrag);\n            var eventResizes = this.splitEventResize(props.eventResize);\n            var splitProps = {};\n            this.eventUiBuilders = mapHash(keyInfos, function (info, key) {\n                return _this.eventUiBuilders[key] || memoize(buildEventUiForKey);\n            });\n            for (var key in keyInfos) {\n                var keyInfo = keyInfos[key];\n                var eventStore = eventStores[key] || EMPTY_EVENT_STORE;\n                var buildEventUi = this.eventUiBuilders[key];\n                splitProps[key] = {\n                    businessHours: keyInfo.businessHours || props.businessHours,\n                    dateSelection: dateSelections[key] || null,\n                    eventStore: eventStore,\n                    eventUiBases: buildEventUi(props.eventUiBases[''], keyInfo.ui, individualUi[key]),\n                    eventSelection: eventStore.instances[props.eventSelection] ? props.eventSelection : '',\n                    eventDrag: eventDrags[key] || null,\n                    eventResize: eventResizes[key] || null\n                };\n            }\n            return splitProps;\n        };\n        Splitter.prototype._splitDateSpan = function (dateSpan) {\n            var dateSpans = {};\n            if (dateSpan) {\n                var keys = this.getKeysForDateSpan(dateSpan);\n                for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                    var key = keys_1[_i];\n                    dateSpans[key] = dateSpan;\n                }\n            }\n            return dateSpans;\n        };\n        Splitter.prototype._getKeysForEventDefs = function (eventStore) {\n            var _this = this;\n            return mapHash(eventStore.defs, function (eventDef) {\n                return _this.getKeysForEventDef(eventDef);\n            });\n        };\n        Splitter.prototype._splitEventStore = function (eventStore, defKeys) {\n            var defs = eventStore.defs, instances = eventStore.instances;\n            var splitStores = {};\n            for (var defId in defs) {\n                for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                    var key = _a[_i];\n                    if (!splitStores[key]) {\n                        splitStores[key] = createEmptyEventStore();\n                    }\n                    splitStores[key].defs[defId] = defs[defId];\n                }\n            }\n            for (var instanceId in instances) {\n                var instance = instances[instanceId];\n                for (var _b = 0, _c = defKeys[instance.defId]; _b < _c.length; _b++) {\n                    var key = _c[_b];\n                    if (splitStores[key]) { // must have already been created\n                        splitStores[key].instances[instanceId] = instance;\n                    }\n                }\n            }\n            return splitStores;\n        };\n        Splitter.prototype._splitIndividualUi = function (eventUiBases, defKeys) {\n            var splitHashes = {};\n            for (var defId in eventUiBases) {\n                if (defId) { // not the '' key\n                    for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                        var key = _a[_i];\n                        if (!splitHashes[key]) {\n                            splitHashes[key] = {};\n                        }\n                        splitHashes[key][defId] = eventUiBases[defId];\n                    }\n                }\n            }\n            return splitHashes;\n        };\n        Splitter.prototype._splitInteraction = function (interaction) {\n            var splitStates = {};\n            if (interaction) {\n                var affectedStores_1 = this._splitEventStore(interaction.affectedEvents, this._getKeysForEventDefs(interaction.affectedEvents) // can't use cached. might be events from other calendar\n                );\n                // can't rely on defKeys because event data is mutated\n                var mutatedKeysByDefId = this._getKeysForEventDefs(interaction.mutatedEvents);\n                var mutatedStores_1 = this._splitEventStore(interaction.mutatedEvents, mutatedKeysByDefId);\n                var populate = function (key) {\n                    if (!splitStates[key]) {\n                        splitStates[key] = {\n                            affectedEvents: affectedStores_1[key] || EMPTY_EVENT_STORE,\n                            mutatedEvents: mutatedStores_1[key] || EMPTY_EVENT_STORE,\n                            isEvent: interaction.isEvent,\n                            origSeg: interaction.origSeg\n                        };\n                    }\n                };\n                for (var key in affectedStores_1) {\n                    populate(key);\n                }\n                for (var key in mutatedStores_1) {\n                    populate(key);\n                }\n            }\n            return splitStates;\n        };\n        return Splitter;\n    }());\n    function buildEventUiForKey(allUi, eventUiForKey, individualUi) {\n        var baseParts = [];\n        if (allUi) {\n            baseParts.push(allUi);\n        }\n        if (eventUiForKey) {\n            baseParts.push(eventUiForKey);\n        }\n        var stuff = {\n            '': combineEventUis(baseParts)\n        };\n        if (individualUi) {\n            __assign(stuff, individualUi);\n        }\n        return stuff;\n    }\n\n    // Generates HTML for an anchor to another view into the calendar.\n    // Will either generate an <a> tag or a non-clickable <span> tag, depending on enabled settings.\n    // `gotoOptions` can either be a DateMarker, or an object with the form:\n    // { date, type, forceOff }\n    // `type` is a view-type like \"day\" or \"week\". default value is \"day\".\n    // `attrs` and `innerHtml` are use to generate the rest of the HTML tag.\n    function buildGotoAnchorHtml(component, gotoOptions, attrs, innerHtml) {\n        var dateEnv = component.dateEnv;\n        var date;\n        var type;\n        var forceOff;\n        var finalOptions;\n        if (gotoOptions instanceof Date) {\n            date = gotoOptions; // a single date-like input\n        }\n        else {\n            date = gotoOptions.date;\n            type = gotoOptions.type;\n            forceOff = gotoOptions.forceOff;\n        }\n        finalOptions = {\n            date: dateEnv.formatIso(date, { omitTime: true }),\n            type: type || 'day'\n        };\n        if (typeof attrs === 'string') {\n            innerHtml = attrs;\n            attrs = null;\n        }\n        attrs = attrs ? ' ' + attrsToStr(attrs) : ''; // will have a leading space\n        innerHtml = innerHtml || '';\n        if (!forceOff && component.opt('navLinks')) {\n            return '<a' + attrs +\n                ' data-goto=\"' + htmlEscape(JSON.stringify(finalOptions)) + '\">' +\n                innerHtml +\n                '</a>';\n        }\n        else {\n            return '<span' + attrs + '>' +\n                innerHtml +\n                '</span>';\n        }\n    }\n    function getAllDayHtml(component) {\n        return component.opt('allDayHtml') || htmlEscape(component.opt('allDayText'));\n    }\n    // Computes HTML classNames for a single-day element\n    function getDayClasses(date, dateProfile, context, noThemeHighlight) {\n        var calendar = context.calendar, view = context.view, theme = context.theme, dateEnv = context.dateEnv;\n        var classes = [];\n        var todayStart;\n        var todayEnd;\n        if (!rangeContainsMarker(dateProfile.activeRange, date)) {\n            classes.push('fc-disabled-day');\n        }\n        else {\n            classes.push('fc-' + DAY_IDS[date.getUTCDay()]);\n            if (view.opt('monthMode') &&\n                dateEnv.getMonth(date) !== dateEnv.getMonth(dateProfile.currentRange.start)) {\n                classes.push('fc-other-month');\n            }\n            todayStart = startOfDay(calendar.getNow());\n            todayEnd = addDays(todayStart, 1);\n            if (date < todayStart) {\n                classes.push('fc-past');\n            }\n            else if (date >= todayEnd) {\n                classes.push('fc-future');\n            }\n            else {\n                classes.push('fc-today');\n                if (noThemeHighlight !== true) {\n                    classes.push(theme.getClass('today'));\n                }\n            }\n        }\n        return classes;\n    }\n\n    // given a function that resolves a result asynchronously.\n    // the function can either call passed-in success and failure callbacks,\n    // or it can return a promise.\n    // if you need to pass additional params to func, bind them first.\n    function unpromisify(func, success, failure) {\n        // guard against success/failure callbacks being called more than once\n        // and guard against a promise AND callback being used together.\n        var isResolved = false;\n        var wrappedSuccess = function () {\n            if (!isResolved) {\n                isResolved = true;\n                success.apply(this, arguments);\n            }\n        };\n        var wrappedFailure = function () {\n            if (!isResolved) {\n                isResolved = true;\n                if (failure) {\n                    failure.apply(this, arguments);\n                }\n            }\n        };\n        var res = func(wrappedSuccess, wrappedFailure);\n        if (res && typeof res.then === 'function') {\n            res.then(wrappedSuccess, wrappedFailure);\n        }\n    }\n\n    var Mixin = /** @class */ (function () {\n        function Mixin() {\n        }\n        // mix into a CLASS\n        Mixin.mixInto = function (destClass) {\n            this.mixIntoObj(destClass.prototype);\n        };\n        // mix into ANY object\n        Mixin.mixIntoObj = function (destObj) {\n            var _this = this;\n            Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n                if (!destObj[name]) { // if destination doesn't already define it\n                    destObj[name] = _this.prototype[name];\n                }\n            });\n        };\n        /*\n        will override existing methods\n        TODO: remove! not used anymore\n        */\n        Mixin.mixOver = function (destClass) {\n            var _this = this;\n            Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n                destClass.prototype[name] = _this.prototype[name];\n            });\n        };\n        return Mixin;\n    }());\n\n    /*\n    USAGE:\n      import { default as EmitterMixin, EmitterInterface } from './EmitterMixin'\n    in class:\n      on: EmitterInterface['on']\n      one: EmitterInterface['one']\n      off: EmitterInterface['off']\n      trigger: EmitterInterface['trigger']\n      triggerWith: EmitterInterface['triggerWith']\n      hasHandlers: EmitterInterface['hasHandlers']\n    after class:\n      EmitterMixin.mixInto(TheClass)\n    */\n    var EmitterMixin = /** @class */ (function (_super) {\n        __extends(EmitterMixin, _super);\n        function EmitterMixin() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        EmitterMixin.prototype.on = function (type, handler) {\n            addToHash(this._handlers || (this._handlers = {}), type, handler);\n            return this; // for chaining\n        };\n        // todo: add comments\n        EmitterMixin.prototype.one = function (type, handler) {\n            addToHash(this._oneHandlers || (this._oneHandlers = {}), type, handler);\n            return this; // for chaining\n        };\n        EmitterMixin.prototype.off = function (type, handler) {\n            if (this._handlers) {\n                removeFromHash(this._handlers, type, handler);\n            }\n            if (this._oneHandlers) {\n                removeFromHash(this._oneHandlers, type, handler);\n            }\n            return this; // for chaining\n        };\n        EmitterMixin.prototype.trigger = function (type) {\n            var args = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                args[_i - 1] = arguments[_i];\n            }\n            this.triggerWith(type, this, args);\n            return this; // for chaining\n        };\n        EmitterMixin.prototype.triggerWith = function (type, context, args) {\n            if (this._handlers) {\n                applyAll(this._handlers[type], context, args);\n            }\n            if (this._oneHandlers) {\n                applyAll(this._oneHandlers[type], context, args);\n                delete this._oneHandlers[type]; // will never fire again\n            }\n            return this; // for chaining\n        };\n        EmitterMixin.prototype.hasHandlers = function (type) {\n            return (this._handlers && this._handlers[type] && this._handlers[type].length) ||\n                (this._oneHandlers && this._oneHandlers[type] && this._oneHandlers[type].length);\n        };\n        return EmitterMixin;\n    }(Mixin));\n    function addToHash(hash, type, handler) {\n        (hash[type] || (hash[type] = []))\n            .push(handler);\n    }\n    function removeFromHash(hash, type, handler) {\n        if (handler) {\n            if (hash[type]) {\n                hash[type] = hash[type].filter(function (func) {\n                    return func !== handler;\n                });\n            }\n        }\n        else {\n            delete hash[type]; // remove all handler funcs for this type\n        }\n    }\n\n    /*\n    Records offset information for a set of elements, relative to an origin element.\n    Can record the left/right OR the top/bottom OR both.\n    Provides methods for querying the cache by position.\n    */\n    var PositionCache = /** @class */ (function () {\n        function PositionCache(originEl, els, isHorizontal, isVertical) {\n            this.originEl = originEl;\n            this.els = els;\n            this.isHorizontal = isHorizontal;\n            this.isVertical = isVertical;\n        }\n        // Queries the els for coordinates and stores them.\n        // Call this method before using and of the get* methods below.\n        PositionCache.prototype.build = function () {\n            var originEl = this.originEl;\n            var originClientRect = this.originClientRect =\n                originEl.getBoundingClientRect(); // relative to viewport top-left\n            if (this.isHorizontal) {\n                this.buildElHorizontals(originClientRect.left);\n            }\n            if (this.isVertical) {\n                this.buildElVerticals(originClientRect.top);\n            }\n        };\n        // Populates the left/right internal coordinate arrays\n        PositionCache.prototype.buildElHorizontals = function (originClientLeft) {\n            var lefts = [];\n            var rights = [];\n            for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n                var el = _a[_i];\n                var rect = el.getBoundingClientRect();\n                lefts.push(rect.left - originClientLeft);\n                rights.push(rect.right - originClientLeft);\n            }\n            this.lefts = lefts;\n            this.rights = rights;\n        };\n        // Populates the top/bottom internal coordinate arrays\n        PositionCache.prototype.buildElVerticals = function (originClientTop) {\n            var tops = [];\n            var bottoms = [];\n            for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n                var el = _a[_i];\n                var rect = el.getBoundingClientRect();\n                tops.push(rect.top - originClientTop);\n                bottoms.push(rect.bottom - originClientTop);\n            }\n            this.tops = tops;\n            this.bottoms = bottoms;\n        };\n        // Given a left offset (from document left), returns the index of the el that it horizontally intersects.\n        // If no intersection is made, returns undefined.\n        PositionCache.prototype.leftToIndex = function (leftPosition) {\n            var lefts = this.lefts;\n            var rights = this.rights;\n            var len = lefts.length;\n            var i;\n            for (i = 0; i < len; i++) {\n                if (leftPosition >= lefts[i] && leftPosition < rights[i]) {\n                    return i;\n                }\n            }\n        };\n        // Given a top offset (from document top), returns the index of the el that it vertically intersects.\n        // If no intersection is made, returns undefined.\n        PositionCache.prototype.topToIndex = function (topPosition) {\n            var tops = this.tops;\n            var bottoms = this.bottoms;\n            var len = tops.length;\n            var i;\n            for (i = 0; i < len; i++) {\n                if (topPosition >= tops[i] && topPosition < bottoms[i]) {\n                    return i;\n                }\n            }\n        };\n        // Gets the width of the element at the given index\n        PositionCache.prototype.getWidth = function (leftIndex) {\n            return this.rights[leftIndex] - this.lefts[leftIndex];\n        };\n        // Gets the height of the element at the given index\n        PositionCache.prototype.getHeight = function (topIndex) {\n            return this.bottoms[topIndex] - this.tops[topIndex];\n        };\n        return PositionCache;\n    }());\n\n    /*\n    An object for getting/setting scroll-related information for an element.\n    Internally, this is done very differently for window versus DOM element,\n    so this object serves as a common interface.\n    */\n    var ScrollController = /** @class */ (function () {\n        function ScrollController() {\n        }\n        ScrollController.prototype.getMaxScrollTop = function () {\n            return this.getScrollHeight() - this.getClientHeight();\n        };\n        ScrollController.prototype.getMaxScrollLeft = function () {\n            return this.getScrollWidth() - this.getClientWidth();\n        };\n        ScrollController.prototype.canScrollVertically = function () {\n            return this.getMaxScrollTop() > 0;\n        };\n        ScrollController.prototype.canScrollHorizontally = function () {\n            return this.getMaxScrollLeft() > 0;\n        };\n        ScrollController.prototype.canScrollUp = function () {\n            return this.getScrollTop() > 0;\n        };\n        ScrollController.prototype.canScrollDown = function () {\n            return this.getScrollTop() < this.getMaxScrollTop();\n        };\n        ScrollController.prototype.canScrollLeft = function () {\n            return this.getScrollLeft() > 0;\n        };\n        ScrollController.prototype.canScrollRight = function () {\n            return this.getScrollLeft() < this.getMaxScrollLeft();\n        };\n        return ScrollController;\n    }());\n    var ElementScrollController = /** @class */ (function (_super) {\n        __extends(ElementScrollController, _super);\n        function ElementScrollController(el) {\n            var _this = _super.call(this) || this;\n            _this.el = el;\n            return _this;\n        }\n        ElementScrollController.prototype.getScrollTop = function () {\n            return this.el.scrollTop;\n        };\n        ElementScrollController.prototype.getScrollLeft = function () {\n            return this.el.scrollLeft;\n        };\n        ElementScrollController.prototype.setScrollTop = function (top) {\n            this.el.scrollTop = top;\n        };\n        ElementScrollController.prototype.setScrollLeft = function (left) {\n            this.el.scrollLeft = left;\n        };\n        ElementScrollController.prototype.getScrollWidth = function () {\n            return this.el.scrollWidth;\n        };\n        ElementScrollController.prototype.getScrollHeight = function () {\n            return this.el.scrollHeight;\n        };\n        ElementScrollController.prototype.getClientHeight = function () {\n            return this.el.clientHeight;\n        };\n        ElementScrollController.prototype.getClientWidth = function () {\n            return this.el.clientWidth;\n        };\n        return ElementScrollController;\n    }(ScrollController));\n    var WindowScrollController = /** @class */ (function (_super) {\n        __extends(WindowScrollController, _super);\n        function WindowScrollController() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        WindowScrollController.prototype.getScrollTop = function () {\n            return window.pageYOffset;\n        };\n        WindowScrollController.prototype.getScrollLeft = function () {\n            return window.pageXOffset;\n        };\n        WindowScrollController.prototype.setScrollTop = function (n) {\n            window.scroll(window.pageXOffset, n);\n        };\n        WindowScrollController.prototype.setScrollLeft = function (n) {\n            window.scroll(n, window.pageYOffset);\n        };\n        WindowScrollController.prototype.getScrollWidth = function () {\n            return document.documentElement.scrollWidth;\n        };\n        WindowScrollController.prototype.getScrollHeight = function () {\n            return document.documentElement.scrollHeight;\n        };\n        WindowScrollController.prototype.getClientHeight = function () {\n            return document.documentElement.clientHeight;\n        };\n        WindowScrollController.prototype.getClientWidth = function () {\n            return document.documentElement.clientWidth;\n        };\n        return WindowScrollController;\n    }(ScrollController));\n\n    /*\n    Embodies a div that has potential scrollbars\n    */\n    var ScrollComponent = /** @class */ (function (_super) {\n        __extends(ScrollComponent, _super);\n        function ScrollComponent(overflowX, overflowY) {\n            var _this = _super.call(this, createElement('div', {\n                className: 'fc-scroller'\n            })) || this;\n            _this.overflowX = overflowX;\n            _this.overflowY = overflowY;\n            _this.applyOverflow();\n            return _this;\n        }\n        // sets to natural height, unlocks overflow\n        ScrollComponent.prototype.clear = function () {\n            this.setHeight('auto');\n            this.applyOverflow();\n        };\n        ScrollComponent.prototype.destroy = function () {\n            removeElement(this.el);\n        };\n        // Overflow\n        // -----------------------------------------------------------------------------------------------------------------\n        ScrollComponent.prototype.applyOverflow = function () {\n            applyStyle(this.el, {\n                overflowX: this.overflowX,\n                overflowY: this.overflowY\n            });\n        };\n        // Causes any 'auto' overflow values to resolves to 'scroll' or 'hidden'.\n        // Useful for preserving scrollbar widths regardless of future resizes.\n        // Can pass in scrollbarWidths for optimization.\n        ScrollComponent.prototype.lockOverflow = function (scrollbarWidths) {\n            var overflowX = this.overflowX;\n            var overflowY = this.overflowY;\n            scrollbarWidths = scrollbarWidths || this.getScrollbarWidths();\n            if (overflowX === 'auto') {\n                overflowX = (scrollbarWidths.bottom || // horizontal scrollbars?\n                    this.canScrollHorizontally() // OR scrolling pane with massless scrollbars?\n                ) ? 'scroll' : 'hidden';\n            }\n            if (overflowY === 'auto') {\n                overflowY = (scrollbarWidths.left || scrollbarWidths.right || // horizontal scrollbars?\n                    this.canScrollVertically() // OR scrolling pane with massless scrollbars?\n                ) ? 'scroll' : 'hidden';\n            }\n            applyStyle(this.el, { overflowX: overflowX, overflowY: overflowY });\n        };\n        ScrollComponent.prototype.setHeight = function (height) {\n            applyStyleProp(this.el, 'height', height);\n        };\n        ScrollComponent.prototype.getScrollbarWidths = function () {\n            var edges = computeEdges(this.el);\n            return {\n                left: edges.scrollbarLeft,\n                right: edges.scrollbarRight,\n                bottom: edges.scrollbarBottom\n            };\n        };\n        return ScrollComponent;\n    }(ElementScrollController));\n\n    var Theme = /** @class */ (function () {\n        function Theme(calendarOptions) {\n            this.calendarOptions = calendarOptions;\n            this.processIconOverride();\n        }\n        Theme.prototype.processIconOverride = function () {\n            if (this.iconOverrideOption) {\n                this.setIconOverride(this.calendarOptions[this.iconOverrideOption]);\n            }\n        };\n        Theme.prototype.setIconOverride = function (iconOverrideHash) {\n            var iconClassesCopy;\n            var buttonName;\n            if (typeof iconOverrideHash === 'object' && iconOverrideHash) { // non-null object\n                iconClassesCopy = __assign({}, this.iconClasses);\n                for (buttonName in iconOverrideHash) {\n                    iconClassesCopy[buttonName] = this.applyIconOverridePrefix(iconOverrideHash[buttonName]);\n                }\n                this.iconClasses = iconClassesCopy;\n            }\n            else if (iconOverrideHash === false) {\n                this.iconClasses = {};\n            }\n        };\n        Theme.prototype.applyIconOverridePrefix = function (className) {\n            var prefix = this.iconOverridePrefix;\n            if (prefix && className.indexOf(prefix) !== 0) { // if not already present\n                className = prefix + className;\n            }\n            return className;\n        };\n        Theme.prototype.getClass = function (key) {\n            return this.classes[key] || '';\n        };\n        Theme.prototype.getIconClass = function (buttonName) {\n            var className = this.iconClasses[buttonName];\n            if (className) {\n                return this.baseIconClass + ' ' + className;\n            }\n            return '';\n        };\n        Theme.prototype.getCustomButtonIconClass = function (customButtonProps) {\n            var className;\n            if (this.iconOverrideCustomButtonOption) {\n                className = customButtonProps[this.iconOverrideCustomButtonOption];\n                if (className) {\n                    return this.baseIconClass + ' ' + this.applyIconOverridePrefix(className);\n                }\n            }\n            return '';\n        };\n        return Theme;\n    }());\n    Theme.prototype.classes = {};\n    Theme.prototype.iconClasses = {};\n    Theme.prototype.baseIconClass = '';\n    Theme.prototype.iconOverridePrefix = '';\n\n    var guid = 0;\n    var Component = /** @class */ (function () {\n        function Component(context, isView) {\n            // HACK to populate view at top of component instantiation call chain\n            if (isView) {\n                context.view = this;\n            }\n            this.uid = String(guid++);\n            this.context = context;\n            this.dateEnv = context.dateEnv;\n            this.theme = context.theme;\n            this.view = context.view;\n            this.calendar = context.calendar;\n            this.isRtl = this.opt('dir') === 'rtl';\n        }\n        Component.addEqualityFuncs = function (newFuncs) {\n            this.prototype.equalityFuncs = __assign({}, this.prototype.equalityFuncs, newFuncs);\n        };\n        Component.prototype.opt = function (name) {\n            return this.context.options[name];\n        };\n        Component.prototype.receiveProps = function (props) {\n            var _a = recycleProps(this.props || {}, props, this.equalityFuncs), anyChanges = _a.anyChanges, comboProps = _a.comboProps;\n            this.props = comboProps;\n            if (anyChanges) {\n                this.render(comboProps);\n            }\n        };\n        Component.prototype.render = function (props) {\n        };\n        // after destroy is called, this component won't ever be used again\n        Component.prototype.destroy = function () {\n        };\n        return Component;\n    }());\n    Component.prototype.equalityFuncs = {};\n    /*\n    Reuses old values when equal. If anything is unequal, returns newProps as-is.\n    Great for PureComponent, but won't be feasible with React, so just eliminate and use React's DOM diffing.\n    */\n    function recycleProps(oldProps, newProps, equalityFuncs) {\n        var comboProps = {}; // some old, some new\n        var anyChanges = false;\n        for (var key in newProps) {\n            if (key in oldProps && (oldProps[key] === newProps[key] ||\n                (equalityFuncs[key] && equalityFuncs[key](oldProps[key], newProps[key])))) {\n                // equal to old? use old prop\n                comboProps[key] = oldProps[key];\n            }\n            else {\n                comboProps[key] = newProps[key];\n                anyChanges = true;\n            }\n        }\n        for (var key in oldProps) {\n            if (!(key in newProps)) {\n                anyChanges = true;\n                break;\n            }\n        }\n        return { anyChanges: anyChanges, comboProps: comboProps };\n    }\n\n    /*\n    PURPOSES:\n    - hook up to fg, fill, and mirror renderers\n    - interface for dragging and hits\n    */\n    var DateComponent = /** @class */ (function (_super) {\n        __extends(DateComponent, _super);\n        function DateComponent(context, el, isView) {\n            var _this = _super.call(this, context, isView) || this;\n            _this.el = el;\n            return _this;\n        }\n        DateComponent.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            removeElement(this.el);\n        };\n        // TODO: WHAT ABOUT (sourceSeg && sourceSeg.component.doesDragMirror)\n        //\n        // Event Drag-n-Drop Rendering (for both events and external elements)\n        // ---------------------------------------------------------------------------------------------------------------\n        /*\n        renderEventDragSegs(state: EventSegUiInteractionState) {\n          if (state) {\n            let { isEvent, segs, sourceSeg } = state\n      \n            if (this.eventRenderer) {\n              this.eventRenderer.hideByHash(state.affectedInstances)\n            }\n      \n            // if the user is dragging something that is considered an event with real event data,\n            // and this component likes to do drag mirrors OR the component where the seg came from\n            // likes to do drag mirrors, then render a drag mirror.\n            if (isEvent && (this.doesDragMirror || sourceSeg && sourceSeg.component.doesDragMirror)) {\n              if (this.mirrorRenderer) {\n                this.mirrorRenderer.renderSegs(segs, { isDragging: true, sourceSeg })\n              }\n            }\n      \n            // if it would be impossible to render a drag mirror OR this component likes to render\n            // highlights, then render a highlight.\n            if (!isEvent || this.doesDragHighlight) {\n              if (this.fillRenderer) {\n                this.fillRenderer.renderSegs('highlight', segs)\n              }\n            }\n          }\n        }\n        */\n        // Hit System\n        // -----------------------------------------------------------------------------------------------------------------\n        DateComponent.prototype.buildPositionCaches = function () {\n        };\n        DateComponent.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n            return null; // this should be abstract\n        };\n        // Validation\n        // -----------------------------------------------------------------------------------------------------------------\n        DateComponent.prototype.isInteractionValid = function (interaction) {\n            var calendar = this.calendar;\n            var dateProfile = this.props.dateProfile; // HACK\n            var instances = interaction.mutatedEvents.instances;\n            if (dateProfile) { // HACK for DayTile\n                for (var instanceId in instances) {\n                    if (!rangeContainsRange(dateProfile.validRange, instances[instanceId].range)) {\n                        return false;\n                    }\n                }\n            }\n            return isInteractionValid(interaction, calendar);\n        };\n        DateComponent.prototype.isDateSelectionValid = function (selection) {\n            var dateProfile = this.props.dateProfile; // HACK\n            if (dateProfile && // HACK for DayTile\n                !rangeContainsRange(dateProfile.validRange, selection.range)) {\n                return false;\n            }\n            return isDateSelectionValid(selection, this.calendar);\n        };\n        // Triggering\n        // -----------------------------------------------------------------------------------------------------------------\n        // TODO: move to Calendar\n        DateComponent.prototype.publiclyTrigger = function (name, args) {\n            var calendar = this.calendar;\n            return calendar.publiclyTrigger(name, args);\n        };\n        DateComponent.prototype.publiclyTriggerAfterSizing = function (name, args) {\n            var calendar = this.calendar;\n            return calendar.publiclyTriggerAfterSizing(name, args);\n        };\n        DateComponent.prototype.hasPublicHandlers = function (name) {\n            var calendar = this.calendar;\n            return calendar.hasPublicHandlers(name);\n        };\n        DateComponent.prototype.triggerRenderedSegs = function (segs, isMirrors) {\n            var calendar = this.calendar;\n            if (this.hasPublicHandlers('eventPositioned')) {\n                for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                    var seg = segs_1[_i];\n                    this.publiclyTriggerAfterSizing('eventPositioned', [\n                        {\n                            event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                            isMirror: isMirrors,\n                            isStart: seg.isStart,\n                            isEnd: seg.isEnd,\n                            el: seg.el,\n                            view: this // ?\n                        }\n                    ]);\n                }\n            }\n            if (!calendar.state.loadingLevel) { // avoid initial empty state while pending\n                calendar.afterSizingTriggers._eventsPositioned = [null]; // fire once\n            }\n        };\n        DateComponent.prototype.triggerWillRemoveSegs = function (segs, isMirrors) {\n            var calendar = this.calendar;\n            for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n                var seg = segs_2[_i];\n                calendar.trigger('eventElRemove', seg.el);\n            }\n            if (this.hasPublicHandlers('eventDestroy')) {\n                for (var _a = 0, segs_3 = segs; _a < segs_3.length; _a++) {\n                    var seg = segs_3[_a];\n                    this.publiclyTrigger('eventDestroy', [\n                        {\n                            event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                            isMirror: isMirrors,\n                            el: seg.el,\n                            view: this // ?\n                        }\n                    ]);\n                }\n            }\n        };\n        // Pointer Interaction Utils\n        // -----------------------------------------------------------------------------------------------------------------\n        DateComponent.prototype.isValidSegDownEl = function (el) {\n            return !this.props.eventDrag && // HACK\n                !this.props.eventResize && // HACK\n                !elementClosest(el, '.fc-mirror') &&\n                (this.isPopover() || !this.isInPopover(el));\n            // ^above line ensures we don't detect a seg interaction within a nested component.\n            // it's a HACK because it only supports a popover as the nested component.\n        };\n        DateComponent.prototype.isValidDateDownEl = function (el) {\n            var segEl = elementClosest(el, this.fgSegSelector);\n            return (!segEl || segEl.classList.contains('fc-mirror')) &&\n                !elementClosest(el, '.fc-more') && // a \"more..\" link\n                !elementClosest(el, 'a[data-goto]') && // a clickable nav link\n                !this.isInPopover(el);\n        };\n        DateComponent.prototype.isPopover = function () {\n            return this.el.classList.contains('fc-popover');\n        };\n        DateComponent.prototype.isInPopover = function (el) {\n            return Boolean(elementClosest(el, '.fc-popover'));\n        };\n        return DateComponent;\n    }(Component));\n    DateComponent.prototype.fgSegSelector = '.fc-event-container > *';\n    DateComponent.prototype.bgSegSelector = '.fc-bgevent:not(.fc-nonbusiness)';\n\n    var uid$1 = 0;\n    function createPlugin(input) {\n        return {\n            id: String(uid$1++),\n            deps: input.deps || [],\n            reducers: input.reducers || [],\n            eventDefParsers: input.eventDefParsers || [],\n            eventDragMutationMassagers: input.eventDragMutationMassagers || [],\n            eventDefMutationAppliers: input.eventDefMutationAppliers || [],\n            dateSelectionTransformers: input.dateSelectionTransformers || [],\n            datePointTransforms: input.datePointTransforms || [],\n            dateSpanTransforms: input.dateSpanTransforms || [],\n            views: input.views || {},\n            viewPropsTransformers: input.viewPropsTransformers || [],\n            isPropsValid: input.isPropsValid || null,\n            externalDefTransforms: input.externalDefTransforms || [],\n            eventResizeJoinTransforms: input.eventResizeJoinTransforms || [],\n            viewContainerModifiers: input.viewContainerModifiers || [],\n            eventDropTransformers: input.eventDropTransformers || [],\n            componentInteractions: input.componentInteractions || [],\n            calendarInteractions: input.calendarInteractions || [],\n            themeClasses: input.themeClasses || {},\n            eventSourceDefs: input.eventSourceDefs || [],\n            cmdFormatter: input.cmdFormatter,\n            recurringTypes: input.recurringTypes || [],\n            namedTimeZonedImpl: input.namedTimeZonedImpl,\n            defaultView: input.defaultView || '',\n            elementDraggingImpl: input.elementDraggingImpl,\n            optionChangeHandlers: input.optionChangeHandlers || {}\n        };\n    }\n    var PluginSystem = /** @class */ (function () {\n        function PluginSystem() {\n            this.hooks = {\n                reducers: [],\n                eventDefParsers: [],\n                eventDragMutationMassagers: [],\n                eventDefMutationAppliers: [],\n                dateSelectionTransformers: [],\n                datePointTransforms: [],\n                dateSpanTransforms: [],\n                views: {},\n                viewPropsTransformers: [],\n                isPropsValid: null,\n                externalDefTransforms: [],\n                eventResizeJoinTransforms: [],\n                viewContainerModifiers: [],\n                eventDropTransformers: [],\n                componentInteractions: [],\n                calendarInteractions: [],\n                themeClasses: {},\n                eventSourceDefs: [],\n                cmdFormatter: null,\n                recurringTypes: [],\n                namedTimeZonedImpl: null,\n                defaultView: '',\n                elementDraggingImpl: null,\n                optionChangeHandlers: {}\n            };\n            this.addedHash = {};\n        }\n        PluginSystem.prototype.add = function (plugin) {\n            if (!this.addedHash[plugin.id]) {\n                this.addedHash[plugin.id] = true;\n                for (var _i = 0, _a = plugin.deps; _i < _a.length; _i++) {\n                    var dep = _a[_i];\n                    this.add(dep);\n                }\n                this.hooks = combineHooks(this.hooks, plugin);\n            }\n        };\n        return PluginSystem;\n    }());\n    function combineHooks(hooks0, hooks1) {\n        return {\n            reducers: hooks0.reducers.concat(hooks1.reducers),\n            eventDefParsers: hooks0.eventDefParsers.concat(hooks1.eventDefParsers),\n            eventDragMutationMassagers: hooks0.eventDragMutationMassagers.concat(hooks1.eventDragMutationMassagers),\n            eventDefMutationAppliers: hooks0.eventDefMutationAppliers.concat(hooks1.eventDefMutationAppliers),\n            dateSelectionTransformers: hooks0.dateSelectionTransformers.concat(hooks1.dateSelectionTransformers),\n            datePointTransforms: hooks0.datePointTransforms.concat(hooks1.datePointTransforms),\n            dateSpanTransforms: hooks0.dateSpanTransforms.concat(hooks1.dateSpanTransforms),\n            views: __assign({}, hooks0.views, hooks1.views),\n            viewPropsTransformers: hooks0.viewPropsTransformers.concat(hooks1.viewPropsTransformers),\n            isPropsValid: hooks1.isPropsValid || hooks0.isPropsValid,\n            externalDefTransforms: hooks0.externalDefTransforms.concat(hooks1.externalDefTransforms),\n            eventResizeJoinTransforms: hooks0.eventResizeJoinTransforms.concat(hooks1.eventResizeJoinTransforms),\n            viewContainerModifiers: hooks0.viewContainerModifiers.concat(hooks1.viewContainerModifiers),\n            eventDropTransformers: hooks0.eventDropTransformers.concat(hooks1.eventDropTransformers),\n            calendarInteractions: hooks0.calendarInteractions.concat(hooks1.calendarInteractions),\n            componentInteractions: hooks0.componentInteractions.concat(hooks1.componentInteractions),\n            themeClasses: __assign({}, hooks0.themeClasses, hooks1.themeClasses),\n            eventSourceDefs: hooks0.eventSourceDefs.concat(hooks1.eventSourceDefs),\n            cmdFormatter: hooks1.cmdFormatter || hooks0.cmdFormatter,\n            recurringTypes: hooks0.recurringTypes.concat(hooks1.recurringTypes),\n            namedTimeZonedImpl: hooks1.namedTimeZonedImpl || hooks0.namedTimeZonedImpl,\n            defaultView: hooks0.defaultView || hooks1.defaultView,\n            elementDraggingImpl: hooks0.elementDraggingImpl || hooks1.elementDraggingImpl,\n            optionChangeHandlers: __assign({}, hooks0.optionChangeHandlers, hooks1.optionChangeHandlers)\n        };\n    }\n\n    var eventSourceDef = {\n        ignoreRange: true,\n        parseMeta: function (raw) {\n            if (Array.isArray(raw)) { // short form\n                return raw;\n            }\n            else if (Array.isArray(raw.events)) {\n                return raw.events;\n            }\n            return null;\n        },\n        fetch: function (arg, success) {\n            success({\n                rawEvents: arg.eventSource.meta\n            });\n        }\n    };\n    var ArrayEventSourcePlugin = createPlugin({\n        eventSourceDefs: [eventSourceDef]\n    });\n\n    var eventSourceDef$1 = {\n        parseMeta: function (raw) {\n            if (typeof raw === 'function') { // short form\n                return raw;\n            }\n            else if (typeof raw.events === 'function') {\n                return raw.events;\n            }\n            return null;\n        },\n        fetch: function (arg, success, failure) {\n            var dateEnv = arg.calendar.dateEnv;\n            var func = arg.eventSource.meta;\n            unpromisify(func.bind(null, {\n                start: dateEnv.toDate(arg.range.start),\n                end: dateEnv.toDate(arg.range.end),\n                startStr: dateEnv.formatIso(arg.range.start),\n                endStr: dateEnv.formatIso(arg.range.end),\n                timeZone: dateEnv.timeZone\n            }), function (rawEvents) {\n                success({ rawEvents: rawEvents }); // needs an object response\n            }, failure // send errorObj directly to failure callback\n            );\n        }\n    };\n    var FuncEventSourcePlugin = createPlugin({\n        eventSourceDefs: [eventSourceDef$1]\n    });\n\n    function requestJson(method, url, params, successCallback, failureCallback) {\n        method = method.toUpperCase();\n        var body = null;\n        if (method === 'GET') {\n            url = injectQueryStringParams(url, params);\n        }\n        else {\n            body = encodeParams(params);\n        }\n        var xhr = new XMLHttpRequest();\n        xhr.open(method, url, true);\n        if (method !== 'GET') {\n            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        }\n        xhr.onload = function () {\n            if (xhr.status >= 200 && xhr.status < 400) {\n                try {\n                    var res = JSON.parse(xhr.responseText);\n                    successCallback(res, xhr);\n                }\n                catch (err) {\n                    failureCallback('Failure parsing JSON', xhr);\n                }\n            }\n            else {\n                failureCallback('Request failed', xhr);\n            }\n        };\n        xhr.onerror = function () {\n            failureCallback('Request failed', xhr);\n        };\n        xhr.send(body);\n    }\n    function injectQueryStringParams(url, params) {\n        return url +\n            (url.indexOf('?') === -1 ? '?' : '&') +\n            encodeParams(params);\n    }\n    function encodeParams(params) {\n        var parts = [];\n        for (var key in params) {\n            parts.push(encodeURIComponent(key) + '=' + encodeURIComponent(params[key]));\n        }\n        return parts.join('&');\n    }\n\n    var eventSourceDef$2 = {\n        parseMeta: function (raw) {\n            if (typeof raw === 'string') { // short form\n                raw = { url: raw };\n            }\n            else if (!raw || typeof raw !== 'object' || !raw.url) {\n                return null;\n            }\n            return {\n                url: raw.url,\n                method: (raw.method || 'GET').toUpperCase(),\n                extraParams: raw.extraParams,\n                startParam: raw.startParam,\n                endParam: raw.endParam,\n                timeZoneParam: raw.timeZoneParam\n            };\n        },\n        fetch: function (arg, success, failure) {\n            var meta = arg.eventSource.meta;\n            var requestParams = buildRequestParams(meta, arg.range, arg.calendar);\n            requestJson(meta.method, meta.url, requestParams, function (rawEvents, xhr) {\n                success({ rawEvents: rawEvents, xhr: xhr });\n            }, function (errorMessage, xhr) {\n                failure({ message: errorMessage, xhr: xhr });\n            });\n        }\n    };\n    var JsonFeedEventSourcePlugin = createPlugin({\n        eventSourceDefs: [eventSourceDef$2]\n    });\n    function buildRequestParams(meta, range, calendar) {\n        var dateEnv = calendar.dateEnv;\n        var startParam;\n        var endParam;\n        var timeZoneParam;\n        var customRequestParams;\n        var params = {};\n        startParam = meta.startParam;\n        if (startParam == null) {\n            startParam = calendar.opt('startParam');\n        }\n        endParam = meta.endParam;\n        if (endParam == null) {\n            endParam = calendar.opt('endParam');\n        }\n        timeZoneParam = meta.timeZoneParam;\n        if (timeZoneParam == null) {\n            timeZoneParam = calendar.opt('timeZoneParam');\n        }\n        // retrieve any outbound GET/POST data from the options\n        if (typeof meta.extraParams === 'function') {\n            // supplied as a function that returns a key/value object\n            customRequestParams = meta.extraParams();\n        }\n        else {\n            // probably supplied as a straight key/value object\n            customRequestParams = meta.extraParams || {};\n        }\n        __assign(params, customRequestParams);\n        params[startParam] = dateEnv.formatIso(range.start);\n        params[endParam] = dateEnv.formatIso(range.end);\n        if (dateEnv.timeZone !== 'local') {\n            params[timeZoneParam] = dateEnv.timeZone;\n        }\n        return params;\n    }\n\n    var recurring = {\n        parse: function (rawEvent, leftoverProps, dateEnv) {\n            var createMarker = dateEnv.createMarker.bind(dateEnv);\n            var processors = {\n                daysOfWeek: null,\n                startTime: createDuration,\n                endTime: createDuration,\n                startRecur: createMarker,\n                endRecur: createMarker\n            };\n            var props = refineProps(rawEvent, processors, {}, leftoverProps);\n            var anyValid = false;\n            for (var propName in props) {\n                if (props[propName] != null) {\n                    anyValid = true;\n                    break;\n                }\n            }\n            if (anyValid) {\n                return {\n                    allDayGuess: Boolean(!props.startTime && !props.endTime),\n                    duration: (props.startTime && props.endTime) ?\n                        subtractDurations(props.endTime, props.startTime) :\n                        null,\n                    typeData: props // doesn't need endTime anymore but oh well\n                };\n            }\n            return null;\n        },\n        expand: function (typeData, framingRange, dateEnv) {\n            var clippedFramingRange = intersectRanges(framingRange, { start: typeData.startRecur, end: typeData.endRecur });\n            if (clippedFramingRange) {\n                return expandRanges(typeData.daysOfWeek, typeData.startTime, clippedFramingRange, dateEnv);\n            }\n            else {\n                return [];\n            }\n        }\n    };\n    var SimpleRecurrencePlugin = createPlugin({\n        recurringTypes: [recurring]\n    });\n    function expandRanges(daysOfWeek, startTime, framingRange, dateEnv) {\n        var dowHash = daysOfWeek ? arrayToHash(daysOfWeek) : null;\n        var dayMarker = startOfDay(framingRange.start);\n        var endMarker = framingRange.end;\n        var instanceStarts = [];\n        while (dayMarker < endMarker) {\n            var instanceStart \n            // if everyday, or this particular day-of-week\n            = void 0;\n            // if everyday, or this particular day-of-week\n            if (!dowHash || dowHash[dayMarker.getUTCDay()]) {\n                if (startTime) {\n                    instanceStart = dateEnv.add(dayMarker, startTime);\n                }\n                else {\n                    instanceStart = dayMarker;\n                }\n                instanceStarts.push(instanceStart);\n            }\n            dayMarker = addDays(dayMarker, 1);\n        }\n        return instanceStarts;\n    }\n\n    var DefaultOptionChangeHandlers = createPlugin({\n        optionChangeHandlers: {\n            events: function (events, calendar) {\n                handleEventSources([events], calendar);\n            },\n            eventSources: handleEventSources,\n            plugins: handlePlugins\n        }\n    });\n    function handleEventSources(inputs, calendar) {\n        var unfoundSources = hashValuesToArray(calendar.state.eventSources);\n        var newInputs = [];\n        for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n            var input = inputs_1[_i];\n            var inputFound = false;\n            for (var i = 0; i < unfoundSources.length; i++) {\n                if (isValuesSimilar(unfoundSources[i]._raw, input, 2)) {\n                    unfoundSources.splice(i, 1); // delete\n                    inputFound = true;\n                    break;\n                }\n            }\n            if (!inputFound) {\n                newInputs.push(input);\n            }\n        }\n        for (var _a = 0, unfoundSources_1 = unfoundSources; _a < unfoundSources_1.length; _a++) {\n            var unfoundSource = unfoundSources_1[_a];\n            calendar.dispatch({\n                type: 'REMOVE_EVENT_SOURCE',\n                sourceId: unfoundSource.sourceId\n            });\n        }\n        for (var _b = 0, newInputs_1 = newInputs; _b < newInputs_1.length; _b++) {\n            var newInput = newInputs_1[_b];\n            calendar.addEventSource(newInput);\n        }\n    }\n    // shortcoming: won't remove plugins\n    function handlePlugins(inputs, calendar) {\n        calendar.addPluginInputs(inputs); // will gracefully handle duplicates\n    }\n\n    var config = {}; // TODO: make these options\n    var globalDefaults = {\n        defaultRangeSeparator: ' - ',\n        titleRangeSeparator: ' \\u2013 ',\n        defaultTimedEventDuration: '01:00:00',\n        defaultAllDayEventDuration: { day: 1 },\n        forceEventDuration: false,\n        nextDayThreshold: '00:00:00',\n        // display\n        columnHeader: true,\n        defaultView: '',\n        aspectRatio: 1.35,\n        header: {\n            left: 'title',\n            center: '',\n            right: 'today prev,next'\n        },\n        weekends: true,\n        weekNumbers: false,\n        weekNumberCalculation: 'local',\n        editable: false,\n        // nowIndicator: false,\n        scrollTime: '06:00:00',\n        minTime: '00:00:00',\n        maxTime: '24:00:00',\n        showNonCurrentDates: true,\n        // event ajax\n        lazyFetching: true,\n        startParam: 'start',\n        endParam: 'end',\n        timeZoneParam: 'timeZone',\n        timeZone: 'local',\n        // allDayDefault: undefined,\n        // locale\n        locales: [],\n        locale: '',\n        // dir: will get this from the default locale\n        // buttonIcons: null,\n        // allows setting a min-height to the event segment to prevent short events overlapping each other\n        timeGridEventMinHeight: 0,\n        themeSystem: 'standard',\n        // eventResizableFromStart: false,\n        dragRevertDuration: 500,\n        dragScroll: true,\n        allDayMaintainDuration: false,\n        // selectable: false,\n        unselectAuto: true,\n        // selectMinDistance: 0,\n        dropAccept: '*',\n        eventOrder: 'start,-duration,allDay,title',\n        // ^ if start tie, longer events go before shorter. final tie-breaker is title text\n        // rerenderDelay: null,\n        eventLimit: false,\n        eventLimitClick: 'popover',\n        dayPopoverFormat: { month: 'long', day: 'numeric', year: 'numeric' },\n        handleWindowResize: true,\n        windowResizeDelay: 100,\n        longPressDelay: 1000,\n        eventDragMinDistance: 5 // only applies to mouse\n    };\n    var rtlDefaults = {\n        header: {\n            left: 'next,prev today',\n            center: '',\n            right: 'title'\n        },\n        buttonIcons: {\n            // TODO: make RTL support the responibility of the theme\n            prev: 'fc-icon-chevron-right',\n            next: 'fc-icon-chevron-left',\n            prevYear: 'fc-icon-chevrons-right',\n            nextYear: 'fc-icon-chevrons-left'\n        }\n    };\n    var complexOptions = [\n        'header',\n        'footer',\n        'buttonText',\n        'buttonIcons'\n    ];\n    // Merges an array of option objects into a single object\n    function mergeOptions(optionObjs) {\n        return mergeProps(optionObjs, complexOptions);\n    }\n    // TODO: move this stuff to a \"plugin\"-related file...\n    var INTERNAL_PLUGINS = [\n        ArrayEventSourcePlugin,\n        FuncEventSourcePlugin,\n        JsonFeedEventSourcePlugin,\n        SimpleRecurrencePlugin,\n        DefaultOptionChangeHandlers\n    ];\n    function refinePluginDefs(pluginInputs) {\n        var plugins = [];\n        for (var _i = 0, pluginInputs_1 = pluginInputs; _i < pluginInputs_1.length; _i++) {\n            var pluginInput = pluginInputs_1[_i];\n            if (typeof pluginInput === 'string') {\n                var globalName = 'FullCalendar' + capitaliseFirstLetter(pluginInput);\n                if (!window[globalName]) {\n                    console.warn('Plugin file not loaded for ' + pluginInput);\n                }\n                else {\n                    plugins.push(window[globalName].default); // is an ES6 module\n                }\n            }\n            else {\n                plugins.push(pluginInput);\n            }\n        }\n        return INTERNAL_PLUGINS.concat(plugins);\n    }\n\n    var RAW_EN_LOCALE = {\n        code: 'en',\n        week: {\n            dow: 0,\n            doy: 4 // 4 days need to be within the year to be considered the first week\n        },\n        dir: 'ltr',\n        buttonText: {\n            prev: 'prev',\n            next: 'next',\n            prevYear: 'prev year',\n            nextYear: 'next year',\n            year: 'year',\n            today: 'today',\n            month: 'month',\n            week: 'week',\n            day: 'day',\n            list: 'list'\n        },\n        weekLabel: 'W',\n        allDayText: 'all-day',\n        eventLimitText: 'more',\n        noEventsMessage: 'No events to display'\n    };\n    function parseRawLocales(explicitRawLocales) {\n        var defaultCode = explicitRawLocales.length > 0 ? explicitRawLocales[0].code : 'en';\n        var globalArray = window['FullCalendarLocalesAll'] || []; // from locales-all.js\n        var globalObject = window['FullCalendarLocales'] || {}; // from locales/*.js. keys are meaningless\n        var allRawLocales = globalArray.concat(// globalArray is low prio\n        hashValuesToArray(globalObject), // medium prio\n        explicitRawLocales // highest prio\n        );\n        var rawLocaleMap = {\n            en: RAW_EN_LOCALE // necessary?\n        };\n        for (var _i = 0, allRawLocales_1 = allRawLocales; _i < allRawLocales_1.length; _i++) {\n            var rawLocale = allRawLocales_1[_i];\n            rawLocaleMap[rawLocale.code] = rawLocale;\n        }\n        return {\n            map: rawLocaleMap,\n            defaultCode: defaultCode\n        };\n    }\n    function buildLocale(inputSingular, available) {\n        if (typeof inputSingular === 'object' && !Array.isArray(inputSingular)) {\n            return parseLocale(inputSingular.code, [inputSingular.code], inputSingular);\n        }\n        else {\n            return queryLocale(inputSingular, available);\n        }\n    }\n    function queryLocale(codeArg, available) {\n        var codes = [].concat(codeArg || []); // will convert to array\n        var raw = queryRawLocale(codes, available) || RAW_EN_LOCALE;\n        return parseLocale(codeArg, codes, raw);\n    }\n    function queryRawLocale(codes, available) {\n        for (var i = 0; i < codes.length; i++) {\n            var parts = codes[i].toLocaleLowerCase().split('-');\n            for (var j = parts.length; j > 0; j--) {\n                var simpleId = parts.slice(0, j).join('-');\n                if (available[simpleId]) {\n                    return available[simpleId];\n                }\n            }\n        }\n        return null;\n    }\n    function parseLocale(codeArg, codes, raw) {\n        var merged = mergeProps([RAW_EN_LOCALE, raw], ['buttonText']);\n        delete merged.code; // don't want this part of the options\n        var week = merged.week;\n        delete merged.week;\n        return {\n            codeArg: codeArg,\n            codes: codes,\n            week: week,\n            simpleNumberFormat: new Intl.NumberFormat(codeArg),\n            options: merged\n        };\n    }\n\n    var OptionsManager = /** @class */ (function () {\n        function OptionsManager(overrides) {\n            this.overrides = __assign({}, overrides); // make a copy\n            this.dynamicOverrides = {};\n            this.compute();\n        }\n        OptionsManager.prototype.add = function (props) {\n            __assign(this.overrides, props);\n            this.compute();\n        };\n        OptionsManager.prototype.addDynamic = function (props) {\n            __assign(this.dynamicOverrides, props);\n            this.compute();\n        };\n        OptionsManager.prototype.reset = function (props) {\n            this.overrides = props;\n            this.compute();\n        };\n        // Computes the flattened options hash for the calendar and assigns to `this.options`.\n        // Assumes this.overrides and this.dynamicOverrides have already been initialized.\n        OptionsManager.prototype.compute = function () {\n            // TODO: not a very efficient system\n            var locales = firstDefined(// explicit locale option given?\n            this.dynamicOverrides.locales, this.overrides.locales, globalDefaults.locales);\n            var locale = firstDefined(// explicit locales option given?\n            this.dynamicOverrides.locale, this.overrides.locale, globalDefaults.locale);\n            var available = parseRawLocales(locales);\n            var localeDefaults = buildLocale(locale || available.defaultCode, available.map).options;\n            var dir = firstDefined(// based on options computed so far, is direction RTL?\n            this.dynamicOverrides.dir, this.overrides.dir, localeDefaults.dir);\n            var dirDefaults = dir === 'rtl' ? rtlDefaults : {};\n            this.dirDefaults = dirDefaults;\n            this.localeDefaults = localeDefaults;\n            this.computed = mergeOptions([\n                globalDefaults,\n                dirDefaults,\n                localeDefaults,\n                this.overrides,\n                this.dynamicOverrides\n            ]);\n        };\n        return OptionsManager;\n    }());\n\n    var calendarSystemClassMap = {};\n    function registerCalendarSystem(name, theClass) {\n        calendarSystemClassMap[name] = theClass;\n    }\n    function createCalendarSystem(name) {\n        return new calendarSystemClassMap[name]();\n    }\n    var GregorianCalendarSystem = /** @class */ (function () {\n        function GregorianCalendarSystem() {\n        }\n        GregorianCalendarSystem.prototype.getMarkerYear = function (d) {\n            return d.getUTCFullYear();\n        };\n        GregorianCalendarSystem.prototype.getMarkerMonth = function (d) {\n            return d.getUTCMonth();\n        };\n        GregorianCalendarSystem.prototype.getMarkerDay = function (d) {\n            return d.getUTCDate();\n        };\n        GregorianCalendarSystem.prototype.arrayToMarker = function (arr) {\n            return arrayToUtcDate(arr);\n        };\n        GregorianCalendarSystem.prototype.markerToArray = function (marker) {\n            return dateToUtcArray(marker);\n        };\n        return GregorianCalendarSystem;\n    }());\n    registerCalendarSystem('gregory', GregorianCalendarSystem);\n\n    var ISO_RE = /^\\s*(\\d{4})(-(\\d{2})(-(\\d{2})([T ](\\d{2}):(\\d{2})(:(\\d{2})(\\.(\\d+))?)?(Z|(([-+])(\\d{2})(:?(\\d{2}))?))?)?)?)?$/;\n    function parse(str) {\n        var m = ISO_RE.exec(str);\n        if (m) {\n            var marker = new Date(Date.UTC(Number(m[1]), m[3] ? Number(m[3]) - 1 : 0, Number(m[5] || 1), Number(m[7] || 0), Number(m[8] || 0), Number(m[10] || 0), m[12] ? Number('0.' + m[12]) * 1000 : 0));\n            if (isValidDate(marker)) {\n                var timeZoneOffset = null;\n                if (m[13]) {\n                    timeZoneOffset = (m[15] === '-' ? -1 : 1) * (Number(m[16] || 0) * 60 +\n                        Number(m[18] || 0));\n                }\n                return {\n                    marker: marker,\n                    isTimeUnspecified: !m[6],\n                    timeZoneOffset: timeZoneOffset\n                };\n            }\n        }\n        return null;\n    }\n\n    var DateEnv = /** @class */ (function () {\n        function DateEnv(settings) {\n            var timeZone = this.timeZone = settings.timeZone;\n            var isNamedTimeZone = timeZone !== 'local' && timeZone !== 'UTC';\n            if (settings.namedTimeZoneImpl && isNamedTimeZone) {\n                this.namedTimeZoneImpl = new settings.namedTimeZoneImpl(timeZone);\n            }\n            this.canComputeOffset = Boolean(!isNamedTimeZone || this.namedTimeZoneImpl);\n            this.calendarSystem = createCalendarSystem(settings.calendarSystem);\n            this.locale = settings.locale;\n            this.weekDow = settings.locale.week.dow;\n            this.weekDoy = settings.locale.week.doy;\n            if (settings.weekNumberCalculation === 'ISO') {\n                this.weekDow = 1;\n                this.weekDoy = 4;\n            }\n            else if (typeof settings.firstDay === 'number') {\n                this.weekDow = settings.firstDay;\n            }\n            if (typeof settings.weekNumberCalculation === 'function') {\n                this.weekNumberFunc = settings.weekNumberCalculation;\n            }\n            this.weekLabel = settings.weekLabel != null ? settings.weekLabel : settings.locale.options.weekLabel;\n            this.cmdFormatter = settings.cmdFormatter;\n        }\n        // Creating / Parsing\n        DateEnv.prototype.createMarker = function (input) {\n            var meta = this.createMarkerMeta(input);\n            if (meta === null) {\n                return null;\n            }\n            return meta.marker;\n        };\n        DateEnv.prototype.createNowMarker = function () {\n            if (this.canComputeOffset) {\n                return this.timestampToMarker(new Date().valueOf());\n            }\n            else {\n                // if we can't compute the current date val for a timezone,\n                // better to give the current local date vals than UTC\n                return arrayToUtcDate(dateToLocalArray(new Date()));\n            }\n        };\n        DateEnv.prototype.createMarkerMeta = function (input) {\n            if (typeof input === 'string') {\n                return this.parse(input);\n            }\n            var marker = null;\n            if (typeof input === 'number') {\n                marker = this.timestampToMarker(input);\n            }\n            else if (input instanceof Date) {\n                input = input.valueOf();\n                if (!isNaN(input)) {\n                    marker = this.timestampToMarker(input);\n                }\n            }\n            else if (Array.isArray(input)) {\n                marker = arrayToUtcDate(input);\n            }\n            if (marker === null || !isValidDate(marker)) {\n                return null;\n            }\n            return { marker: marker, isTimeUnspecified: false, forcedTzo: null };\n        };\n        DateEnv.prototype.parse = function (s) {\n            var parts = parse(s);\n            if (parts === null) {\n                return null;\n            }\n            var marker = parts.marker;\n            var forcedTzo = null;\n            if (parts.timeZoneOffset !== null) {\n                if (this.canComputeOffset) {\n                    marker = this.timestampToMarker(marker.valueOf() - parts.timeZoneOffset * 60 * 1000);\n                }\n                else {\n                    forcedTzo = parts.timeZoneOffset;\n                }\n            }\n            return { marker: marker, isTimeUnspecified: parts.isTimeUnspecified, forcedTzo: forcedTzo };\n        };\n        // Accessors\n        DateEnv.prototype.getYear = function (marker) {\n            return this.calendarSystem.getMarkerYear(marker);\n        };\n        DateEnv.prototype.getMonth = function (marker) {\n            return this.calendarSystem.getMarkerMonth(marker);\n        };\n        // Adding / Subtracting\n        DateEnv.prototype.add = function (marker, dur) {\n            var a = this.calendarSystem.markerToArray(marker);\n            a[0] += dur.years;\n            a[1] += dur.months;\n            a[2] += dur.days;\n            a[6] += dur.milliseconds;\n            return this.calendarSystem.arrayToMarker(a);\n        };\n        DateEnv.prototype.subtract = function (marker, dur) {\n            var a = this.calendarSystem.markerToArray(marker);\n            a[0] -= dur.years;\n            a[1] -= dur.months;\n            a[2] -= dur.days;\n            a[6] -= dur.milliseconds;\n            return this.calendarSystem.arrayToMarker(a);\n        };\n        DateEnv.prototype.addYears = function (marker, n) {\n            var a = this.calendarSystem.markerToArray(marker);\n            a[0] += n;\n            return this.calendarSystem.arrayToMarker(a);\n        };\n        DateEnv.prototype.addMonths = function (marker, n) {\n            var a = this.calendarSystem.markerToArray(marker);\n            a[1] += n;\n            return this.calendarSystem.arrayToMarker(a);\n        };\n        // Diffing Whole Units\n        DateEnv.prototype.diffWholeYears = function (m0, m1) {\n            var calendarSystem = this.calendarSystem;\n            if (timeAsMs(m0) === timeAsMs(m1) &&\n                calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1) &&\n                calendarSystem.getMarkerMonth(m0) === calendarSystem.getMarkerMonth(m1)) {\n                return calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0);\n            }\n            return null;\n        };\n        DateEnv.prototype.diffWholeMonths = function (m0, m1) {\n            var calendarSystem = this.calendarSystem;\n            if (timeAsMs(m0) === timeAsMs(m1) &&\n                calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1)) {\n                return (calendarSystem.getMarkerMonth(m1) - calendarSystem.getMarkerMonth(m0)) +\n                    (calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0)) * 12;\n            }\n            return null;\n        };\n        // Range / Duration\n        DateEnv.prototype.greatestWholeUnit = function (m0, m1) {\n            var n = this.diffWholeYears(m0, m1);\n            if (n !== null) {\n                return { unit: 'year', value: n };\n            }\n            n = this.diffWholeMonths(m0, m1);\n            if (n !== null) {\n                return { unit: 'month', value: n };\n            }\n            n = diffWholeWeeks(m0, m1);\n            if (n !== null) {\n                return { unit: 'week', value: n };\n            }\n            n = diffWholeDays(m0, m1);\n            if (n !== null) {\n                return { unit: 'day', value: n };\n            }\n            n = diffHours(m0, m1);\n            if (isInt(n)) {\n                return { unit: 'hour', value: n };\n            }\n            n = diffMinutes(m0, m1);\n            if (isInt(n)) {\n                return { unit: 'minute', value: n };\n            }\n            n = diffSeconds(m0, m1);\n            if (isInt(n)) {\n                return { unit: 'second', value: n };\n            }\n            return { unit: 'millisecond', value: m1.valueOf() - m0.valueOf() };\n        };\n        DateEnv.prototype.countDurationsBetween = function (m0, m1, d) {\n            // TODO: can use greatestWholeUnit\n            var diff;\n            if (d.years) {\n                diff = this.diffWholeYears(m0, m1);\n                if (diff !== null) {\n                    return diff / asRoughYears(d);\n                }\n            }\n            if (d.months) {\n                diff = this.diffWholeMonths(m0, m1);\n                if (diff !== null) {\n                    return diff / asRoughMonths(d);\n                }\n            }\n            if (d.days) {\n                diff = diffWholeDays(m0, m1);\n                if (diff !== null) {\n                    return diff / asRoughDays(d);\n                }\n            }\n            return (m1.valueOf() - m0.valueOf()) / asRoughMs(d);\n        };\n        // Start-Of\n        DateEnv.prototype.startOf = function (m, unit) {\n            if (unit === 'year') {\n                return this.startOfYear(m);\n            }\n            else if (unit === 'month') {\n                return this.startOfMonth(m);\n            }\n            else if (unit === 'week') {\n                return this.startOfWeek(m);\n            }\n            else if (unit === 'day') {\n                return startOfDay(m);\n            }\n            else if (unit === 'hour') {\n                return startOfHour(m);\n            }\n            else if (unit === 'minute') {\n                return startOfMinute(m);\n            }\n            else if (unit === 'second') {\n                return startOfSecond(m);\n            }\n        };\n        DateEnv.prototype.startOfYear = function (m) {\n            return this.calendarSystem.arrayToMarker([\n                this.calendarSystem.getMarkerYear(m)\n            ]);\n        };\n        DateEnv.prototype.startOfMonth = function (m) {\n            return this.calendarSystem.arrayToMarker([\n                this.calendarSystem.getMarkerYear(m),\n                this.calendarSystem.getMarkerMonth(m)\n            ]);\n        };\n        DateEnv.prototype.startOfWeek = function (m) {\n            return this.calendarSystem.arrayToMarker([\n                this.calendarSystem.getMarkerYear(m),\n                this.calendarSystem.getMarkerMonth(m),\n                m.getUTCDate() - ((m.getUTCDay() - this.weekDow + 7) % 7)\n            ]);\n        };\n        // Week Number\n        DateEnv.prototype.computeWeekNumber = function (marker) {\n            if (this.weekNumberFunc) {\n                return this.weekNumberFunc(this.toDate(marker));\n            }\n            else {\n                return weekOfYear(marker, this.weekDow, this.weekDoy);\n            }\n        };\n        // TODO: choke on timeZoneName: long\n        DateEnv.prototype.format = function (marker, formatter, dateOptions) {\n            if (dateOptions === void 0) { dateOptions = {}; }\n            return formatter.format({\n                marker: marker,\n                timeZoneOffset: dateOptions.forcedTzo != null ?\n                    dateOptions.forcedTzo :\n                    this.offsetForMarker(marker)\n            }, this);\n        };\n        DateEnv.prototype.formatRange = function (start, end, formatter, dateOptions) {\n            if (dateOptions === void 0) { dateOptions = {}; }\n            if (dateOptions.isEndExclusive) {\n                end = addMs(end, -1);\n            }\n            return formatter.formatRange({\n                marker: start,\n                timeZoneOffset: dateOptions.forcedStartTzo != null ?\n                    dateOptions.forcedStartTzo :\n                    this.offsetForMarker(start)\n            }, {\n                marker: end,\n                timeZoneOffset: dateOptions.forcedEndTzo != null ?\n                    dateOptions.forcedEndTzo :\n                    this.offsetForMarker(end)\n            }, this);\n        };\n        DateEnv.prototype.formatIso = function (marker, extraOptions) {\n            if (extraOptions === void 0) { extraOptions = {}; }\n            var timeZoneOffset = null;\n            if (!extraOptions.omitTimeZoneOffset) {\n                if (extraOptions.forcedTzo != null) {\n                    timeZoneOffset = extraOptions.forcedTzo;\n                }\n                else {\n                    timeZoneOffset = this.offsetForMarker(marker);\n                }\n            }\n            return buildIsoString(marker, timeZoneOffset, extraOptions.omitTime);\n        };\n        // TimeZone\n        DateEnv.prototype.timestampToMarker = function (ms) {\n            if (this.timeZone === 'local') {\n                return arrayToUtcDate(dateToLocalArray(new Date(ms)));\n            }\n            else if (this.timeZone === 'UTC' || !this.namedTimeZoneImpl) {\n                return new Date(ms);\n            }\n            else {\n                return arrayToUtcDate(this.namedTimeZoneImpl.timestampToArray(ms));\n            }\n        };\n        DateEnv.prototype.offsetForMarker = function (m) {\n            if (this.timeZone === 'local') {\n                return -arrayToLocalDate(dateToUtcArray(m)).getTimezoneOffset(); // convert \"inverse\" offset to \"normal\" offset\n            }\n            else if (this.timeZone === 'UTC') {\n                return 0;\n            }\n            else if (this.namedTimeZoneImpl) {\n                return this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m));\n            }\n            return null;\n        };\n        // Conversion\n        DateEnv.prototype.toDate = function (m, forcedTzo) {\n            if (this.timeZone === 'local') {\n                return arrayToLocalDate(dateToUtcArray(m));\n            }\n            else if (this.timeZone === 'UTC') {\n                return new Date(m.valueOf()); // make sure it's a copy\n            }\n            else if (!this.namedTimeZoneImpl) {\n                return new Date(m.valueOf() - (forcedTzo || 0));\n            }\n            else {\n                return new Date(m.valueOf() -\n                    this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m)) * 1000 * 60 // convert minutes -> ms\n                );\n            }\n        };\n        return DateEnv;\n    }());\n\n    var SIMPLE_SOURCE_PROPS = {\n        id: String,\n        allDayDefault: Boolean,\n        eventDataTransform: Function,\n        success: Function,\n        failure: Function\n    };\n    var uid$2 = 0;\n    function doesSourceNeedRange(eventSource, calendar) {\n        var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n        return !defs[eventSource.sourceDefId].ignoreRange;\n    }\n    function parseEventSource(raw, calendar) {\n        var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n        for (var i = defs.length - 1; i >= 0; i--) { // later-added plugins take precedence\n            var def = defs[i];\n            var meta = def.parseMeta(raw);\n            if (meta) {\n                var res = parseEventSourceProps(typeof raw === 'object' ? raw : {}, meta, i, calendar);\n                res._raw = freezeRaw(raw);\n                return res;\n            }\n        }\n        return null;\n    }\n    function parseEventSourceProps(raw, meta, sourceDefId, calendar) {\n        var leftovers0 = {};\n        var props = refineProps(raw, SIMPLE_SOURCE_PROPS, {}, leftovers0);\n        var leftovers1 = {};\n        var ui = processUnscopedUiProps(leftovers0, calendar, leftovers1);\n        props.isFetching = false;\n        props.latestFetchId = '';\n        props.fetchRange = null;\n        props.publicId = String(raw.id || '');\n        props.sourceId = String(uid$2++);\n        props.sourceDefId = sourceDefId;\n        props.meta = meta;\n        props.ui = ui;\n        props.extendedProps = leftovers1;\n        return props;\n    }\n\n    function reduceEventSources (eventSources, action, dateProfile, calendar) {\n        switch (action.type) {\n            case 'ADD_EVENT_SOURCES': // already parsed\n                return addSources(eventSources, action.sources, dateProfile ? dateProfile.activeRange : null, calendar);\n            case 'REMOVE_EVENT_SOURCE':\n                return removeSource(eventSources, action.sourceId);\n            case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n            case 'NEXT':\n            case 'SET_DATE':\n            case 'SET_VIEW_TYPE':\n                if (dateProfile) {\n                    return fetchDirtySources(eventSources, dateProfile.activeRange, calendar);\n                }\n                else {\n                    return eventSources;\n                }\n            case 'FETCH_EVENT_SOURCES':\n            case 'CHANGE_TIMEZONE':\n                return fetchSourcesByIds(eventSources, action.sourceIds ?\n                    arrayToHash(action.sourceIds) :\n                    excludeStaticSources(eventSources, calendar), dateProfile ? dateProfile.activeRange : null, calendar);\n            case 'RECEIVE_EVENTS':\n            case 'RECEIVE_EVENT_ERROR':\n                return receiveResponse(eventSources, action.sourceId, action.fetchId, action.fetchRange);\n            case 'REMOVE_ALL_EVENT_SOURCES':\n                return {};\n            default:\n                return eventSources;\n        }\n    }\n    var uid$3 = 0;\n    function addSources(eventSourceHash, sources, fetchRange, calendar) {\n        var hash = {};\n        for (var _i = 0, sources_1 = sources; _i < sources_1.length; _i++) {\n            var source = sources_1[_i];\n            hash[source.sourceId] = source;\n        }\n        if (fetchRange) {\n            hash = fetchDirtySources(hash, fetchRange, calendar);\n        }\n        return __assign({}, eventSourceHash, hash);\n    }\n    function removeSource(eventSourceHash, sourceId) {\n        return filterHash(eventSourceHash, function (eventSource) {\n            return eventSource.sourceId !== sourceId;\n        });\n    }\n    function fetchDirtySources(sourceHash, fetchRange, calendar) {\n        return fetchSourcesByIds(sourceHash, filterHash(sourceHash, function (eventSource) {\n            return isSourceDirty(eventSource, fetchRange, calendar);\n        }), fetchRange, calendar);\n    }\n    function isSourceDirty(eventSource, fetchRange, calendar) {\n        if (!doesSourceNeedRange(eventSource, calendar)) {\n            return !eventSource.latestFetchId;\n        }\n        else {\n            return !calendar.opt('lazyFetching') ||\n                !eventSource.fetchRange ||\n                fetchRange.start < eventSource.fetchRange.start ||\n                fetchRange.end > eventSource.fetchRange.end;\n        }\n    }\n    function fetchSourcesByIds(prevSources, sourceIdHash, fetchRange, calendar) {\n        var nextSources = {};\n        for (var sourceId in prevSources) {\n            var source = prevSources[sourceId];\n            if (sourceIdHash[sourceId]) {\n                nextSources[sourceId] = fetchSource(source, fetchRange, calendar);\n            }\n            else {\n                nextSources[sourceId] = source;\n            }\n        }\n        return nextSources;\n    }\n    function fetchSource(eventSource, fetchRange, calendar) {\n        var sourceDef = calendar.pluginSystem.hooks.eventSourceDefs[eventSource.sourceDefId];\n        var fetchId = String(uid$3++);\n        sourceDef.fetch({\n            eventSource: eventSource,\n            calendar: calendar,\n            range: fetchRange\n        }, function (res) {\n            var rawEvents = res.rawEvents;\n            var calSuccess = calendar.opt('eventSourceSuccess');\n            var calSuccessRes;\n            var sourceSuccessRes;\n            if (eventSource.success) {\n                sourceSuccessRes = eventSource.success(rawEvents, res.xhr);\n            }\n            if (calSuccess) {\n                calSuccessRes = calSuccess(rawEvents, res.xhr);\n            }\n            rawEvents = sourceSuccessRes || calSuccessRes || rawEvents;\n            calendar.dispatch({\n                type: 'RECEIVE_EVENTS',\n                sourceId: eventSource.sourceId,\n                fetchId: fetchId,\n                fetchRange: fetchRange,\n                rawEvents: rawEvents\n            });\n        }, function (error) {\n            var callFailure = calendar.opt('eventSourceFailure');\n            console.warn(error.message, error);\n            if (eventSource.failure) {\n                eventSource.failure(error);\n            }\n            if (callFailure) {\n                callFailure(error);\n            }\n            calendar.dispatch({\n                type: 'RECEIVE_EVENT_ERROR',\n                sourceId: eventSource.sourceId,\n                fetchId: fetchId,\n                fetchRange: fetchRange,\n                error: error\n            });\n        });\n        return __assign({}, eventSource, { isFetching: true, latestFetchId: fetchId });\n    }\n    function receiveResponse(sourceHash, sourceId, fetchId, fetchRange) {\n        var _a;\n        var eventSource = sourceHash[sourceId];\n        if (eventSource && // not already removed\n            fetchId === eventSource.latestFetchId) {\n            return __assign({}, sourceHash, (_a = {}, _a[sourceId] = __assign({}, eventSource, { isFetching: false, fetchRange: fetchRange }), _a));\n        }\n        return sourceHash;\n    }\n    function excludeStaticSources(eventSources, calendar) {\n        return filterHash(eventSources, function (eventSource) {\n            return doesSourceNeedRange(eventSource, calendar);\n        });\n    }\n\n    var DateProfileGenerator = /** @class */ (function () {\n        function DateProfileGenerator(viewSpec, calendar) {\n            this.viewSpec = viewSpec;\n            this.options = viewSpec.options;\n            this.dateEnv = calendar.dateEnv;\n            this.calendar = calendar;\n            this.initHiddenDays();\n        }\n        /* Date Range Computation\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Builds a structure with info about what the dates/ranges will be for the \"prev\" view.\n        DateProfileGenerator.prototype.buildPrev = function (currentDateProfile, currentDate) {\n            var dateEnv = this.dateEnv;\n            var prevDate = dateEnv.subtract(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n            currentDateProfile.dateIncrement);\n            return this.build(prevDate, -1);\n        };\n        // Builds a structure with info about what the dates/ranges will be for the \"next\" view.\n        DateProfileGenerator.prototype.buildNext = function (currentDateProfile, currentDate) {\n            var dateEnv = this.dateEnv;\n            var nextDate = dateEnv.add(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n            currentDateProfile.dateIncrement);\n            return this.build(nextDate, 1);\n        };\n        // Builds a structure holding dates/ranges for rendering around the given date.\n        // Optional direction param indicates whether the date is being incremented/decremented\n        // from its previous value. decremented = -1, incremented = 1 (default).\n        DateProfileGenerator.prototype.build = function (currentDate, direction, forceToValid) {\n            if (forceToValid === void 0) { forceToValid = false; }\n            var validRange;\n            var minTime = null;\n            var maxTime = null;\n            var currentInfo;\n            var isRangeAllDay;\n            var renderRange;\n            var activeRange;\n            var isValid;\n            validRange = this.buildValidRange();\n            validRange = this.trimHiddenDays(validRange);\n            if (forceToValid) {\n                currentDate = constrainMarkerToRange(currentDate, validRange);\n            }\n            currentInfo = this.buildCurrentRangeInfo(currentDate, direction);\n            isRangeAllDay = /^(year|month|week|day)$/.test(currentInfo.unit);\n            renderRange = this.buildRenderRange(this.trimHiddenDays(currentInfo.range), currentInfo.unit, isRangeAllDay);\n            renderRange = this.trimHiddenDays(renderRange);\n            activeRange = renderRange;\n            if (!this.options.showNonCurrentDates) {\n                activeRange = intersectRanges(activeRange, currentInfo.range);\n            }\n            minTime = createDuration(this.options.minTime);\n            maxTime = createDuration(this.options.maxTime);\n            activeRange = this.adjustActiveRange(activeRange, minTime, maxTime);\n            activeRange = intersectRanges(activeRange, validRange); // might return null\n            // it's invalid if the originally requested date is not contained,\n            // or if the range is completely outside of the valid range.\n            isValid = rangesIntersect(currentInfo.range, validRange);\n            return {\n                // constraint for where prev/next operations can go and where events can be dragged/resized to.\n                // an object with optional start and end properties.\n                validRange: validRange,\n                // range the view is formally responsible for.\n                // for example, a month view might have 1st-31st, excluding padded dates\n                currentRange: currentInfo.range,\n                // name of largest unit being displayed, like \"month\" or \"week\"\n                currentRangeUnit: currentInfo.unit,\n                isRangeAllDay: isRangeAllDay,\n                // dates that display events and accept drag-n-drop\n                // will be `null` if no dates accept events\n                activeRange: activeRange,\n                // date range with a rendered skeleton\n                // includes not-active days that need some sort of DOM\n                renderRange: renderRange,\n                // Duration object that denotes the first visible time of any given day\n                minTime: minTime,\n                // Duration object that denotes the exclusive visible end time of any given day\n                maxTime: maxTime,\n                isValid: isValid,\n                // how far the current date will move for a prev/next operation\n                dateIncrement: this.buildDateIncrement(currentInfo.duration)\n                // pass a fallback (might be null) ^\n            };\n        };\n        // Builds an object with optional start/end properties.\n        // Indicates the minimum/maximum dates to display.\n        // not responsible for trimming hidden days.\n        DateProfileGenerator.prototype.buildValidRange = function () {\n            return this.getRangeOption('validRange', this.calendar.getNow()) ||\n                { start: null, end: null }; // completely open-ended\n        };\n        // Builds a structure with info about the \"current\" range, the range that is\n        // highlighted as being the current month for example.\n        // See build() for a description of `direction`.\n        // Guaranteed to have `range` and `unit` properties. `duration` is optional.\n        DateProfileGenerator.prototype.buildCurrentRangeInfo = function (date, direction) {\n            var _a = this, viewSpec = _a.viewSpec, dateEnv = _a.dateEnv;\n            var duration = null;\n            var unit = null;\n            var range = null;\n            var dayCount;\n            if (viewSpec.duration) {\n                duration = viewSpec.duration;\n                unit = viewSpec.durationUnit;\n                range = this.buildRangeFromDuration(date, direction, duration, unit);\n            }\n            else if ((dayCount = this.options.dayCount)) {\n                unit = 'day';\n                range = this.buildRangeFromDayCount(date, direction, dayCount);\n            }\n            else if ((range = this.buildCustomVisibleRange(date))) {\n                unit = dateEnv.greatestWholeUnit(range.start, range.end).unit;\n            }\n            else {\n                duration = this.getFallbackDuration();\n                unit = greatestDurationDenominator(duration).unit;\n                range = this.buildRangeFromDuration(date, direction, duration, unit);\n            }\n            return { duration: duration, unit: unit, range: range };\n        };\n        DateProfileGenerator.prototype.getFallbackDuration = function () {\n            return createDuration({ day: 1 });\n        };\n        // Returns a new activeRange to have time values (un-ambiguate)\n        // minTime or maxTime causes the range to expand.\n        DateProfileGenerator.prototype.adjustActiveRange = function (range, minTime, maxTime) {\n            var dateEnv = this.dateEnv;\n            var start = range.start;\n            var end = range.end;\n            if (this.viewSpec.class.prototype.usesMinMaxTime) {\n                // expand active range if minTime is negative (why not when positive?)\n                if (asRoughDays(minTime) < 0) {\n                    start = startOfDay(start); // necessary?\n                    start = dateEnv.add(start, minTime);\n                }\n                // expand active range if maxTime is beyond one day (why not when positive?)\n                if (asRoughDays(maxTime) > 1) {\n                    end = startOfDay(end); // necessary?\n                    end = addDays(end, -1);\n                    end = dateEnv.add(end, maxTime);\n                }\n            }\n            return { start: start, end: end };\n        };\n        // Builds the \"current\" range when it is specified as an explicit duration.\n        // `unit` is the already-computed greatestDurationDenominator unit of duration.\n        DateProfileGenerator.prototype.buildRangeFromDuration = function (date, direction, duration, unit) {\n            var dateEnv = this.dateEnv;\n            var alignment = this.options.dateAlignment;\n            var dateIncrementInput;\n            var dateIncrementDuration;\n            var start;\n            var end;\n            var res;\n            // compute what the alignment should be\n            if (!alignment) {\n                dateIncrementInput = this.options.dateIncrement;\n                if (dateIncrementInput) {\n                    dateIncrementDuration = createDuration(dateIncrementInput);\n                    // use the smaller of the two units\n                    if (asRoughMs(dateIncrementDuration) < asRoughMs(duration)) {\n                        alignment = greatestDurationDenominator(dateIncrementDuration, !getWeeksFromInput(dateIncrementInput)).unit;\n                    }\n                    else {\n                        alignment = unit;\n                    }\n                }\n                else {\n                    alignment = unit;\n                }\n            }\n            // if the view displays a single day or smaller\n            if (asRoughDays(duration) <= 1) {\n                if (this.isHiddenDay(start)) {\n                    start = this.skipHiddenDays(start, direction);\n                    start = startOfDay(start);\n                }\n            }\n            function computeRes() {\n                start = dateEnv.startOf(date, alignment);\n                end = dateEnv.add(start, duration);\n                res = { start: start, end: end };\n            }\n            computeRes();\n            // if range is completely enveloped by hidden days, go past the hidden days\n            if (!this.trimHiddenDays(res)) {\n                date = this.skipHiddenDays(date, direction);\n                computeRes();\n            }\n            return res;\n        };\n        // Builds the \"current\" range when a dayCount is specified.\n        DateProfileGenerator.prototype.buildRangeFromDayCount = function (date, direction, dayCount) {\n            var dateEnv = this.dateEnv;\n            var customAlignment = this.options.dateAlignment;\n            var runningCount = 0;\n            var start = date;\n            var end;\n            if (customAlignment) {\n                start = dateEnv.startOf(start, customAlignment);\n            }\n            start = startOfDay(start);\n            start = this.skipHiddenDays(start, direction);\n            end = start;\n            do {\n                end = addDays(end, 1);\n                if (!this.isHiddenDay(end)) {\n                    runningCount++;\n                }\n            } while (runningCount < dayCount);\n            return { start: start, end: end };\n        };\n        // Builds a normalized range object for the \"visible\" range,\n        // which is a way to define the currentRange and activeRange at the same time.\n        DateProfileGenerator.prototype.buildCustomVisibleRange = function (date) {\n            var dateEnv = this.dateEnv;\n            var visibleRange = this.getRangeOption('visibleRange', dateEnv.toDate(date));\n            if (visibleRange && (visibleRange.start == null || visibleRange.end == null)) {\n                return null;\n            }\n            return visibleRange;\n        };\n        // Computes the range that will represent the element/cells for *rendering*,\n        // but which may have voided days/times.\n        // not responsible for trimming hidden days.\n        DateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n            return currentRange;\n        };\n        // Compute the duration value that should be added/substracted to the current date\n        // when a prev/next operation happens.\n        DateProfileGenerator.prototype.buildDateIncrement = function (fallback) {\n            var dateIncrementInput = this.options.dateIncrement;\n            var customAlignment;\n            if (dateIncrementInput) {\n                return createDuration(dateIncrementInput);\n            }\n            else if ((customAlignment = this.options.dateAlignment)) {\n                return createDuration(1, customAlignment);\n            }\n            else if (fallback) {\n                return fallback;\n            }\n            else {\n                return createDuration({ days: 1 });\n            }\n        };\n        // Arguments after name will be forwarded to a hypothetical function value\n        // WARNING: passed-in arguments will be given to generator functions as-is and can cause side-effects.\n        // Always clone your objects if you fear mutation.\n        DateProfileGenerator.prototype.getRangeOption = function (name) {\n            var otherArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                otherArgs[_i - 1] = arguments[_i];\n            }\n            var val = this.options[name];\n            if (typeof val === 'function') {\n                val = val.apply(null, otherArgs);\n            }\n            if (val) {\n                val = parseRange(val, this.dateEnv);\n            }\n            if (val) {\n                val = computeVisibleDayRange(val);\n            }\n            return val;\n        };\n        /* Hidden Days\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Initializes internal variables related to calculating hidden days-of-week\n        DateProfileGenerator.prototype.initHiddenDays = function () {\n            var hiddenDays = this.options.hiddenDays || []; // array of day-of-week indices that are hidden\n            var isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)\n            var dayCnt = 0;\n            var i;\n            if (this.options.weekends === false) {\n                hiddenDays.push(0, 6); // 0=sunday, 6=saturday\n            }\n            for (i = 0; i < 7; i++) {\n                if (!(isHiddenDayHash[i] = hiddenDays.indexOf(i) !== -1)) {\n                    dayCnt++;\n                }\n            }\n            if (!dayCnt) {\n                throw new Error('invalid hiddenDays'); // all days were hidden? bad.\n            }\n            this.isHiddenDayHash = isHiddenDayHash;\n        };\n        // Remove days from the beginning and end of the range that are computed as hidden.\n        // If the whole range is trimmed off, returns null\n        DateProfileGenerator.prototype.trimHiddenDays = function (range) {\n            var start = range.start;\n            var end = range.end;\n            if (start) {\n                start = this.skipHiddenDays(start);\n            }\n            if (end) {\n                end = this.skipHiddenDays(end, -1, true);\n            }\n            if (start == null || end == null || start < end) {\n                return { start: start, end: end };\n            }\n            return null;\n        };\n        // Is the current day hidden?\n        // `day` is a day-of-week index (0-6), or a Date (used for UTC)\n        DateProfileGenerator.prototype.isHiddenDay = function (day) {\n            if (day instanceof Date) {\n                day = day.getUTCDay();\n            }\n            return this.isHiddenDayHash[day];\n        };\n        // Incrementing the current day until it is no longer a hidden day, returning a copy.\n        // DOES NOT CONSIDER validRange!\n        // If the initial value of `date` is not a hidden day, don't do anything.\n        // Pass `isExclusive` as `true` if you are dealing with an end date.\n        // `inc` defaults to `1` (increment one day forward each time)\n        DateProfileGenerator.prototype.skipHiddenDays = function (date, inc, isExclusive) {\n            if (inc === void 0) { inc = 1; }\n            if (isExclusive === void 0) { isExclusive = false; }\n            while (this.isHiddenDayHash[(date.getUTCDay() + (isExclusive ? inc : 0) + 7) % 7]) {\n                date = addDays(date, inc);\n            }\n            return date;\n        };\n        return DateProfileGenerator;\n    }());\n    // TODO: find a way to avoid comparing DateProfiles. it's tedious\n    function isDateProfilesEqual(p0, p1) {\n        return rangesEqual(p0.activeRange, p1.activeRange) &&\n            rangesEqual(p0.validRange, p1.validRange) &&\n            durationsEqual(p0.minTime, p1.minTime) &&\n            durationsEqual(p0.maxTime, p1.maxTime);\n    }\n\n    function reduce (state, action, calendar) {\n        var viewType = reduceViewType(state.viewType, action);\n        var dateProfile = reduceDateProfile(state.dateProfile, action, state.currentDate, viewType, calendar);\n        var eventSources = reduceEventSources(state.eventSources, action, dateProfile, calendar);\n        var nextState = __assign({}, state, { viewType: viewType,\n            dateProfile: dateProfile, currentDate: reduceCurrentDate(state.currentDate, action, dateProfile), eventSources: eventSources, eventStore: reduceEventStore(state.eventStore, action, eventSources, dateProfile, calendar), dateSelection: reduceDateSelection(state.dateSelection, action, calendar), eventSelection: reduceSelectedEvent(state.eventSelection, action), eventDrag: reduceEventDrag(state.eventDrag, action, eventSources, calendar), eventResize: reduceEventResize(state.eventResize, action, eventSources, calendar), eventSourceLoadingLevel: computeLoadingLevel(eventSources), loadingLevel: computeLoadingLevel(eventSources) });\n        for (var _i = 0, _a = calendar.pluginSystem.hooks.reducers; _i < _a.length; _i++) {\n            var reducerFunc = _a[_i];\n            nextState = reducerFunc(nextState, action, calendar);\n        }\n        // console.log(action.type, nextState)\n        return nextState;\n    }\n    function reduceViewType(currentViewType, action) {\n        switch (action.type) {\n            case 'SET_VIEW_TYPE':\n                return action.viewType;\n            default:\n                return currentViewType;\n        }\n    }\n    function reduceDateProfile(currentDateProfile, action, currentDate, viewType, calendar) {\n        var newDateProfile;\n        switch (action.type) {\n            case 'PREV':\n                newDateProfile = calendar.dateProfileGenerators[viewType].buildPrev(currentDateProfile, currentDate);\n                break;\n            case 'NEXT':\n                newDateProfile = calendar.dateProfileGenerators[viewType].buildNext(currentDateProfile, currentDate);\n                break;\n            case 'SET_DATE':\n                if (!currentDateProfile.activeRange ||\n                    !rangeContainsMarker(currentDateProfile.currentRange, action.dateMarker)) {\n                    newDateProfile = calendar.dateProfileGenerators[viewType].build(action.dateMarker, undefined, true // forceToValid\n                    );\n                }\n                break;\n            case 'SET_VIEW_TYPE':\n                var generator = calendar.dateProfileGenerators[viewType];\n                if (!generator) {\n                    throw new Error(viewType ?\n                        'The FullCalendar view \"' + viewType + '\" does not exist. Make sure your plugins are loaded correctly.' :\n                        'No available FullCalendar view plugins.');\n                }\n                newDateProfile = generator.build(action.dateMarker || currentDate, undefined, true // forceToValid\n                );\n                break;\n        }\n        if (newDateProfile &&\n            newDateProfile.isValid &&\n            !(currentDateProfile && isDateProfilesEqual(currentDateProfile, newDateProfile))) {\n            return newDateProfile;\n        }\n        else {\n            return currentDateProfile;\n        }\n    }\n    function reduceCurrentDate(currentDate, action, dateProfile) {\n        switch (action.type) {\n            case 'PREV':\n            case 'NEXT':\n                if (!rangeContainsMarker(dateProfile.currentRange, currentDate)) {\n                    return dateProfile.currentRange.start;\n                }\n                else {\n                    return currentDate;\n                }\n            case 'SET_DATE':\n            case 'SET_VIEW_TYPE':\n                var newDate = action.dateMarker || currentDate;\n                if (dateProfile.activeRange && !rangeContainsMarker(dateProfile.activeRange, newDate)) {\n                    return dateProfile.currentRange.start;\n                }\n                else {\n                    return newDate;\n                }\n            default:\n                return currentDate;\n        }\n    }\n    function reduceDateSelection(currentSelection, action, calendar) {\n        switch (action.type) {\n            case 'SELECT_DATES':\n                return action.selection;\n            case 'UNSELECT_DATES':\n                return null;\n            default:\n                return currentSelection;\n        }\n    }\n    function reduceSelectedEvent(currentInstanceId, action) {\n        switch (action.type) {\n            case 'SELECT_EVENT':\n                return action.eventInstanceId;\n            case 'UNSELECT_EVENT':\n                return '';\n            default:\n                return currentInstanceId;\n        }\n    }\n    function reduceEventDrag(currentDrag, action, sources, calendar) {\n        switch (action.type) {\n            case 'SET_EVENT_DRAG':\n                var newDrag = action.state;\n                return {\n                    affectedEvents: newDrag.affectedEvents,\n                    mutatedEvents: newDrag.mutatedEvents,\n                    isEvent: newDrag.isEvent,\n                    origSeg: newDrag.origSeg\n                };\n            case 'UNSET_EVENT_DRAG':\n                return null;\n            default:\n                return currentDrag;\n        }\n    }\n    function reduceEventResize(currentResize, action, sources, calendar) {\n        switch (action.type) {\n            case 'SET_EVENT_RESIZE':\n                var newResize = action.state;\n                return {\n                    affectedEvents: newResize.affectedEvents,\n                    mutatedEvents: newResize.mutatedEvents,\n                    isEvent: newResize.isEvent,\n                    origSeg: newResize.origSeg\n                };\n            case 'UNSET_EVENT_RESIZE':\n                return null;\n            default:\n                return currentResize;\n        }\n    }\n    function computeLoadingLevel(eventSources) {\n        var cnt = 0;\n        for (var sourceId in eventSources) {\n            if (eventSources[sourceId].isFetching) {\n                cnt++;\n            }\n        }\n        return cnt;\n    }\n\n    var STANDARD_PROPS = {\n        start: null,\n        end: null,\n        allDay: Boolean\n    };\n    function parseDateSpan(raw, dateEnv, defaultDuration) {\n        var span = parseOpenDateSpan(raw, dateEnv);\n        var range = span.range;\n        if (!range.start) {\n            return null;\n        }\n        if (!range.end) {\n            if (defaultDuration == null) {\n                return null;\n            }\n            else {\n                range.end = dateEnv.add(range.start, defaultDuration);\n            }\n        }\n        return span;\n    }\n    /*\n    TODO: somehow combine with parseRange?\n    Will return null if the start/end props were present but parsed invalidly.\n    */\n    function parseOpenDateSpan(raw, dateEnv) {\n        var leftovers = {};\n        var standardProps = refineProps(raw, STANDARD_PROPS, {}, leftovers);\n        var startMeta = standardProps.start ? dateEnv.createMarkerMeta(standardProps.start) : null;\n        var endMeta = standardProps.end ? dateEnv.createMarkerMeta(standardProps.end) : null;\n        var allDay = standardProps.allDay;\n        if (allDay == null) {\n            allDay = (startMeta && startMeta.isTimeUnspecified) &&\n                (!endMeta || endMeta.isTimeUnspecified);\n        }\n        // use this leftover object as the selection object\n        leftovers.range = {\n            start: startMeta ? startMeta.marker : null,\n            end: endMeta ? endMeta.marker : null\n        };\n        leftovers.allDay = allDay;\n        return leftovers;\n    }\n    function isDateSpansEqual(span0, span1) {\n        return rangesEqual(span0.range, span1.range) &&\n            span0.allDay === span1.allDay &&\n            isSpanPropsEqual(span0, span1);\n    }\n    // the NON-DATE-RELATED props\n    function isSpanPropsEqual(span0, span1) {\n        for (var propName in span1) {\n            if (propName !== 'range' && propName !== 'allDay') {\n                if (span0[propName] !== span1[propName]) {\n                    return false;\n                }\n            }\n        }\n        // are there any props that span0 has that span1 DOESN'T have?\n        // both have range/allDay, so no need to special-case.\n        for (var propName in span0) {\n            if (!(propName in span1)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    function buildDateSpanApi(span, dateEnv) {\n        return {\n            start: dateEnv.toDate(span.range.start),\n            end: dateEnv.toDate(span.range.end),\n            startStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n            endStr: dateEnv.formatIso(span.range.end, { omitTime: span.allDay }),\n            allDay: span.allDay\n        };\n    }\n    function buildDatePointApi(span, dateEnv) {\n        return {\n            date: dateEnv.toDate(span.range.start),\n            dateStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n            allDay: span.allDay\n        };\n    }\n    function fabricateEventRange(dateSpan, eventUiBases, calendar) {\n        var def = parseEventDef({ editable: false }, '', // sourceId\n        dateSpan.allDay, true, // hasEnd\n        calendar);\n        return {\n            def: def,\n            ui: compileEventUi(def, eventUiBases),\n            instance: createEventInstance(def.defId, dateSpan.range),\n            range: dateSpan.range,\n            isStart: true,\n            isEnd: true\n        };\n    }\n\n    function compileViewDefs(defaultConfigs, overrideConfigs) {\n        var hash = {};\n        var viewType;\n        for (viewType in defaultConfigs) {\n            ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n        }\n        for (viewType in overrideConfigs) {\n            ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n        }\n        return hash;\n    }\n    function ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n        if (hash[viewType]) {\n            return hash[viewType];\n        }\n        var viewDef = buildViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n        if (viewDef) {\n            hash[viewType] = viewDef;\n        }\n        return viewDef;\n    }\n    function buildViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n        var defaultConfig = defaultConfigs[viewType];\n        var overrideConfig = overrideConfigs[viewType];\n        var queryProp = function (name) {\n            return (defaultConfig && defaultConfig[name] !== null) ? defaultConfig[name] :\n                ((overrideConfig && overrideConfig[name] !== null) ? overrideConfig[name] : null);\n        };\n        var theClass = queryProp('class');\n        var superType = queryProp('superType');\n        if (!superType && theClass) {\n            superType =\n                findViewNameBySubclass(theClass, overrideConfigs) ||\n                    findViewNameBySubclass(theClass, defaultConfigs);\n        }\n        var superDef = superType ? ensureViewDef(superType, hash, defaultConfigs, overrideConfigs) : null;\n        if (!theClass && superDef) {\n            theClass = superDef.class;\n        }\n        if (!theClass) {\n            return null; // don't throw a warning, might be settings for a single-unit view\n        }\n        return {\n            type: viewType,\n            class: theClass,\n            defaults: __assign({}, (superDef ? superDef.defaults : {}), (defaultConfig ? defaultConfig.options : {})),\n            overrides: __assign({}, (superDef ? superDef.overrides : {}), (overrideConfig ? overrideConfig.options : {}))\n        };\n    }\n    function findViewNameBySubclass(viewSubclass, configs) {\n        var superProto = Object.getPrototypeOf(viewSubclass.prototype);\n        for (var viewType in configs) {\n            var parsed = configs[viewType];\n            // need DIRECT subclass, so instanceof won't do it\n            if (parsed.class && parsed.class.prototype === superProto) {\n                return viewType;\n            }\n        }\n        return '';\n    }\n\n    function parseViewConfigs(inputs) {\n        return mapHash(inputs, parseViewConfig);\n    }\n    var VIEW_DEF_PROPS = {\n        type: String,\n        class: null\n    };\n    function parseViewConfig(input) {\n        if (typeof input === 'function') {\n            input = { class: input };\n        }\n        var options = {};\n        var props = refineProps(input, VIEW_DEF_PROPS, {}, options);\n        return {\n            superType: props.type,\n            class: props.class,\n            options: options\n        };\n    }\n\n    function buildViewSpecs(defaultInputs, optionsManager) {\n        var defaultConfigs = parseViewConfigs(defaultInputs);\n        var overrideConfigs = parseViewConfigs(optionsManager.overrides.views);\n        var viewDefs = compileViewDefs(defaultConfigs, overrideConfigs);\n        return mapHash(viewDefs, function (viewDef) {\n            return buildViewSpec(viewDef, overrideConfigs, optionsManager);\n        });\n    }\n    function buildViewSpec(viewDef, overrideConfigs, optionsManager) {\n        var durationInput = viewDef.overrides.duration ||\n            viewDef.defaults.duration ||\n            optionsManager.dynamicOverrides.duration ||\n            optionsManager.overrides.duration;\n        var duration = null;\n        var durationUnit = '';\n        var singleUnit = '';\n        var singleUnitOverrides = {};\n        if (durationInput) {\n            duration = createDuration(durationInput);\n            if (duration) { // valid?\n                var denom = greatestDurationDenominator(duration, !getWeeksFromInput(durationInput));\n                durationUnit = denom.unit;\n                if (denom.value === 1) {\n                    singleUnit = durationUnit;\n                    singleUnitOverrides = overrideConfigs[durationUnit] ? overrideConfigs[durationUnit].options : {};\n                }\n            }\n        }\n        var queryButtonText = function (options) {\n            var buttonTextMap = options.buttonText || {};\n            var buttonTextKey = viewDef.defaults.buttonTextKey;\n            if (buttonTextKey != null && buttonTextMap[buttonTextKey] != null) {\n                return buttonTextMap[buttonTextKey];\n            }\n            if (buttonTextMap[viewDef.type] != null) {\n                return buttonTextMap[viewDef.type];\n            }\n            if (buttonTextMap[singleUnit] != null) {\n                return buttonTextMap[singleUnit];\n            }\n        };\n        return {\n            type: viewDef.type,\n            class: viewDef.class,\n            duration: duration,\n            durationUnit: durationUnit,\n            singleUnit: singleUnit,\n            options: __assign({}, globalDefaults, viewDef.defaults, optionsManager.dirDefaults, optionsManager.localeDefaults, optionsManager.overrides, singleUnitOverrides, viewDef.overrides, optionsManager.dynamicOverrides),\n            buttonTextOverride: queryButtonText(optionsManager.dynamicOverrides) ||\n                queryButtonText(optionsManager.overrides) || // constructor-specified buttonText lookup hash takes precedence\n                viewDef.overrides.buttonText,\n            buttonTextDefault: queryButtonText(optionsManager.localeDefaults) ||\n                queryButtonText(optionsManager.dirDefaults) ||\n                viewDef.defaults.buttonText ||\n                queryButtonText(globalDefaults) ||\n                viewDef.type // fall back to given view name\n        };\n    }\n\n    var Toolbar = /** @class */ (function (_super) {\n        __extends(Toolbar, _super);\n        function Toolbar(context, extraClassName) {\n            var _this = _super.call(this, context) || this;\n            _this._renderLayout = memoizeRendering(_this.renderLayout, _this.unrenderLayout);\n            _this._updateTitle = memoizeRendering(_this.updateTitle, null, [_this._renderLayout]);\n            _this._updateActiveButton = memoizeRendering(_this.updateActiveButton, null, [_this._renderLayout]);\n            _this._updateToday = memoizeRendering(_this.updateToday, null, [_this._renderLayout]);\n            _this._updatePrev = memoizeRendering(_this.updatePrev, null, [_this._renderLayout]);\n            _this._updateNext = memoizeRendering(_this.updateNext, null, [_this._renderLayout]);\n            _this.el = createElement('div', { className: 'fc-toolbar ' + extraClassName });\n            return _this;\n        }\n        Toolbar.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this._renderLayout.unrender(); // should unrender everything else\n            removeElement(this.el);\n        };\n        Toolbar.prototype.render = function (props) {\n            this._renderLayout(props.layout);\n            this._updateTitle(props.title);\n            this._updateActiveButton(props.activeButton);\n            this._updateToday(props.isTodayEnabled);\n            this._updatePrev(props.isPrevEnabled);\n            this._updateNext(props.isNextEnabled);\n        };\n        Toolbar.prototype.renderLayout = function (layout) {\n            var el = this.el;\n            this.viewsWithButtons = [];\n            appendToElement(el, this.renderSection('left', layout.left));\n            appendToElement(el, this.renderSection('center', layout.center));\n            appendToElement(el, this.renderSection('right', layout.right));\n        };\n        Toolbar.prototype.unrenderLayout = function () {\n            this.el.innerHTML = '';\n        };\n        Toolbar.prototype.renderSection = function (position, buttonStr) {\n            var _this = this;\n            var _a = this, theme = _a.theme, calendar = _a.calendar;\n            var optionsManager = calendar.optionsManager;\n            var viewSpecs = calendar.viewSpecs;\n            var sectionEl = createElement('div', { className: 'fc-' + position });\n            var calendarCustomButtons = optionsManager.computed.customButtons || {};\n            var calendarButtonTextOverrides = optionsManager.overrides.buttonText || {};\n            var calendarButtonText = optionsManager.computed.buttonText || {};\n            if (buttonStr) {\n                buttonStr.split(' ').forEach(function (buttonGroupStr, i) {\n                    var groupChildren = [];\n                    var isOnlyButtons = true;\n                    var groupEl;\n                    buttonGroupStr.split(',').forEach(function (buttonName, j) {\n                        var customButtonProps;\n                        var viewSpec;\n                        var buttonClick;\n                        var buttonIcon; // only one of these will be set\n                        var buttonText; // \"\n                        var buttonInnerHtml;\n                        var buttonClasses;\n                        var buttonEl;\n                        var buttonAriaAttr;\n                        if (buttonName === 'title') {\n                            groupChildren.push(htmlToElement('<h2>&nbsp;</h2>')); // we always want it to take up height\n                            isOnlyButtons = false;\n                        }\n                        else {\n                            if ((customButtonProps = calendarCustomButtons[buttonName])) {\n                                buttonClick = function (ev) {\n                                    if (customButtonProps.click) {\n                                        customButtonProps.click.call(buttonEl, ev);\n                                    }\n                                };\n                                (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) ||\n                                    (buttonIcon = theme.getIconClass(buttonName)) ||\n                                    (buttonText = customButtonProps.text);\n                            }\n                            else if ((viewSpec = viewSpecs[buttonName])) {\n                                _this.viewsWithButtons.push(buttonName);\n                                buttonClick = function () {\n                                    calendar.changeView(buttonName);\n                                };\n                                (buttonText = viewSpec.buttonTextOverride) ||\n                                    (buttonIcon = theme.getIconClass(buttonName)) ||\n                                    (buttonText = viewSpec.buttonTextDefault);\n                            }\n                            else if (calendar[buttonName]) { // a calendar method\n                                buttonClick = function () {\n                                    calendar[buttonName]();\n                                };\n                                (buttonText = calendarButtonTextOverrides[buttonName]) ||\n                                    (buttonIcon = theme.getIconClass(buttonName)) ||\n                                    (buttonText = calendarButtonText[buttonName]);\n                                //            ^ everything else is considered default\n                            }\n                            if (buttonClick) {\n                                buttonClasses = [\n                                    'fc-' + buttonName + '-button',\n                                    theme.getClass('button')\n                                ];\n                                if (buttonText) {\n                                    buttonInnerHtml = htmlEscape(buttonText);\n                                    buttonAriaAttr = '';\n                                }\n                                else if (buttonIcon) {\n                                    buttonInnerHtml = \"<span class='\" + buttonIcon + \"'></span>\";\n                                    buttonAriaAttr = ' aria-label=\"' + buttonName + '\"';\n                                }\n                                buttonEl = htmlToElement(// type=\"button\" so that it doesn't submit a form\n                                '<button type=\"button\" class=\"' + buttonClasses.join(' ') + '\"' +\n                                    buttonAriaAttr +\n                                    '>' + buttonInnerHtml + '</button>');\n                                buttonEl.addEventListener('click', buttonClick);\n                                groupChildren.push(buttonEl);\n                            }\n                        }\n                    });\n                    if (groupChildren.length > 1) {\n                        groupEl = document.createElement('div');\n                        var buttonGroupClassName = theme.getClass('buttonGroup');\n                        if (isOnlyButtons && buttonGroupClassName) {\n                            groupEl.classList.add(buttonGroupClassName);\n                        }\n                        appendToElement(groupEl, groupChildren);\n                        sectionEl.appendChild(groupEl);\n                    }\n                    else {\n                        appendToElement(sectionEl, groupChildren); // 1 or 0 children\n                    }\n                });\n            }\n            return sectionEl;\n        };\n        Toolbar.prototype.updateToday = function (isTodayEnabled) {\n            this.toggleButtonEnabled('today', isTodayEnabled);\n        };\n        Toolbar.prototype.updatePrev = function (isPrevEnabled) {\n            this.toggleButtonEnabled('prev', isPrevEnabled);\n        };\n        Toolbar.prototype.updateNext = function (isNextEnabled) {\n            this.toggleButtonEnabled('next', isNextEnabled);\n        };\n        Toolbar.prototype.updateTitle = function (text) {\n            findElements(this.el, 'h2').forEach(function (titleEl) {\n                titleEl.innerText = text;\n            });\n        };\n        Toolbar.prototype.updateActiveButton = function (buttonName) {\n            var className = this.theme.getClass('buttonActive');\n            findElements(this.el, 'button').forEach(function (buttonEl) {\n                if (buttonName && buttonEl.classList.contains('fc-' + buttonName + '-button')) {\n                    buttonEl.classList.add(className);\n                }\n                else {\n                    buttonEl.classList.remove(className);\n                }\n            });\n        };\n        Toolbar.prototype.toggleButtonEnabled = function (buttonName, bool) {\n            findElements(this.el, '.fc-' + buttonName + '-button').forEach(function (buttonEl) {\n                buttonEl.disabled = !bool;\n            });\n        };\n        return Toolbar;\n    }(Component));\n\n    var CalendarComponent = /** @class */ (function (_super) {\n        __extends(CalendarComponent, _super);\n        function CalendarComponent(context, el) {\n            var _this = _super.call(this, context) || this;\n            _this._renderToolbars = memoizeRendering(_this.renderToolbars);\n            _this.buildViewPropTransformers = memoize(buildViewPropTransformers);\n            _this.el = el;\n            prependToElement(el, _this.contentEl = createElement('div', { className: 'fc-view-container' }));\n            var calendar = _this.calendar;\n            for (var _i = 0, _a = calendar.pluginSystem.hooks.viewContainerModifiers; _i < _a.length; _i++) {\n                var modifyViewContainer = _a[_i];\n                modifyViewContainer(_this.contentEl, calendar);\n            }\n            _this.toggleElClassNames(true);\n            _this.computeTitle = memoize(computeTitle);\n            _this.parseBusinessHours = memoize(function (input) {\n                return parseBusinessHours(input, _this.calendar);\n            });\n            return _this;\n        }\n        CalendarComponent.prototype.destroy = function () {\n            if (this.header) {\n                this.header.destroy();\n            }\n            if (this.footer) {\n                this.footer.destroy();\n            }\n            if (this.view) {\n                this.view.destroy();\n            }\n            removeElement(this.contentEl);\n            this.toggleElClassNames(false);\n            _super.prototype.destroy.call(this);\n        };\n        CalendarComponent.prototype.toggleElClassNames = function (bool) {\n            var classList = this.el.classList;\n            var dirClassName = 'fc-' + this.opt('dir');\n            var themeClassName = this.theme.getClass('widget');\n            if (bool) {\n                classList.add('fc');\n                classList.add(dirClassName);\n                classList.add(themeClassName);\n            }\n            else {\n                classList.remove('fc');\n                classList.remove(dirClassName);\n                classList.remove(themeClassName);\n            }\n        };\n        CalendarComponent.prototype.render = function (props) {\n            this.freezeHeight();\n            var title = this.computeTitle(props.dateProfile, props.viewSpec.options);\n            this._renderToolbars(props.viewSpec, props.dateProfile, props.currentDate, props.dateProfileGenerator, title);\n            this.renderView(props, title);\n            this.updateSize();\n            this.thawHeight();\n        };\n        CalendarComponent.prototype.renderToolbars = function (viewSpec, dateProfile, currentDate, dateProfileGenerator, title) {\n            var headerLayout = this.opt('header');\n            var footerLayout = this.opt('footer');\n            var now = this.calendar.getNow();\n            var todayInfo = dateProfileGenerator.build(now);\n            var prevInfo = dateProfileGenerator.buildPrev(dateProfile, currentDate);\n            var nextInfo = dateProfileGenerator.buildNext(dateProfile, currentDate);\n            var toolbarProps = {\n                title: title,\n                activeButton: viewSpec.type,\n                isTodayEnabled: todayInfo.isValid && !rangeContainsMarker(dateProfile.currentRange, now),\n                isPrevEnabled: prevInfo.isValid,\n                isNextEnabled: nextInfo.isValid\n            };\n            if (headerLayout) {\n                if (!this.header) {\n                    this.header = new Toolbar(this.context, 'fc-header-toolbar');\n                    prependToElement(this.el, this.header.el);\n                }\n                this.header.receiveProps(__assign({ layout: headerLayout }, toolbarProps));\n            }\n            else if (this.header) {\n                this.header.destroy();\n                this.header = null;\n            }\n            if (footerLayout) {\n                if (!this.footer) {\n                    this.footer = new Toolbar(this.context, 'fc-footer-toolbar');\n                    appendToElement(this.el, this.footer.el);\n                }\n                this.footer.receiveProps(__assign({ layout: footerLayout }, toolbarProps));\n            }\n            else if (this.footer) {\n                this.footer.destroy();\n                this.footer = null;\n            }\n        };\n        CalendarComponent.prototype.renderView = function (props, title) {\n            var view = this.view;\n            var viewSpec = props.viewSpec, dateProfileGenerator = props.dateProfileGenerator;\n            if (!view || view.viewSpec !== viewSpec) {\n                if (view) {\n                    view.destroy();\n                }\n                view = this.view = new viewSpec['class']({\n                    calendar: this.calendar,\n                    view: null,\n                    dateEnv: this.dateEnv,\n                    theme: this.theme,\n                    options: viewSpec.options\n                }, viewSpec, dateProfileGenerator, this.contentEl);\n            }\n            else {\n                view.addScroll(view.queryScroll());\n            }\n            view.title = title; // for the API\n            var viewProps = {\n                dateProfile: props.dateProfile,\n                businessHours: this.parseBusinessHours(viewSpec.options.businessHours),\n                eventStore: props.eventStore,\n                eventUiBases: props.eventUiBases,\n                dateSelection: props.dateSelection,\n                eventSelection: props.eventSelection,\n                eventDrag: props.eventDrag,\n                eventResize: props.eventResize\n            };\n            var transformers = this.buildViewPropTransformers(this.calendar.pluginSystem.hooks.viewPropsTransformers);\n            for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n                var transformer = transformers_1[_i];\n                __assign(viewProps, transformer.transform(viewProps, viewSpec, props, view));\n            }\n            view.receiveProps(viewProps);\n        };\n        // Sizing\n        // -----------------------------------------------------------------------------------------------------------------\n        CalendarComponent.prototype.updateSize = function (isResize) {\n            if (isResize === void 0) { isResize = false; }\n            var view = this.view;\n            if (isResize) {\n                view.addScroll(view.queryScroll());\n            }\n            if (isResize || this.isHeightAuto == null) {\n                this.computeHeightVars();\n            }\n            view.updateSize(isResize, this.viewHeight, this.isHeightAuto);\n            view.updateNowIndicator(); // we need to guarantee this will run after updateSize\n            view.popScroll(isResize);\n        };\n        CalendarComponent.prototype.computeHeightVars = function () {\n            var calendar = this.calendar; // yuck. need to handle dynamic options\n            var heightInput = calendar.opt('height');\n            var contentHeightInput = calendar.opt('contentHeight');\n            this.isHeightAuto = heightInput === 'auto' || contentHeightInput === 'auto';\n            if (typeof contentHeightInput === 'number') { // exists and not 'auto'\n                this.viewHeight = contentHeightInput;\n            }\n            else if (typeof contentHeightInput === 'function') { // exists and is a function\n                this.viewHeight = contentHeightInput();\n            }\n            else if (typeof heightInput === 'number') { // exists and not 'auto'\n                this.viewHeight = heightInput - this.queryToolbarsHeight();\n            }\n            else if (typeof heightInput === 'function') { // exists and is a function\n                this.viewHeight = heightInput() - this.queryToolbarsHeight();\n            }\n            else if (heightInput === 'parent') { // set to height of parent element\n                this.viewHeight = this.el.parentNode.offsetHeight - this.queryToolbarsHeight();\n            }\n            else {\n                this.viewHeight = Math.round(this.contentEl.offsetWidth /\n                    Math.max(calendar.opt('aspectRatio'), .5));\n            }\n        };\n        CalendarComponent.prototype.queryToolbarsHeight = function () {\n            var height = 0;\n            if (this.header) {\n                height += computeHeightAndMargins(this.header.el);\n            }\n            if (this.footer) {\n                height += computeHeightAndMargins(this.footer.el);\n            }\n            return height;\n        };\n        // Height \"Freezing\"\n        // -----------------------------------------------------------------------------------------------------------------\n        CalendarComponent.prototype.freezeHeight = function () {\n            applyStyle(this.el, {\n                height: this.el.offsetHeight,\n                overflow: 'hidden'\n            });\n        };\n        CalendarComponent.prototype.thawHeight = function () {\n            applyStyle(this.el, {\n                height: '',\n                overflow: ''\n            });\n        };\n        return CalendarComponent;\n    }(Component));\n    // Title and Date Formatting\n    // -----------------------------------------------------------------------------------------------------------------\n    // Computes what the title at the top of the calendar should be for this view\n    function computeTitle(dateProfile, viewOptions) {\n        var range;\n        // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n        if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n            range = dateProfile.currentRange;\n        }\n        else { // for day units or smaller, use the actual day range\n            range = dateProfile.activeRange;\n        }\n        return this.dateEnv.formatRange(range.start, range.end, createFormatter(viewOptions.titleFormat || computeTitleFormat(dateProfile), viewOptions.titleRangeSeparator), { isEndExclusive: dateProfile.isRangeAllDay });\n    }\n    // Generates the format string that should be used to generate the title for the current date range.\n    // Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\n    function computeTitleFormat(dateProfile) {\n        var currentRangeUnit = dateProfile.currentRangeUnit;\n        if (currentRangeUnit === 'year') {\n            return { year: 'numeric' };\n        }\n        else if (currentRangeUnit === 'month') {\n            return { year: 'numeric', month: 'long' }; // like \"September 2014\"\n        }\n        else {\n            var days = diffWholeDays(dateProfile.currentRange.start, dateProfile.currentRange.end);\n            if (days !== null && days > 1) {\n                // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n                return { year: 'numeric', month: 'short', day: 'numeric' };\n            }\n            else {\n                // one day. longer, like \"September 9 2014\"\n                return { year: 'numeric', month: 'long', day: 'numeric' };\n            }\n        }\n    }\n    // Plugin\n    // -----------------------------------------------------------------------------------------------------------------\n    function buildViewPropTransformers(theClasses) {\n        return theClasses.map(function (theClass) {\n            return new theClass();\n        });\n    }\n\n    var Interaction = /** @class */ (function () {\n        function Interaction(settings) {\n            this.component = settings.component;\n        }\n        Interaction.prototype.destroy = function () {\n        };\n        return Interaction;\n    }());\n    function parseInteractionSettings(component, input) {\n        return {\n            component: component,\n            el: input.el,\n            useEventCenter: input.useEventCenter != null ? input.useEventCenter : true\n        };\n    }\n    function interactionSettingsToStore(settings) {\n        var _a;\n        return _a = {},\n            _a[settings.component.uid] = settings,\n            _a;\n    }\n    // global state\n    var interactionSettingsStore = {};\n\n    /*\n    Detects when the user clicks on an event within a DateComponent\n    */\n    var EventClicking = /** @class */ (function (_super) {\n        __extends(EventClicking, _super);\n        function EventClicking(settings) {\n            var _this = _super.call(this, settings) || this;\n            _this.handleSegClick = function (ev, segEl) {\n                var component = _this.component;\n                var seg = getElSeg(segEl);\n                if (seg && // might be the <div> surrounding the more link\n                    component.isValidSegDownEl(ev.target)) {\n                    // our way to simulate a link click for elements that can't be <a> tags\n                    // grab before trigger fired in case trigger trashes DOM thru rerendering\n                    var hasUrlContainer = elementClosest(ev.target, '.fc-has-url');\n                    var url = hasUrlContainer ? hasUrlContainer.querySelector('a[href]').href : '';\n                    component.publiclyTrigger('eventClick', [\n                        {\n                            el: segEl,\n                            event: new EventApi(component.calendar, seg.eventRange.def, seg.eventRange.instance),\n                            jsEvent: ev,\n                            view: component.view\n                        }\n                    ]);\n                    if (url && !ev.defaultPrevented) {\n                        window.location.href = url;\n                    }\n                }\n            };\n            var component = settings.component;\n            _this.destroy = listenBySelector(component.el, 'click', component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegClick);\n            return _this;\n        }\n        return EventClicking;\n    }(Interaction));\n\n    /*\n    Triggers events and adds/removes core classNames when the user's pointer\n    enters/leaves event-elements of a component.\n    */\n    var EventHovering = /** @class */ (function (_super) {\n        __extends(EventHovering, _super);\n        function EventHovering(settings) {\n            var _this = _super.call(this, settings) || this;\n            // for simulating an eventMouseLeave when the event el is destroyed while mouse is over it\n            _this.handleEventElRemove = function (el) {\n                if (el === _this.currentSegEl) {\n                    _this.handleSegLeave(null, _this.currentSegEl);\n                }\n            };\n            _this.handleSegEnter = function (ev, segEl) {\n                if (getElSeg(segEl)) { // TODO: better way to make sure not hovering over more+ link or its wrapper\n                    segEl.classList.add('fc-allow-mouse-resize');\n                    _this.currentSegEl = segEl;\n                    _this.triggerEvent('eventMouseEnter', ev, segEl);\n                }\n            };\n            _this.handleSegLeave = function (ev, segEl) {\n                if (_this.currentSegEl) {\n                    segEl.classList.remove('fc-allow-mouse-resize');\n                    _this.currentSegEl = null;\n                    _this.triggerEvent('eventMouseLeave', ev, segEl);\n                }\n            };\n            var component = settings.component;\n            _this.removeHoverListeners = listenToHoverBySelector(component.el, component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegEnter, _this.handleSegLeave);\n            component.calendar.on('eventElRemove', _this.handleEventElRemove);\n            return _this;\n        }\n        EventHovering.prototype.destroy = function () {\n            this.removeHoverListeners();\n            this.component.calendar.off('eventElRemove', this.handleEventElRemove);\n        };\n        EventHovering.prototype.triggerEvent = function (publicEvName, ev, segEl) {\n            var component = this.component;\n            var seg = getElSeg(segEl);\n            if (!ev || component.isValidSegDownEl(ev.target)) {\n                component.publiclyTrigger(publicEvName, [\n                    {\n                        el: segEl,\n                        event: new EventApi(this.component.calendar, seg.eventRange.def, seg.eventRange.instance),\n                        jsEvent: ev,\n                        view: component.view\n                    }\n                ]);\n            }\n        };\n        return EventHovering;\n    }(Interaction));\n\n    var StandardTheme = /** @class */ (function (_super) {\n        __extends(StandardTheme, _super);\n        function StandardTheme() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        return StandardTheme;\n    }(Theme));\n    StandardTheme.prototype.classes = {\n        widget: 'fc-unthemed',\n        widgetHeader: 'fc-widget-header',\n        widgetContent: 'fc-widget-content',\n        buttonGroup: 'fc-button-group',\n        button: 'fc-button fc-button-primary',\n        buttonActive: 'fc-button-active',\n        popoverHeader: 'fc-widget-header',\n        popoverContent: 'fc-widget-content',\n        // day grid\n        headerRow: 'fc-widget-header',\n        dayRow: 'fc-widget-content',\n        // list view\n        listView: 'fc-widget-content'\n    };\n    StandardTheme.prototype.baseIconClass = 'fc-icon';\n    StandardTheme.prototype.iconClasses = {\n        close: 'fc-icon-x',\n        prev: 'fc-icon-chevron-left',\n        next: 'fc-icon-chevron-right',\n        prevYear: 'fc-icon-chevrons-left',\n        nextYear: 'fc-icon-chevrons-right'\n    };\n    StandardTheme.prototype.iconOverrideOption = 'buttonIcons';\n    StandardTheme.prototype.iconOverrideCustomButtonOption = 'icon';\n    StandardTheme.prototype.iconOverridePrefix = 'fc-icon-';\n\n    var Calendar = /** @class */ (function () {\n        function Calendar(el, overrides) {\n            var _this = this;\n            this.parseRawLocales = memoize(parseRawLocales);\n            this.buildLocale = memoize(buildLocale);\n            this.buildDateEnv = memoize(buildDateEnv);\n            this.buildTheme = memoize(buildTheme);\n            this.buildEventUiSingleBase = memoize(this._buildEventUiSingleBase);\n            this.buildSelectionConfig = memoize(this._buildSelectionConfig);\n            this.buildEventUiBySource = memoizeOutput(buildEventUiBySource, isObjectsSimilar);\n            this.buildEventUiBases = memoize(buildEventUiBases);\n            this.interactionsStore = {};\n            this.actionQueue = [];\n            this.isReducing = false;\n            // isDisplaying: boolean = false // installed in DOM? accepting renders?\n            this.needsRerender = false; // needs a render?\n            this.needsFullRerender = false;\n            this.isRendering = false; // currently in the executeRender function?\n            this.renderingPauseDepth = 0;\n            this.buildDelayedRerender = memoize(buildDelayedRerender);\n            this.afterSizingTriggers = {};\n            this.isViewUpdated = false;\n            this.isDatesUpdated = false;\n            this.isEventsUpdated = false;\n            this.el = el;\n            this.optionsManager = new OptionsManager(overrides || {});\n            this.pluginSystem = new PluginSystem();\n            // only do once. don't do in handleOptions. because can't remove plugins\n            this.addPluginInputs(this.optionsManager.computed.plugins || []);\n            this.handleOptions(this.optionsManager.computed);\n            this.publiclyTrigger('_init'); // for tests\n            this.hydrate();\n            this.calendarInteractions = this.pluginSystem.hooks.calendarInteractions\n                .map(function (calendarInteractionClass) {\n                return new calendarInteractionClass(_this);\n            });\n        }\n        Calendar.prototype.addPluginInputs = function (pluginInputs) {\n            var pluginDefs = refinePluginDefs(pluginInputs);\n            for (var _i = 0, pluginDefs_1 = pluginDefs; _i < pluginDefs_1.length; _i++) {\n                var pluginDef = pluginDefs_1[_i];\n                this.pluginSystem.add(pluginDef);\n            }\n        };\n        Object.defineProperty(Calendar.prototype, \"view\", {\n            // public API\n            get: function () {\n                return this.component ? this.component.view : null;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        // Public API for rendering\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.render = function () {\n            if (!this.component) {\n                this.renderableEventStore = createEmptyEventStore();\n                this.bindHandlers();\n                this.executeRender();\n            }\n            else {\n                this.requestRerender(true);\n            }\n        };\n        Calendar.prototype.destroy = function () {\n            if (this.component) {\n                this.unbindHandlers();\n                this.component.destroy(); // don't null-out. in case API needs access\n                this.component = null; // umm ???\n                for (var _i = 0, _a = this.calendarInteractions; _i < _a.length; _i++) {\n                    var interaction = _a[_i];\n                    interaction.destroy();\n                }\n                this.publiclyTrigger('_destroyed');\n            }\n        };\n        // Handlers\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.bindHandlers = function () {\n            var _this = this;\n            // event delegation for nav links\n            this.removeNavLinkListener = listenBySelector(this.el, 'click', 'a[data-goto]', function (ev, anchorEl) {\n                var gotoOptions = anchorEl.getAttribute('data-goto');\n                gotoOptions = gotoOptions ? JSON.parse(gotoOptions) : {};\n                var dateEnv = _this.dateEnv;\n                var dateMarker = dateEnv.createMarker(gotoOptions.date);\n                var viewType = gotoOptions.type;\n                // property like \"navLinkDayClick\". might be a string or a function\n                var customAction = _this.viewOpt('navLink' + capitaliseFirstLetter(viewType) + 'Click');\n                if (typeof customAction === 'function') {\n                    customAction(dateEnv.toDate(dateMarker), ev);\n                }\n                else {\n                    if (typeof customAction === 'string') {\n                        viewType = customAction;\n                    }\n                    _this.zoomTo(dateMarker, viewType);\n                }\n            });\n            if (this.opt('handleWindowResize')) {\n                window.addEventListener('resize', this.windowResizeProxy = debounce(// prevents rapid calls\n                this.windowResize.bind(this), this.opt('windowResizeDelay')));\n            }\n        };\n        Calendar.prototype.unbindHandlers = function () {\n            this.removeNavLinkListener();\n            if (this.windowResizeProxy) {\n                window.removeEventListener('resize', this.windowResizeProxy);\n                this.windowResizeProxy = null;\n            }\n        };\n        // Dispatcher\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.hydrate = function () {\n            var _this = this;\n            this.state = this.buildInitialState();\n            var rawSources = this.opt('eventSources') || [];\n            var singleRawSource = this.opt('events');\n            var sources = []; // parsed\n            if (singleRawSource) {\n                rawSources.unshift(singleRawSource);\n            }\n            for (var _i = 0, rawSources_1 = rawSources; _i < rawSources_1.length; _i++) {\n                var rawSource = rawSources_1[_i];\n                var source = parseEventSource(rawSource, this);\n                if (source) {\n                    sources.push(source);\n                }\n            }\n            this.batchRendering(function () {\n                _this.dispatch({ type: 'INIT' }); // pass in sources here?\n                _this.dispatch({ type: 'ADD_EVENT_SOURCES', sources: sources });\n                _this.dispatch({\n                    type: 'SET_VIEW_TYPE',\n                    viewType: _this.opt('defaultView') || _this.pluginSystem.hooks.defaultView\n                });\n            });\n        };\n        Calendar.prototype.buildInitialState = function () {\n            return {\n                viewType: null,\n                loadingLevel: 0,\n                eventSourceLoadingLevel: 0,\n                currentDate: this.getInitialDate(),\n                dateProfile: null,\n                eventSources: {},\n                eventStore: createEmptyEventStore(),\n                dateSelection: null,\n                eventSelection: '',\n                eventDrag: null,\n                eventResize: null\n            };\n        };\n        Calendar.prototype.dispatch = function (action) {\n            this.actionQueue.push(action);\n            if (!this.isReducing) {\n                this.isReducing = true;\n                var oldState = this.state;\n                while (this.actionQueue.length) {\n                    this.state = this.reduce(this.state, this.actionQueue.shift(), this);\n                }\n                var newState = this.state;\n                this.isReducing = false;\n                if (!oldState.loadingLevel && newState.loadingLevel) {\n                    this.publiclyTrigger('loading', [true]);\n                }\n                else if (oldState.loadingLevel && !newState.loadingLevel) {\n                    this.publiclyTrigger('loading', [false]);\n                }\n                var view = this.component && this.component.view;\n                if (oldState.eventStore !== newState.eventStore || this.needsFullRerender) {\n                    if (oldState.eventStore) {\n                        this.isEventsUpdated = true;\n                    }\n                }\n                if (oldState.dateProfile !== newState.dateProfile || this.needsFullRerender) {\n                    if (oldState.dateProfile && view) { // why would view be null!?\n                        this.publiclyTrigger('datesDestroy', [\n                            {\n                                view: view,\n                                el: view.el\n                            }\n                        ]);\n                    }\n                    this.isDatesUpdated = true;\n                }\n                if (oldState.viewType !== newState.viewType || this.needsFullRerender) {\n                    if (oldState.viewType && view) { // why would view be null!?\n                        this.publiclyTrigger('viewSkeletonDestroy', [\n                            {\n                                view: view,\n                                el: view.el\n                            }\n                        ]);\n                    }\n                    this.isViewUpdated = true;\n                }\n                this.requestRerender();\n            }\n        };\n        Calendar.prototype.reduce = function (state, action, calendar) {\n            return reduce(state, action, calendar);\n        };\n        // Render Queue\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.requestRerender = function (needsFull) {\n            if (needsFull === void 0) { needsFull = false; }\n            this.needsRerender = true;\n            this.needsFullRerender = this.needsFullRerender || needsFull;\n            this.delayedRerender(); // will call a debounced-version of tryRerender\n        };\n        Calendar.prototype.tryRerender = function () {\n            if (this.component && // must be accepting renders\n                this.needsRerender && // indicates that a rerender was requested\n                !this.renderingPauseDepth && // not paused\n                !this.isRendering // not currently in the render loop\n            ) {\n                this.executeRender();\n            }\n        };\n        Calendar.prototype.batchRendering = function (func) {\n            this.renderingPauseDepth++;\n            func();\n            this.renderingPauseDepth--;\n            if (this.needsRerender) {\n                this.requestRerender();\n            }\n        };\n        // Rendering\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.executeRender = function () {\n            var needsFullRerender = this.needsFullRerender; // save before clearing\n            // clear these BEFORE the render so that new values will accumulate during render\n            this.needsRerender = false;\n            this.needsFullRerender = false;\n            this.isRendering = true;\n            this.renderComponent(needsFullRerender);\n            this.isRendering = false;\n            // received a rerender request while rendering\n            if (this.needsRerender) {\n                this.delayedRerender();\n            }\n        };\n        /*\n        don't call this directly. use executeRender instead\n        */\n        Calendar.prototype.renderComponent = function (needsFull) {\n            var _a = this, state = _a.state, component = _a.component;\n            var viewType = state.viewType;\n            var viewSpec = this.viewSpecs[viewType];\n            var savedScroll = (needsFull && component) ? component.view.queryScroll() : null;\n            if (!viewSpec) {\n                throw new Error(\"View type \\\"\" + viewType + \"\\\" is not valid\");\n            }\n            // if event sources are still loading and progressive rendering hasn't been enabled,\n            // keep rendering the last fully loaded set of events\n            var renderableEventStore = this.renderableEventStore =\n                (state.eventSourceLoadingLevel && !this.opt('progressiveEventRendering')) ?\n                    this.renderableEventStore :\n                    state.eventStore;\n            var eventUiSingleBase = this.buildEventUiSingleBase(viewSpec.options);\n            var eventUiBySource = this.buildEventUiBySource(state.eventSources);\n            var eventUiBases = this.eventUiBases = this.buildEventUiBases(renderableEventStore.defs, eventUiSingleBase, eventUiBySource);\n            if (needsFull || !component) {\n                if (component) {\n                    component.freezeHeight(); // next component will unfreeze it\n                    component.destroy();\n                }\n                component = this.component = new CalendarComponent({\n                    calendar: this,\n                    view: null,\n                    dateEnv: this.dateEnv,\n                    theme: this.theme,\n                    options: this.optionsManager.computed\n                }, this.el);\n            }\n            component.receiveProps(__assign({}, state, { viewSpec: viewSpec, dateProfile: state.dateProfile, dateProfileGenerator: this.dateProfileGenerators[viewType], eventStore: renderableEventStore, eventUiBases: eventUiBases, dateSelection: state.dateSelection, eventSelection: state.eventSelection, eventDrag: state.eventDrag, eventResize: state.eventResize }));\n            if (savedScroll) {\n                component.view.applyScroll(savedScroll, false);\n            }\n            if (this.isViewUpdated) {\n                this.isViewUpdated = false;\n                this.publiclyTrigger('viewSkeletonRender', [\n                    {\n                        view: component.view,\n                        el: component.view.el\n                    }\n                ]);\n            }\n            if (this.isDatesUpdated) {\n                this.isDatesUpdated = false;\n                this.publiclyTrigger('datesRender', [\n                    {\n                        view: component.view,\n                        el: component.view.el\n                    }\n                ]);\n            }\n            if (this.isEventsUpdated) {\n                this.isEventsUpdated = false;\n            }\n            this.releaseAfterSizingTriggers();\n        };\n        // Options\n        // -----------------------------------------------------------------------------------------------------------------\n        /*\n        Not meant for public API\n        */\n        Calendar.prototype.resetOptions = function (options) {\n            var _this = this;\n            var changeHandlers = this.pluginSystem.hooks.optionChangeHandlers;\n            var oldOptions = this.optionsManager.overrides;\n            var oldNormalOptions = {};\n            var normalOptions = {};\n            var specialOptions = {};\n            for (var name_1 in oldOptions) {\n                if (!changeHandlers[name_1]) {\n                    oldNormalOptions[name_1] = oldOptions[name_1];\n                }\n            }\n            for (var name_2 in options) {\n                if (changeHandlers[name_2]) {\n                    specialOptions[name_2] = options[name_2];\n                }\n                else {\n                    normalOptions[name_2] = options[name_2];\n                }\n            }\n            this.batchRendering(function () {\n                if (anyKeysRemoved(oldNormalOptions, normalOptions)) {\n                    _this.processOptions(options, 'reset');\n                }\n                else {\n                    _this.processOptions(computeChangedProps(oldNormalOptions, normalOptions));\n                }\n                // handle special options last\n                for (var name_3 in specialOptions) {\n                    changeHandlers[name_3](specialOptions[name_3], _this);\n                }\n            });\n        };\n        /*\n        Not meant for public API. Won't give the same precedence that setOption does\n        */\n        Calendar.prototype.setOptions = function (options) {\n            var _this = this;\n            var changeHandlers = this.pluginSystem.hooks.optionChangeHandlers;\n            var normalOptions = {};\n            var specialOptions = {};\n            for (var name_4 in options) {\n                if (changeHandlers[name_4]) {\n                    specialOptions[name_4] = options[name_4];\n                }\n                else {\n                    normalOptions[name_4] = options[name_4];\n                }\n            }\n            this.batchRendering(function () {\n                _this.processOptions(normalOptions);\n                // handle special options last\n                for (var name_5 in specialOptions) {\n                    changeHandlers[name_5](specialOptions[name_5], _this);\n                }\n            });\n        };\n        Calendar.prototype.processOptions = function (options, mode) {\n            var _this = this;\n            var oldDateEnv = this.dateEnv; // do this before handleOptions\n            var isTimeZoneDirty = false;\n            var isSizeDirty = false;\n            var anyDifficultOptions = false;\n            for (var name_6 in options) {\n                if (/^(height|contentHeight|aspectRatio)$/.test(name_6)) {\n                    isSizeDirty = true;\n                }\n                else if (/^(defaultDate|defaultView)$/.test(name_6)) ;\n                else {\n                    anyDifficultOptions = true;\n                    if (name_6 === 'timeZone') {\n                        isTimeZoneDirty = true;\n                    }\n                }\n            }\n            if (mode === 'reset') {\n                anyDifficultOptions = true;\n                this.optionsManager.reset(options);\n            }\n            else if (mode === 'dynamic') {\n                this.optionsManager.addDynamic(options); // takes higher precedence\n            }\n            else {\n                this.optionsManager.add(options);\n            }\n            if (anyDifficultOptions) {\n                this.handleOptions(this.optionsManager.computed); // only for \"difficult\" options\n                this.needsFullRerender = true;\n                this.batchRendering(function () {\n                    if (isTimeZoneDirty) {\n                        _this.dispatch({\n                            type: 'CHANGE_TIMEZONE',\n                            oldDateEnv: oldDateEnv\n                        });\n                    }\n                    /* HACK\n                    has the same effect as calling this.requestRerender(true)\n                    but recomputes the state's dateProfile\n                    */\n                    _this.dispatch({\n                        type: 'SET_VIEW_TYPE',\n                        viewType: _this.state.viewType\n                    });\n                });\n            }\n            if (isSizeDirty) {\n                this.updateSize();\n            }\n        };\n        Calendar.prototype.setOption = function (name, val) {\n            var _a;\n            this.processOptions((_a = {}, _a[name] = val, _a), 'dynamic');\n        };\n        Calendar.prototype.getOption = function (name) {\n            return this.optionsManager.computed[name];\n        };\n        Calendar.prototype.opt = function (name) {\n            return this.optionsManager.computed[name];\n        };\n        Calendar.prototype.viewOpt = function (name) {\n            return this.viewOpts()[name];\n        };\n        Calendar.prototype.viewOpts = function () {\n            return this.viewSpecs[this.state.viewType].options;\n        };\n        /*\n        rebuilds things based off of a complete set of refined options\n        */\n        Calendar.prototype.handleOptions = function (options) {\n            var _this = this;\n            var pluginHooks = this.pluginSystem.hooks;\n            this.defaultAllDayEventDuration = createDuration(options.defaultAllDayEventDuration);\n            this.defaultTimedEventDuration = createDuration(options.defaultTimedEventDuration);\n            this.delayedRerender = this.buildDelayedRerender(options.rerenderDelay);\n            this.theme = this.buildTheme(options);\n            var available = this.parseRawLocales(options.locales);\n            this.availableRawLocales = available.map;\n            var locale = this.buildLocale(options.locale || available.defaultCode, available.map);\n            this.dateEnv = this.buildDateEnv(locale, options.timeZone, pluginHooks.namedTimeZonedImpl, options.firstDay, options.weekNumberCalculation, options.weekLabel, pluginHooks.cmdFormatter);\n            this.selectionConfig = this.buildSelectionConfig(options); // needs dateEnv. do after :(\n            // ineffecient to do every time?\n            this.viewSpecs = buildViewSpecs(pluginHooks.views, this.optionsManager);\n            // ineffecient to do every time?\n            this.dateProfileGenerators = mapHash(this.viewSpecs, function (viewSpec) {\n                return new viewSpec.class.prototype.dateProfileGeneratorClass(viewSpec, _this);\n            });\n        };\n        Calendar.prototype.getAvailableLocaleCodes = function () {\n            return Object.keys(this.availableRawLocales);\n        };\n        Calendar.prototype._buildSelectionConfig = function (rawOpts) {\n            return processScopedUiProps('select', rawOpts, this);\n        };\n        Calendar.prototype._buildEventUiSingleBase = function (rawOpts) {\n            if (rawOpts.editable) { // so 'editable' affected events\n                rawOpts = __assign({}, rawOpts, { eventEditable: true });\n            }\n            return processScopedUiProps('event', rawOpts, this);\n        };\n        // Trigger\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.hasPublicHandlers = function (name) {\n            return this.hasHandlers(name) ||\n                this.opt(name); // handler specified in options\n        };\n        Calendar.prototype.publiclyTrigger = function (name, args) {\n            var optHandler = this.opt(name);\n            this.triggerWith(name, this, args);\n            if (optHandler) {\n                return optHandler.apply(this, args);\n            }\n        };\n        Calendar.prototype.publiclyTriggerAfterSizing = function (name, args) {\n            var afterSizingTriggers = this.afterSizingTriggers;\n            (afterSizingTriggers[name] || (afterSizingTriggers[name] = [])).push(args);\n        };\n        Calendar.prototype.releaseAfterSizingTriggers = function () {\n            var afterSizingTriggers = this.afterSizingTriggers;\n            for (var name_7 in afterSizingTriggers) {\n                for (var _i = 0, _a = afterSizingTriggers[name_7]; _i < _a.length; _i++) {\n                    var args = _a[_i];\n                    this.publiclyTrigger(name_7, args);\n                }\n            }\n            this.afterSizingTriggers = {};\n        };\n        // View\n        // -----------------------------------------------------------------------------------------------------------------\n        // Returns a boolean about whether the view is okay to instantiate at some point\n        Calendar.prototype.isValidViewType = function (viewType) {\n            return Boolean(this.viewSpecs[viewType]);\n        };\n        Calendar.prototype.changeView = function (viewType, dateOrRange) {\n            var dateMarker = null;\n            if (dateOrRange) {\n                if (dateOrRange.start && dateOrRange.end) { // a range\n                    this.optionsManager.addDynamic({ visibleRange: dateOrRange }); // will not rerender\n                    this.handleOptions(this.optionsManager.computed); // ...but yuck\n                }\n                else { // a date\n                    dateMarker = this.dateEnv.createMarker(dateOrRange); // just like gotoDate\n                }\n            }\n            this.unselect();\n            this.dispatch({\n                type: 'SET_VIEW_TYPE',\n                viewType: viewType,\n                dateMarker: dateMarker\n            });\n        };\n        // Forces navigation to a view for the given date.\n        // `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\n        // needs to change\n        Calendar.prototype.zoomTo = function (dateMarker, viewType) {\n            var spec;\n            viewType = viewType || 'day'; // day is default zoom\n            spec = this.viewSpecs[viewType] ||\n                this.getUnitViewSpec(viewType);\n            this.unselect();\n            if (spec) {\n                this.dispatch({\n                    type: 'SET_VIEW_TYPE',\n                    viewType: spec.type,\n                    dateMarker: dateMarker\n                });\n            }\n            else {\n                this.dispatch({\n                    type: 'SET_DATE',\n                    dateMarker: dateMarker\n                });\n            }\n        };\n        // Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\n        // Preference is given to views that have corresponding buttons.\n        Calendar.prototype.getUnitViewSpec = function (unit) {\n            var component = this.component;\n            var viewTypes = [];\n            var i;\n            var spec;\n            // put views that have buttons first. there will be duplicates, but oh\n            if (component.header) {\n                viewTypes.push.apply(viewTypes, component.header.viewsWithButtons);\n            }\n            if (component.footer) {\n                viewTypes.push.apply(viewTypes, component.footer.viewsWithButtons);\n            }\n            for (var viewType in this.viewSpecs) {\n                viewTypes.push(viewType);\n            }\n            for (i = 0; i < viewTypes.length; i++) {\n                spec = this.viewSpecs[viewTypes[i]];\n                if (spec) {\n                    if (spec.singleUnit === unit) {\n                        return spec;\n                    }\n                }\n            }\n        };\n        // Current Date\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.getInitialDate = function () {\n            var defaultDateInput = this.opt('defaultDate');\n            // compute the initial ambig-timezone date\n            if (defaultDateInput != null) {\n                return this.dateEnv.createMarker(defaultDateInput);\n            }\n            else {\n                return this.getNow(); // getNow already returns unzoned\n            }\n        };\n        Calendar.prototype.prev = function () {\n            this.unselect();\n            this.dispatch({ type: 'PREV' });\n        };\n        Calendar.prototype.next = function () {\n            this.unselect();\n            this.dispatch({ type: 'NEXT' });\n        };\n        Calendar.prototype.prevYear = function () {\n            this.unselect();\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: this.dateEnv.addYears(this.state.currentDate, -1)\n            });\n        };\n        Calendar.prototype.nextYear = function () {\n            this.unselect();\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: this.dateEnv.addYears(this.state.currentDate, 1)\n            });\n        };\n        Calendar.prototype.today = function () {\n            this.unselect();\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: this.getNow()\n            });\n        };\n        Calendar.prototype.gotoDate = function (zonedDateInput) {\n            this.unselect();\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: this.dateEnv.createMarker(zonedDateInput)\n            });\n        };\n        Calendar.prototype.incrementDate = function (deltaInput) {\n            var delta = createDuration(deltaInput);\n            if (delta) { // else, warn about invalid input?\n                this.unselect();\n                this.dispatch({\n                    type: 'SET_DATE',\n                    dateMarker: this.dateEnv.add(this.state.currentDate, delta)\n                });\n            }\n        };\n        // for external API\n        Calendar.prototype.getDate = function () {\n            return this.dateEnv.toDate(this.state.currentDate);\n        };\n        // Date Formatting Utils\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.formatDate = function (d, formatter) {\n            var dateEnv = this.dateEnv;\n            return dateEnv.format(dateEnv.createMarker(d), createFormatter(formatter));\n        };\n        // `settings` is for formatter AND isEndExclusive\n        Calendar.prototype.formatRange = function (d0, d1, settings) {\n            var dateEnv = this.dateEnv;\n            return dateEnv.formatRange(dateEnv.createMarker(d0), dateEnv.createMarker(d1), createFormatter(settings, this.opt('defaultRangeSeparator')), settings);\n        };\n        Calendar.prototype.formatIso = function (d, omitTime) {\n            var dateEnv = this.dateEnv;\n            return dateEnv.formatIso(dateEnv.createMarker(d), { omitTime: omitTime });\n        };\n        // Sizing\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.windowResize = function (ev) {\n            if (!this.isHandlingWindowResize &&\n                this.component && // why?\n                ev.target === window // not a jqui resize event\n            ) {\n                this.isHandlingWindowResize = true;\n                this.updateSize();\n                this.publiclyTrigger('windowResize', [this.view]);\n                this.isHandlingWindowResize = false;\n            }\n        };\n        Calendar.prototype.updateSize = function () {\n            if (this.component) { // when?\n                this.component.updateSize(true);\n            }\n        };\n        // Component Registration\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.registerInteractiveComponent = function (component, settingsInput) {\n            var settings = parseInteractionSettings(component, settingsInput);\n            var DEFAULT_INTERACTIONS = [\n                EventClicking,\n                EventHovering\n            ];\n            var interactionClasses = DEFAULT_INTERACTIONS.concat(this.pluginSystem.hooks.componentInteractions);\n            var interactions = interactionClasses.map(function (interactionClass) {\n                return new interactionClass(settings);\n            });\n            this.interactionsStore[component.uid] = interactions;\n            interactionSettingsStore[component.uid] = settings;\n        };\n        Calendar.prototype.unregisterInteractiveComponent = function (component) {\n            for (var _i = 0, _a = this.interactionsStore[component.uid]; _i < _a.length; _i++) {\n                var listener = _a[_i];\n                listener.destroy();\n            }\n            delete this.interactionsStore[component.uid];\n            delete interactionSettingsStore[component.uid];\n        };\n        // Date Selection / Event Selection / DayClick\n        // -----------------------------------------------------------------------------------------------------------------\n        // this public method receives start/end dates in any format, with any timezone\n        // NOTE: args were changed from v3\n        Calendar.prototype.select = function (dateOrObj, endDate) {\n            var selectionInput;\n            if (endDate == null) {\n                if (dateOrObj.start != null) {\n                    selectionInput = dateOrObj;\n                }\n                else {\n                    selectionInput = {\n                        start: dateOrObj,\n                        end: null\n                    };\n                }\n            }\n            else {\n                selectionInput = {\n                    start: dateOrObj,\n                    end: endDate\n                };\n            }\n            var selection = parseDateSpan(selectionInput, this.dateEnv, createDuration({ days: 1 }) // TODO: cache this?\n            );\n            if (selection) { // throw parse error otherwise?\n                this.dispatch({ type: 'SELECT_DATES', selection: selection });\n                this.triggerDateSelect(selection);\n            }\n        };\n        // public method\n        Calendar.prototype.unselect = function (pev) {\n            if (this.state.dateSelection) {\n                this.dispatch({ type: 'UNSELECT_DATES' });\n                this.triggerDateUnselect(pev);\n            }\n        };\n        Calendar.prototype.triggerDateSelect = function (selection, pev) {\n            var arg = this.buildDateSpanApi(selection);\n            arg.jsEvent = pev ? pev.origEvent : null;\n            arg.view = this.view;\n            this.publiclyTrigger('select', [arg]);\n        };\n        Calendar.prototype.triggerDateUnselect = function (pev) {\n            this.publiclyTrigger('unselect', [\n                {\n                    jsEvent: pev ? pev.origEvent : null,\n                    view: this.view\n                }\n            ]);\n        };\n        // TODO: receive pev?\n        Calendar.prototype.triggerDateClick = function (dateSpan, dayEl, view, ev) {\n            var arg = this.buildDatePointApi(dateSpan);\n            arg.dayEl = dayEl;\n            arg.jsEvent = ev;\n            arg.view = view;\n            this.publiclyTrigger('dateClick', [arg]);\n        };\n        Calendar.prototype.buildDatePointApi = function (dateSpan) {\n            var props = {};\n            for (var _i = 0, _a = this.pluginSystem.hooks.datePointTransforms; _i < _a.length; _i++) {\n                var transform = _a[_i];\n                __assign(props, transform(dateSpan, this));\n            }\n            __assign(props, buildDatePointApi(dateSpan, this.dateEnv));\n            return props;\n        };\n        Calendar.prototype.buildDateSpanApi = function (dateSpan) {\n            var props = {};\n            for (var _i = 0, _a = this.pluginSystem.hooks.dateSpanTransforms; _i < _a.length; _i++) {\n                var transform = _a[_i];\n                __assign(props, transform(dateSpan, this));\n            }\n            __assign(props, buildDateSpanApi(dateSpan, this.dateEnv));\n            return props;\n        };\n        // Date Utils\n        // -----------------------------------------------------------------------------------------------------------------\n        // Returns a DateMarker for the current date, as defined by the client's computer or from the `now` option\n        Calendar.prototype.getNow = function () {\n            var now = this.opt('now');\n            if (typeof now === 'function') {\n                now = now();\n            }\n            if (now == null) {\n                return this.dateEnv.createNowMarker();\n            }\n            return this.dateEnv.createMarker(now);\n        };\n        // Event-Date Utilities\n        // -----------------------------------------------------------------------------------------------------------------\n        // Given an event's allDay status and start date, return what its fallback end date should be.\n        // TODO: rename to computeDefaultEventEnd\n        Calendar.prototype.getDefaultEventEnd = function (allDay, marker) {\n            var end = marker;\n            if (allDay) {\n                end = startOfDay(end);\n                end = this.dateEnv.add(end, this.defaultAllDayEventDuration);\n            }\n            else {\n                end = this.dateEnv.add(end, this.defaultTimedEventDuration);\n            }\n            return end;\n        };\n        // Public Events API\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.addEvent = function (eventInput, sourceInput) {\n            if (eventInput instanceof EventApi) {\n                var def = eventInput._def;\n                var instance = eventInput._instance;\n                // not already present? don't want to add an old snapshot\n                if (!this.state.eventStore.defs[def.defId]) {\n                    this.dispatch({\n                        type: 'ADD_EVENTS',\n                        eventStore: eventTupleToStore({ def: def, instance: instance }) // TODO: better util for two args?\n                    });\n                }\n                return eventInput;\n            }\n            var sourceId;\n            if (sourceInput instanceof EventSourceApi) {\n                sourceId = sourceInput.internalEventSource.sourceId;\n            }\n            else if (sourceInput != null) {\n                var sourceApi = this.getEventSourceById(sourceInput); // TODO: use an internal function\n                if (!sourceApi) {\n                    console.warn('Could not find an event source with ID \"' + sourceInput + '\"'); // TODO: test\n                    return null;\n                }\n                else {\n                    sourceId = sourceApi.internalEventSource.sourceId;\n                }\n            }\n            var tuple = parseEvent(eventInput, sourceId, this);\n            if (tuple) {\n                this.dispatch({\n                    type: 'ADD_EVENTS',\n                    eventStore: eventTupleToStore(tuple)\n                });\n                return new EventApi(this, tuple.def, tuple.def.recurringDef ? null : tuple.instance);\n            }\n            return null;\n        };\n        // TODO: optimize\n        Calendar.prototype.getEventById = function (id) {\n            var _a = this.state.eventStore, defs = _a.defs, instances = _a.instances;\n            id = String(id);\n            for (var defId in defs) {\n                var def = defs[defId];\n                if (def.publicId === id) {\n                    if (def.recurringDef) {\n                        return new EventApi(this, def, null);\n                    }\n                    else {\n                        for (var instanceId in instances) {\n                            var instance = instances[instanceId];\n                            if (instance.defId === def.defId) {\n                                return new EventApi(this, def, instance);\n                            }\n                        }\n                    }\n                }\n            }\n            return null;\n        };\n        Calendar.prototype.getEvents = function () {\n            var _a = this.state.eventStore, defs = _a.defs, instances = _a.instances;\n            var eventApis = [];\n            for (var id in instances) {\n                var instance = instances[id];\n                var def = defs[instance.defId];\n                eventApis.push(new EventApi(this, def, instance));\n            }\n            return eventApis;\n        };\n        Calendar.prototype.removeAllEvents = function () {\n            this.dispatch({ type: 'REMOVE_ALL_EVENTS' });\n        };\n        Calendar.prototype.rerenderEvents = function () {\n            this.dispatch({ type: 'RESET_EVENTS' });\n        };\n        // Public Event Sources API\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.getEventSources = function () {\n            var sourceHash = this.state.eventSources;\n            var sourceApis = [];\n            for (var internalId in sourceHash) {\n                sourceApis.push(new EventSourceApi(this, sourceHash[internalId]));\n            }\n            return sourceApis;\n        };\n        Calendar.prototype.getEventSourceById = function (id) {\n            var sourceHash = this.state.eventSources;\n            id = String(id);\n            for (var sourceId in sourceHash) {\n                if (sourceHash[sourceId].publicId === id) {\n                    return new EventSourceApi(this, sourceHash[sourceId]);\n                }\n            }\n            return null;\n        };\n        Calendar.prototype.addEventSource = function (sourceInput) {\n            if (sourceInput instanceof EventSourceApi) {\n                // not already present? don't want to add an old snapshot\n                if (!this.state.eventSources[sourceInput.internalEventSource.sourceId]) {\n                    this.dispatch({\n                        type: 'ADD_EVENT_SOURCES',\n                        sources: [sourceInput.internalEventSource]\n                    });\n                }\n                return sourceInput;\n            }\n            var eventSource = parseEventSource(sourceInput, this);\n            if (eventSource) { // TODO: error otherwise?\n                this.dispatch({ type: 'ADD_EVENT_SOURCES', sources: [eventSource] });\n                return new EventSourceApi(this, eventSource);\n            }\n            return null;\n        };\n        Calendar.prototype.removeAllEventSources = function () {\n            this.dispatch({ type: 'REMOVE_ALL_EVENT_SOURCES' });\n        };\n        Calendar.prototype.refetchEvents = function () {\n            this.dispatch({ type: 'FETCH_EVENT_SOURCES' });\n        };\n        // Scroll\n        // -----------------------------------------------------------------------------------------------------------------\n        Calendar.prototype.scrollToTime = function (timeInput) {\n            var time = createDuration(timeInput);\n            if (time) {\n                this.component.view.scrollToTime(time);\n            }\n        };\n        return Calendar;\n    }());\n    EmitterMixin.mixInto(Calendar);\n    // for memoizers\n    // -----------------------------------------------------------------------------------------------------------------\n    function buildDateEnv(locale, timeZone, namedTimeZoneImpl, firstDay, weekNumberCalculation, weekLabel, cmdFormatter) {\n        return new DateEnv({\n            calendarSystem: 'gregory',\n            timeZone: timeZone,\n            namedTimeZoneImpl: namedTimeZoneImpl,\n            locale: locale,\n            weekNumberCalculation: weekNumberCalculation,\n            firstDay: firstDay,\n            weekLabel: weekLabel,\n            cmdFormatter: cmdFormatter\n        });\n    }\n    function buildTheme(calendarOptions) {\n        var themeClass = this.pluginSystem.hooks.themeClasses[calendarOptions.themeSystem] || StandardTheme;\n        return new themeClass(calendarOptions);\n    }\n    function buildDelayedRerender(wait) {\n        var func = this.tryRerender.bind(this);\n        if (wait != null) {\n            func = debounce(func, wait);\n        }\n        return func;\n    }\n    function buildEventUiBySource(eventSources) {\n        return mapHash(eventSources, function (eventSource) {\n            return eventSource.ui;\n        });\n    }\n    function buildEventUiBases(eventDefs, eventUiSingleBase, eventUiBySource) {\n        var eventUiBases = { '': eventUiSingleBase };\n        for (var defId in eventDefs) {\n            var def = eventDefs[defId];\n            if (def.sourceId && eventUiBySource[def.sourceId]) {\n                eventUiBases[defId] = eventUiBySource[def.sourceId];\n            }\n        }\n        return eventUiBases;\n    }\n\n    var View = /** @class */ (function (_super) {\n        __extends(View, _super);\n        function View(context, viewSpec, dateProfileGenerator, parentEl) {\n            var _this = _super.call(this, context, createElement('div', { className: 'fc-view fc-' + viewSpec.type + '-view' }), true // isView (HACK)\n            ) || this;\n            _this.renderDatesMem = memoizeRendering(_this.renderDatesWrap, _this.unrenderDatesWrap);\n            _this.renderBusinessHoursMem = memoizeRendering(_this.renderBusinessHours, _this.unrenderBusinessHours, [_this.renderDatesMem]);\n            _this.renderDateSelectionMem = memoizeRendering(_this.renderDateSelectionWrap, _this.unrenderDateSelectionWrap, [_this.renderDatesMem]);\n            _this.renderEventsMem = memoizeRendering(_this.renderEvents, _this.unrenderEvents, [_this.renderDatesMem]);\n            _this.renderEventSelectionMem = memoizeRendering(_this.renderEventSelectionWrap, _this.unrenderEventSelectionWrap, [_this.renderEventsMem]);\n            _this.renderEventDragMem = memoizeRendering(_this.renderEventDragWrap, _this.unrenderEventDragWrap, [_this.renderDatesMem]);\n            _this.renderEventResizeMem = memoizeRendering(_this.renderEventResizeWrap, _this.unrenderEventResizeWrap, [_this.renderDatesMem]);\n            _this.viewSpec = viewSpec;\n            _this.dateProfileGenerator = dateProfileGenerator;\n            _this.type = viewSpec.type;\n            _this.eventOrderSpecs = parseFieldSpecs(_this.opt('eventOrder'));\n            _this.nextDayThreshold = createDuration(_this.opt('nextDayThreshold'));\n            parentEl.appendChild(_this.el);\n            _this.initialize();\n            return _this;\n        }\n        View.prototype.initialize = function () {\n        };\n        Object.defineProperty(View.prototype, \"activeStart\", {\n            // Date Setting/Unsetting\n            // -----------------------------------------------------------------------------------------------------------------\n            get: function () {\n                return this.dateEnv.toDate(this.props.dateProfile.activeRange.start);\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(View.prototype, \"activeEnd\", {\n            get: function () {\n                return this.dateEnv.toDate(this.props.dateProfile.activeRange.end);\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(View.prototype, \"currentStart\", {\n            get: function () {\n                return this.dateEnv.toDate(this.props.dateProfile.currentRange.start);\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(View.prototype, \"currentEnd\", {\n            get: function () {\n                return this.dateEnv.toDate(this.props.dateProfile.currentRange.end);\n            },\n            enumerable: true,\n            configurable: true\n        });\n        // General Rendering\n        // -----------------------------------------------------------------------------------------------------------------\n        View.prototype.render = function (props) {\n            this.renderDatesMem(props.dateProfile);\n            this.renderBusinessHoursMem(props.businessHours);\n            this.renderDateSelectionMem(props.dateSelection);\n            this.renderEventsMem(props.eventStore);\n            this.renderEventSelectionMem(props.eventSelection);\n            this.renderEventDragMem(props.eventDrag);\n            this.renderEventResizeMem(props.eventResize);\n        };\n        View.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.renderDatesMem.unrender(); // should unrender everything else\n        };\n        // Sizing\n        // -----------------------------------------------------------------------------------------------------------------\n        View.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n            var calendar = this.calendar;\n            if (isResize || calendar.isViewUpdated || calendar.isDatesUpdated || calendar.isEventsUpdated) {\n                // sort of the catch-all sizing\n                // anything that might cause dimension changes\n                this.updateBaseSize(isResize, viewHeight, isAuto);\n            }\n        };\n        View.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n        };\n        // Date Rendering\n        // -----------------------------------------------------------------------------------------------------------------\n        View.prototype.renderDatesWrap = function (dateProfile) {\n            this.renderDates(dateProfile);\n            this.addScroll({\n                timeMs: createDuration(this.opt('scrollTime')).milliseconds\n            });\n            this.startNowIndicator(dateProfile); // shouldn't render yet because updateSize will be called soon\n        };\n        View.prototype.unrenderDatesWrap = function () {\n            this.stopNowIndicator();\n            this.unrenderDates();\n        };\n        View.prototype.renderDates = function (dateProfile) { };\n        View.prototype.unrenderDates = function () { };\n        // Business Hours\n        // -----------------------------------------------------------------------------------------------------------------\n        View.prototype.renderBusinessHours = function (businessHours) { };\n        View.prototype.unrenderBusinessHours = function () { };\n        // Date Selection\n        // -----------------------------------------------------------------------------------------------------------------\n        View.prototype.renderDateSelectionWrap = function (selection) {\n            if (selection) {\n                this.renderDateSelection(selection);\n            }\n        };\n        View.prototype.unrenderDateSelectionWrap = function (selection) {\n            if (selection) {\n                this.unrenderDateSelection(selection);\n            }\n        };\n        View.prototype.renderDateSelection = function (selection) { };\n        View.prototype.unrenderDateSelection = function (selection) { };\n        // Event Rendering\n        // -----------------------------------------------------------------------------------------------------------------\n        View.prototype.renderEvents = function (eventStore) { };\n        View.prototype.unrenderEvents = function () { };\n        // util for subclasses\n        View.prototype.sliceEvents = function (eventStore, allDay) {\n            var props = this.props;\n            return sliceEventStore(eventStore, props.eventUiBases, props.dateProfile.activeRange, allDay ? this.nextDayThreshold : null).fg;\n        };\n        // Event Selection\n        // -----------------------------------------------------------------------------------------------------------------\n        View.prototype.renderEventSelectionWrap = function (instanceId) {\n            if (instanceId) {\n                this.renderEventSelection(instanceId);\n            }\n        };\n        View.prototype.unrenderEventSelectionWrap = function (instanceId) {\n            if (instanceId) {\n                this.unrenderEventSelection(instanceId);\n            }\n        };\n        View.prototype.renderEventSelection = function (instanceId) { };\n        View.prototype.unrenderEventSelection = function (instanceId) { };\n        // Event Drag\n        // -----------------------------------------------------------------------------------------------------------------\n        View.prototype.renderEventDragWrap = function (state) {\n            if (state) {\n                this.renderEventDrag(state);\n            }\n        };\n        View.prototype.unrenderEventDragWrap = function (state) {\n            if (state) {\n                this.unrenderEventDrag(state);\n            }\n        };\n        View.prototype.renderEventDrag = function (state) { };\n        View.prototype.unrenderEventDrag = function (state) { };\n        // Event Resize\n        // -----------------------------------------------------------------------------------------------------------------\n        View.prototype.renderEventResizeWrap = function (state) {\n            if (state) {\n                this.renderEventResize(state);\n            }\n        };\n        View.prototype.unrenderEventResizeWrap = function (state) {\n            if (state) {\n                this.unrenderEventResize(state);\n            }\n        };\n        View.prototype.renderEventResize = function (state) { };\n        View.prototype.unrenderEventResize = function (state) { };\n        /* Now Indicator\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Immediately render the current time indicator and begins re-rendering it at an interval,\n        // which is defined by this.getNowIndicatorUnit().\n        // TODO: somehow do this for the current whole day's background too\n        View.prototype.startNowIndicator = function (dateProfile) {\n            var _this = this;\n            var dateEnv = this.dateEnv;\n            var unit;\n            var update;\n            var delay; // ms wait value\n            if (this.opt('nowIndicator')) {\n                unit = this.getNowIndicatorUnit(dateProfile);\n                if (unit) {\n                    update = this.updateNowIndicator.bind(this);\n                    this.initialNowDate = this.calendar.getNow();\n                    this.initialNowQueriedMs = new Date().valueOf();\n                    // wait until the beginning of the next interval\n                    delay = dateEnv.add(dateEnv.startOf(this.initialNowDate, unit), createDuration(1, unit)).valueOf() - this.initialNowDate.valueOf();\n                    // TODO: maybe always use setTimeout, waiting until start of next unit\n                    this.nowIndicatorTimeoutID = setTimeout(function () {\n                        _this.nowIndicatorTimeoutID = null;\n                        update();\n                        if (unit === 'second') {\n                            delay = 1000; // every second\n                        }\n                        else {\n                            delay = 1000 * 60; // otherwise, every minute\n                        }\n                        _this.nowIndicatorIntervalID = setInterval(update, delay); // update every interval\n                    }, delay);\n                }\n                // rendering will be initiated in updateSize\n            }\n        };\n        // rerenders the now indicator, computing the new current time from the amount of time that has passed\n        // since the initial getNow call.\n        View.prototype.updateNowIndicator = function () {\n            if (this.props.dateProfile && // a way to determine if dates were rendered yet\n                this.initialNowDate // activated before?\n            ) {\n                this.unrenderNowIndicator(); // won't unrender if unnecessary\n                this.renderNowIndicator(addMs(this.initialNowDate, new Date().valueOf() - this.initialNowQueriedMs));\n                this.isNowIndicatorRendered = true;\n            }\n        };\n        // Immediately unrenders the view's current time indicator and stops any re-rendering timers.\n        // Won't cause side effects if indicator isn't rendered.\n        View.prototype.stopNowIndicator = function () {\n            if (this.isNowIndicatorRendered) {\n                if (this.nowIndicatorTimeoutID) {\n                    clearTimeout(this.nowIndicatorTimeoutID);\n                    this.nowIndicatorTimeoutID = null;\n                }\n                if (this.nowIndicatorIntervalID) {\n                    clearInterval(this.nowIndicatorIntervalID);\n                    this.nowIndicatorIntervalID = null;\n                }\n                this.unrenderNowIndicator();\n                this.isNowIndicatorRendered = false;\n            }\n        };\n        View.prototype.getNowIndicatorUnit = function (dateProfile) {\n            // subclasses should implement\n        };\n        // Renders a current time indicator at the given datetime\n        View.prototype.renderNowIndicator = function (date) {\n            // SUBCLASSES MUST PASS TO CHILDREN!\n        };\n        // Undoes the rendering actions from renderNowIndicator\n        View.prototype.unrenderNowIndicator = function () {\n            // SUBCLASSES MUST PASS TO CHILDREN!\n        };\n        /* Scroller\n        ------------------------------------------------------------------------------------------------------------------*/\n        View.prototype.addScroll = function (scroll) {\n            var queuedScroll = this.queuedScroll || (this.queuedScroll = {});\n            __assign(queuedScroll, scroll);\n        };\n        View.prototype.popScroll = function (isResize) {\n            this.applyQueuedScroll(isResize);\n            this.queuedScroll = null;\n        };\n        View.prototype.applyQueuedScroll = function (isResize) {\n            this.applyScroll(this.queuedScroll || {}, isResize);\n        };\n        View.prototype.queryScroll = function () {\n            var scroll = {};\n            if (this.props.dateProfile) { // dates rendered yet?\n                __assign(scroll, this.queryDateScroll());\n            }\n            return scroll;\n        };\n        View.prototype.applyScroll = function (scroll, isResize) {\n            var timeMs = scroll.timeMs;\n            if (timeMs != null) {\n                delete scroll.timeMs;\n                if (this.props.dateProfile) { // dates rendered yet?\n                    __assign(scroll, this.computeDateScroll(timeMs));\n                }\n            }\n            if (this.props.dateProfile) { // dates rendered yet?\n                this.applyDateScroll(scroll);\n            }\n        };\n        View.prototype.computeDateScroll = function (timeMs) {\n            return {}; // subclasses must implement\n        };\n        View.prototype.queryDateScroll = function () {\n            return {}; // subclasses must implement\n        };\n        View.prototype.applyDateScroll = function (scroll) {\n            // subclasses must implement\n        };\n        // for API\n        View.prototype.scrollToTime = function (time) {\n            this.applyScroll({\n                timeMs: time.milliseconds\n            }, false);\n        };\n        return View;\n    }(DateComponent));\n    EmitterMixin.mixInto(View);\n    View.prototype.usesMinMaxTime = false;\n    View.prototype.dateProfileGeneratorClass = DateProfileGenerator;\n\n    var FgEventRenderer = /** @class */ (function () {\n        function FgEventRenderer(context) {\n            this.segs = [];\n            this.isSizeDirty = false;\n            this.context = context;\n        }\n        FgEventRenderer.prototype.renderSegs = function (segs, mirrorInfo) {\n            this.rangeUpdated(); // called too frequently :(\n            // render an `.el` on each seg\n            // returns a subset of the segs. segs that were actually rendered\n            segs = this.renderSegEls(segs, mirrorInfo);\n            this.segs = segs;\n            this.attachSegs(segs, mirrorInfo);\n            this.isSizeDirty = true;\n            this.context.view.triggerRenderedSegs(this.segs, Boolean(mirrorInfo));\n        };\n        FgEventRenderer.prototype.unrender = function (_segs, mirrorInfo) {\n            this.context.view.triggerWillRemoveSegs(this.segs, Boolean(mirrorInfo));\n            this.detachSegs(this.segs);\n            this.segs = [];\n        };\n        // Updates values that rely on options and also relate to range\n        FgEventRenderer.prototype.rangeUpdated = function () {\n            var options = this.context.options;\n            var displayEventTime;\n            var displayEventEnd;\n            this.eventTimeFormat = createFormatter(options.eventTimeFormat || this.computeEventTimeFormat(), options.defaultRangeSeparator);\n            displayEventTime = options.displayEventTime;\n            if (displayEventTime == null) {\n                displayEventTime = this.computeDisplayEventTime(); // might be based off of range\n            }\n            displayEventEnd = options.displayEventEnd;\n            if (displayEventEnd == null) {\n                displayEventEnd = this.computeDisplayEventEnd(); // might be based off of range\n            }\n            this.displayEventTime = displayEventTime;\n            this.displayEventEnd = displayEventEnd;\n        };\n        // Renders and assigns an `el` property for each foreground event segment.\n        // Only returns segments that successfully rendered.\n        FgEventRenderer.prototype.renderSegEls = function (segs, mirrorInfo) {\n            var html = '';\n            var i;\n            if (segs.length) { // don't build an empty html string\n                // build a large concatenation of event segment HTML\n                for (i = 0; i < segs.length; i++) {\n                    html += this.renderSegHtml(segs[i], mirrorInfo);\n                }\n                // Grab individual elements from the combined HTML string. Use each as the default rendering.\n                // Then, compute the 'el' for each segment. An el might be null if the eventRender callback returned false.\n                htmlToElements(html).forEach(function (el, i) {\n                    var seg = segs[i];\n                    if (el) {\n                        seg.el = el;\n                    }\n                });\n                segs = filterSegsViaEls(this.context.view, segs, Boolean(mirrorInfo));\n            }\n            return segs;\n        };\n        // Generic utility for generating the HTML classNames for an event segment's element\n        FgEventRenderer.prototype.getSegClasses = function (seg, isDraggable, isResizable, mirrorInfo) {\n            var classes = [\n                'fc-event',\n                seg.isStart ? 'fc-start' : 'fc-not-start',\n                seg.isEnd ? 'fc-end' : 'fc-not-end'\n            ].concat(seg.eventRange.ui.classNames);\n            if (isDraggable) {\n                classes.push('fc-draggable');\n            }\n            if (isResizable) {\n                classes.push('fc-resizable');\n            }\n            if (mirrorInfo) {\n                classes.push('fc-mirror');\n                if (mirrorInfo.isDragging) {\n                    classes.push('fc-dragging');\n                }\n                if (mirrorInfo.isResizing) {\n                    classes.push('fc-resizing');\n                }\n            }\n            return classes;\n        };\n        // Compute the text that should be displayed on an event's element.\n        // `range` can be the Event object itself, or something range-like, with at least a `start`.\n        // If event times are disabled, or the event has no time, will return a blank string.\n        // If not specified, formatter will default to the eventTimeFormat setting,\n        // and displayEnd will default to the displayEventEnd setting.\n        FgEventRenderer.prototype.getTimeText = function (eventRange, formatter, displayEnd) {\n            var def = eventRange.def, instance = eventRange.instance;\n            return this._getTimeText(instance.range.start, def.hasEnd ? instance.range.end : null, def.allDay, formatter, displayEnd, instance.forcedStartTzo, instance.forcedEndTzo);\n        };\n        FgEventRenderer.prototype._getTimeText = function (start, end, allDay, formatter, displayEnd, forcedStartTzo, forcedEndTzo) {\n            var dateEnv = this.context.dateEnv;\n            if (formatter == null) {\n                formatter = this.eventTimeFormat;\n            }\n            if (displayEnd == null) {\n                displayEnd = this.displayEventEnd;\n            }\n            if (this.displayEventTime && !allDay) {\n                if (displayEnd && end) {\n                    return dateEnv.formatRange(start, end, formatter, {\n                        forcedStartTzo: forcedStartTzo,\n                        forcedEndTzo: forcedEndTzo\n                    });\n                }\n                else {\n                    return dateEnv.format(start, formatter, {\n                        forcedTzo: forcedStartTzo\n                    });\n                }\n            }\n            return '';\n        };\n        FgEventRenderer.prototype.computeEventTimeFormat = function () {\n            return {\n                hour: 'numeric',\n                minute: '2-digit',\n                omitZeroMinute: true\n            };\n        };\n        FgEventRenderer.prototype.computeDisplayEventTime = function () {\n            return true;\n        };\n        FgEventRenderer.prototype.computeDisplayEventEnd = function () {\n            return true;\n        };\n        // Utility for generating event skin-related CSS properties\n        FgEventRenderer.prototype.getSkinCss = function (ui) {\n            return {\n                'background-color': ui.backgroundColor,\n                'border-color': ui.borderColor,\n                color: ui.textColor\n            };\n        };\n        FgEventRenderer.prototype.sortEventSegs = function (segs) {\n            var specs = this.context.view.eventOrderSpecs;\n            var objs = segs.map(buildSegCompareObj);\n            objs.sort(function (obj0, obj1) {\n                return compareByFieldSpecs(obj0, obj1, specs);\n            });\n            return objs.map(function (c) {\n                return c._seg;\n            });\n        };\n        FgEventRenderer.prototype.computeSizes = function (force) {\n            if (force || this.isSizeDirty) {\n                this.computeSegSizes(this.segs);\n            }\n        };\n        FgEventRenderer.prototype.assignSizes = function (force) {\n            if (force || this.isSizeDirty) {\n                this.assignSegSizes(this.segs);\n                this.isSizeDirty = false;\n            }\n        };\n        FgEventRenderer.prototype.computeSegSizes = function (segs) {\n        };\n        FgEventRenderer.prototype.assignSegSizes = function (segs) {\n        };\n        // Manipulation on rendered segs\n        FgEventRenderer.prototype.hideByHash = function (hash) {\n            if (hash) {\n                for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                    var seg = _a[_i];\n                    if (hash[seg.eventRange.instance.instanceId]) {\n                        seg.el.style.visibility = 'hidden';\n                    }\n                }\n            }\n        };\n        FgEventRenderer.prototype.showByHash = function (hash) {\n            if (hash) {\n                for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                    var seg = _a[_i];\n                    if (hash[seg.eventRange.instance.instanceId]) {\n                        seg.el.style.visibility = '';\n                    }\n                }\n            }\n        };\n        FgEventRenderer.prototype.selectByInstanceId = function (instanceId) {\n            if (instanceId) {\n                for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                    var seg = _a[_i];\n                    var eventInstance = seg.eventRange.instance;\n                    if (eventInstance && eventInstance.instanceId === instanceId &&\n                        seg.el // necessary?\n                    ) {\n                        seg.el.classList.add('fc-selected');\n                    }\n                }\n            }\n        };\n        FgEventRenderer.prototype.unselectByInstanceId = function (instanceId) {\n            if (instanceId) {\n                for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                    var seg = _a[_i];\n                    if (seg.el) { // necessary?\n                        seg.el.classList.remove('fc-selected');\n                    }\n                }\n            }\n        };\n        return FgEventRenderer;\n    }());\n    // returns a object with all primitive props that can be compared\n    function buildSegCompareObj(seg) {\n        var eventDef = seg.eventRange.def;\n        var range = seg.eventRange.instance.range;\n        var start = range.start ? range.start.valueOf() : 0; // TODO: better support for open-range events\n        var end = range.end ? range.end.valueOf() : 0; // \"\n        return __assign({}, eventDef.extendedProps, eventDef, { id: eventDef.publicId, start: start,\n            end: end, duration: end - start, allDay: Number(eventDef.allDay), _seg: seg // for later retrieval\n         });\n    }\n\n    var FillRenderer = /** @class */ (function () {\n        function FillRenderer(context) {\n            this.fillSegTag = 'div';\n            this.dirtySizeFlags = {};\n            this.context = context;\n            this.containerElsByType = {};\n            this.segsByType = {};\n        }\n        FillRenderer.prototype.getSegsByType = function (type) {\n            return this.segsByType[type] || [];\n        };\n        FillRenderer.prototype.renderSegs = function (type, segs) {\n            var _a;\n            var renderedSegs = this.renderSegEls(type, segs); // assignes `.el` to each seg. returns successfully rendered segs\n            var containerEls = this.attachSegs(type, renderedSegs);\n            if (containerEls) {\n                (_a = (this.containerElsByType[type] || (this.containerElsByType[type] = []))).push.apply(_a, containerEls);\n            }\n            this.segsByType[type] = renderedSegs;\n            if (type === 'bgEvent') {\n                this.context.view.triggerRenderedSegs(renderedSegs, false); // isMirror=false\n            }\n            this.dirtySizeFlags[type] = true;\n        };\n        // Unrenders a specific type of fill that is currently rendered on the grid\n        FillRenderer.prototype.unrender = function (type) {\n            var segs = this.segsByType[type];\n            if (segs) {\n                if (type === 'bgEvent') {\n                    this.context.view.triggerWillRemoveSegs(segs, false); // isMirror=false\n                }\n                this.detachSegs(type, segs);\n            }\n        };\n        // Renders and assigns an `el` property for each fill segment. Generic enough to work with different types.\n        // Only returns segments that successfully rendered.\n        FillRenderer.prototype.renderSegEls = function (type, segs) {\n            var _this = this;\n            var html = '';\n            var i;\n            if (segs.length) {\n                // build a large concatenation of segment HTML\n                for (i = 0; i < segs.length; i++) {\n                    html += this.renderSegHtml(type, segs[i]);\n                }\n                // Grab individual elements from the combined HTML string. Use each as the default rendering.\n                // Then, compute the 'el' for each segment.\n                htmlToElements(html).forEach(function (el, i) {\n                    var seg = segs[i];\n                    if (el) {\n                        seg.el = el;\n                    }\n                });\n                if (type === 'bgEvent') {\n                    segs = filterSegsViaEls(this.context.view, segs, false // isMirror. background events can never be mirror elements\n                    );\n                }\n                // correct element type? (would be bad if a non-TD were inserted into a table for example)\n                segs = segs.filter(function (seg) {\n                    return elementMatches(seg.el, _this.fillSegTag);\n                });\n            }\n            return segs;\n        };\n        // Builds the HTML needed for one fill segment. Generic enough to work with different types.\n        FillRenderer.prototype.renderSegHtml = function (type, seg) {\n            var css = null;\n            var classNames = [];\n            if (type !== 'highlight' && type !== 'businessHours') {\n                css = {\n                    'background-color': seg.eventRange.ui.backgroundColor\n                };\n            }\n            if (type !== 'highlight') {\n                classNames = classNames.concat(seg.eventRange.ui.classNames);\n            }\n            if (type === 'businessHours') {\n                classNames.push('fc-bgevent');\n            }\n            else {\n                classNames.push('fc-' + type.toLowerCase());\n            }\n            return '<' + this.fillSegTag +\n                (classNames.length ? ' class=\"' + classNames.join(' ') + '\"' : '') +\n                (css ? ' style=\"' + cssToStr(css) + '\"' : '') +\n                '></' + this.fillSegTag + '>';\n        };\n        FillRenderer.prototype.detachSegs = function (type, segs) {\n            var containerEls = this.containerElsByType[type];\n            if (containerEls) {\n                containerEls.forEach(removeElement);\n                delete this.containerElsByType[type];\n            }\n        };\n        FillRenderer.prototype.computeSizes = function (force) {\n            for (var type in this.segsByType) {\n                if (force || this.dirtySizeFlags[type]) {\n                    this.computeSegSizes(this.segsByType[type]);\n                }\n            }\n        };\n        FillRenderer.prototype.assignSizes = function (force) {\n            for (var type in this.segsByType) {\n                if (force || this.dirtySizeFlags[type]) {\n                    this.assignSegSizes(this.segsByType[type]);\n                }\n            }\n            this.dirtySizeFlags = {};\n        };\n        FillRenderer.prototype.computeSegSizes = function (segs) {\n        };\n        FillRenderer.prototype.assignSegSizes = function (segs) {\n        };\n        return FillRenderer;\n    }());\n\n    var NamedTimeZoneImpl = /** @class */ (function () {\n        function NamedTimeZoneImpl(timeZoneName) {\n            this.timeZoneName = timeZoneName;\n        }\n        return NamedTimeZoneImpl;\n    }());\n\n    /*\n    An abstraction for a dragging interaction originating on an event.\n    Does higher-level things than PointerDragger, such as possibly:\n    - a \"mirror\" that moves with the pointer\n    - a minimum number of pixels or other criteria for a true drag to begin\n\n    subclasses must emit:\n    - pointerdown\n    - dragstart\n    - dragmove\n    - pointerup\n    - dragend\n    */\n    var ElementDragging = /** @class */ (function () {\n        function ElementDragging(el) {\n            this.emitter = new EmitterMixin();\n        }\n        ElementDragging.prototype.destroy = function () {\n        };\n        ElementDragging.prototype.setMirrorIsVisible = function (bool) {\n            // optional if subclass doesn't want to support a mirror\n        };\n        ElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n            // optional if subclass doesn't want to support a mirror\n        };\n        ElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n            // optional\n        };\n        return ElementDragging;\n    }());\n\n    function formatDate(dateInput, settings) {\n        if (settings === void 0) { settings = {}; }\n        var dateEnv = buildDateEnv$1(settings);\n        var formatter = createFormatter(settings);\n        var dateMeta = dateEnv.createMarkerMeta(dateInput);\n        if (!dateMeta) { // TODO: warning?\n            return '';\n        }\n        return dateEnv.format(dateMeta.marker, formatter, {\n            forcedTzo: dateMeta.forcedTzo\n        });\n    }\n    function formatRange(startInput, endInput, settings // mixture of env and formatter settings\n    ) {\n        var dateEnv = buildDateEnv$1(typeof settings === 'object' && settings ? settings : {}); // pass in if non-null object\n        var formatter = createFormatter(settings, globalDefaults.defaultRangeSeparator);\n        var startMeta = dateEnv.createMarkerMeta(startInput);\n        var endMeta = dateEnv.createMarkerMeta(endInput);\n        if (!startMeta || !endMeta) { // TODO: warning?\n            return '';\n        }\n        return dateEnv.formatRange(startMeta.marker, endMeta.marker, formatter, {\n            forcedStartTzo: startMeta.forcedTzo,\n            forcedEndTzo: endMeta.forcedTzo,\n            isEndExclusive: settings.isEndExclusive\n        });\n    }\n    // TODO: more DRY and optimized\n    function buildDateEnv$1(settings) {\n        var locale = buildLocale(settings.locale || 'en', parseRawLocales([]).map); // TODO: don't hardcode 'en' everywhere\n        // ensure required settings\n        settings = __assign({ timeZone: globalDefaults.timeZone, calendarSystem: 'gregory' }, settings, { locale: locale });\n        return new DateEnv(settings);\n    }\n\n    var DRAG_META_PROPS = {\n        startTime: createDuration,\n        duration: createDuration,\n        create: Boolean,\n        sourceId: String\n    };\n    var DRAG_META_DEFAULTS = {\n        create: true\n    };\n    function parseDragMeta(raw) {\n        var leftoverProps = {};\n        var refined = refineProps(raw, DRAG_META_PROPS, DRAG_META_DEFAULTS, leftoverProps);\n        refined.leftoverProps = leftoverProps;\n        return refined;\n    }\n\n    // Computes a default column header formatting string if `colFormat` is not explicitly defined\n    function computeFallbackHeaderFormat(datesRepDistinctDays, dayCnt) {\n        // if more than one week row, or if there are a lot of columns with not much space,\n        // put just the day numbers will be in each cell\n        if (!datesRepDistinctDays || dayCnt > 10) {\n            return { weekday: 'short' }; // \"Sat\"\n        }\n        else if (dayCnt > 1) {\n            return { weekday: 'short', month: 'numeric', day: 'numeric', omitCommas: true }; // \"Sat 11/12\"\n        }\n        else {\n            return { weekday: 'long' }; // \"Saturday\"\n        }\n    }\n    function renderDateCell(dateMarker, dateProfile, datesRepDistinctDays, colCnt, colHeadFormat, context, colspan, otherAttrs) {\n        var view = context.view, dateEnv = context.dateEnv, theme = context.theme, options = context.options;\n        var isDateValid = rangeContainsMarker(dateProfile.activeRange, dateMarker); // TODO: called too frequently. cache somehow.\n        var classNames = [\n            'fc-day-header',\n            theme.getClass('widgetHeader')\n        ];\n        var innerHtml;\n        if (typeof options.columnHeaderHtml === 'function') {\n            innerHtml = options.columnHeaderHtml(dateEnv.toDate(dateMarker));\n        }\n        else if (typeof options.columnHeaderText === 'function') {\n            innerHtml = htmlEscape(options.columnHeaderText(dateEnv.toDate(dateMarker)));\n        }\n        else {\n            innerHtml = htmlEscape(dateEnv.format(dateMarker, colHeadFormat));\n        }\n        // if only one row of days, the classNames on the header can represent the specific days beneath\n        if (datesRepDistinctDays) {\n            classNames = classNames.concat(\n            // includes the day-of-week class\n            // noThemeHighlight=true (don't highlight the header)\n            getDayClasses(dateMarker, dateProfile, context, true));\n        }\n        else {\n            classNames.push('fc-' + DAY_IDS[dateMarker.getUTCDay()]); // only add the day-of-week class\n        }\n        return '' +\n            '<th class=\"' + classNames.join(' ') + '\"' +\n            ((isDateValid && datesRepDistinctDays) ?\n                ' data-date=\"' + dateEnv.formatIso(dateMarker, { omitTime: true }) + '\"' :\n                '') +\n            (colspan > 1 ?\n                ' colspan=\"' + colspan + '\"' :\n                '') +\n            (otherAttrs ?\n                ' ' + otherAttrs :\n                '') +\n            '>' +\n            (isDateValid ?\n                // don't make a link if the heading could represent multiple days, or if there's only one day (forceOff)\n                buildGotoAnchorHtml(view, { date: dateMarker, forceOff: !datesRepDistinctDays || colCnt === 1 }, innerHtml) :\n                // if not valid, display text, but no link\n                innerHtml) +\n            '</th>';\n    }\n\n    var DayHeader = /** @class */ (function (_super) {\n        __extends(DayHeader, _super);\n        function DayHeader(context, parentEl) {\n            var _this = _super.call(this, context) || this;\n            parentEl.innerHTML = ''; // because might be nbsp\n            parentEl.appendChild(_this.el = htmlToElement('<div class=\"fc-row ' + _this.theme.getClass('headerRow') + '\">' +\n                '<table class=\"' + _this.theme.getClass('tableGrid') + '\">' +\n                '<thead></thead>' +\n                '</table>' +\n                '</div>'));\n            _this.thead = _this.el.querySelector('thead');\n            return _this;\n        }\n        DayHeader.prototype.destroy = function () {\n            removeElement(this.el);\n        };\n        DayHeader.prototype.render = function (props) {\n            var dates = props.dates, datesRepDistinctDays = props.datesRepDistinctDays;\n            var parts = [];\n            if (props.renderIntroHtml) {\n                parts.push(props.renderIntroHtml());\n            }\n            var colHeadFormat = createFormatter(this.opt('columnHeaderFormat') ||\n                computeFallbackHeaderFormat(datesRepDistinctDays, dates.length));\n            for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n                var date = dates_1[_i];\n                parts.push(renderDateCell(date, props.dateProfile, datesRepDistinctDays, dates.length, colHeadFormat, this.context));\n            }\n            if (this.isRtl) {\n                parts.reverse();\n            }\n            this.thead.innerHTML = '<tr>' + parts.join('') + '</tr>';\n        };\n        return DayHeader;\n    }(Component));\n\n    var DaySeries = /** @class */ (function () {\n        function DaySeries(range, dateProfileGenerator) {\n            var date = range.start;\n            var end = range.end;\n            var indices = [];\n            var dates = [];\n            var dayIndex = -1;\n            while (date < end) { // loop each day from start to end\n                if (dateProfileGenerator.isHiddenDay(date)) {\n                    indices.push(dayIndex + 0.5); // mark that it's between indices\n                }\n                else {\n                    dayIndex++;\n                    indices.push(dayIndex);\n                    dates.push(date);\n                }\n                date = addDays(date, 1);\n            }\n            this.dates = dates;\n            this.indices = indices;\n            this.cnt = dates.length;\n        }\n        DaySeries.prototype.sliceRange = function (range) {\n            var firstIndex = this.getDateDayIndex(range.start); // inclusive first index\n            var lastIndex = this.getDateDayIndex(addDays(range.end, -1)); // inclusive last index\n            var clippedFirstIndex = Math.max(0, firstIndex);\n            var clippedLastIndex = Math.min(this.cnt - 1, lastIndex);\n            // deal with in-between indices\n            clippedFirstIndex = Math.ceil(clippedFirstIndex); // in-between starts round to next cell\n            clippedLastIndex = Math.floor(clippedLastIndex); // in-between ends round to prev cell\n            if (clippedFirstIndex <= clippedLastIndex) {\n                return {\n                    firstIndex: clippedFirstIndex,\n                    lastIndex: clippedLastIndex,\n                    isStart: firstIndex === clippedFirstIndex,\n                    isEnd: lastIndex === clippedLastIndex\n                };\n            }\n            else {\n                return null;\n            }\n        };\n        // Given a date, returns its chronolocial cell-index from the first cell of the grid.\n        // If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\n        // If before the first offset, returns a negative number.\n        // If after the last offset, returns an offset past the last cell offset.\n        // Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\n        DaySeries.prototype.getDateDayIndex = function (date) {\n            var indices = this.indices;\n            var dayOffset = Math.floor(diffDays(this.dates[0], date));\n            if (dayOffset < 0) {\n                return indices[0] - 1;\n            }\n            else if (dayOffset >= indices.length) {\n                return indices[indices.length - 1] + 1;\n            }\n            else {\n                return indices[dayOffset];\n            }\n        };\n        return DaySeries;\n    }());\n\n    var DayTable = /** @class */ (function () {\n        function DayTable(daySeries, breakOnWeeks) {\n            var dates = daySeries.dates;\n            var daysPerRow;\n            var firstDay;\n            var rowCnt;\n            if (breakOnWeeks) {\n                // count columns until the day-of-week repeats\n                firstDay = dates[0].getUTCDay();\n                for (daysPerRow = 1; daysPerRow < dates.length; daysPerRow++) {\n                    if (dates[daysPerRow].getUTCDay() === firstDay) {\n                        break;\n                    }\n                }\n                rowCnt = Math.ceil(dates.length / daysPerRow);\n            }\n            else {\n                rowCnt = 1;\n                daysPerRow = dates.length;\n            }\n            this.rowCnt = rowCnt;\n            this.colCnt = daysPerRow;\n            this.daySeries = daySeries;\n            this.cells = this.buildCells();\n            this.headerDates = this.buildHeaderDates();\n        }\n        DayTable.prototype.buildCells = function () {\n            var rows = [];\n            for (var row = 0; row < this.rowCnt; row++) {\n                var cells = [];\n                for (var col = 0; col < this.colCnt; col++) {\n                    cells.push(this.buildCell(row, col));\n                }\n                rows.push(cells);\n            }\n            return rows;\n        };\n        DayTable.prototype.buildCell = function (row, col) {\n            return {\n                date: this.daySeries.dates[row * this.colCnt + col]\n            };\n        };\n        DayTable.prototype.buildHeaderDates = function () {\n            var dates = [];\n            for (var col = 0; col < this.colCnt; col++) {\n                dates.push(this.cells[0][col].date);\n            }\n            return dates;\n        };\n        DayTable.prototype.sliceRange = function (range) {\n            var colCnt = this.colCnt;\n            var seriesSeg = this.daySeries.sliceRange(range);\n            var segs = [];\n            if (seriesSeg) {\n                var firstIndex = seriesSeg.firstIndex, lastIndex = seriesSeg.lastIndex;\n                var index = firstIndex;\n                while (index <= lastIndex) {\n                    var row = Math.floor(index / colCnt);\n                    var nextIndex = Math.min((row + 1) * colCnt, lastIndex + 1);\n                    segs.push({\n                        row: row,\n                        firstCol: index % colCnt,\n                        lastCol: (nextIndex - 1) % colCnt,\n                        isStart: seriesSeg.isStart && index === firstIndex,\n                        isEnd: seriesSeg.isEnd && (nextIndex - 1) === lastIndex\n                    });\n                    index = nextIndex;\n                }\n            }\n            return segs;\n        };\n        return DayTable;\n    }());\n\n    var Slicer = /** @class */ (function () {\n        function Slicer() {\n            this.sliceBusinessHours = memoize(this._sliceBusinessHours);\n            this.sliceDateSelection = memoize(this._sliceDateSpan);\n            this.sliceEventStore = memoize(this._sliceEventStore);\n            this.sliceEventDrag = memoize(this._sliceInteraction);\n            this.sliceEventResize = memoize(this._sliceInteraction);\n        }\n        Slicer.prototype.sliceProps = function (props, dateProfile, nextDayThreshold, component) {\n            var extraArgs = [];\n            for (var _i = 4; _i < arguments.length; _i++) {\n                extraArgs[_i - 4] = arguments[_i];\n            }\n            var eventUiBases = props.eventUiBases;\n            var eventSegs = this.sliceEventStore.apply(this, [props.eventStore, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs));\n            return {\n                dateSelectionSegs: this.sliceDateSelection.apply(this, [props.dateSelection, eventUiBases, component].concat(extraArgs)),\n                businessHourSegs: this.sliceBusinessHours.apply(this, [props.businessHours, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n                fgEventSegs: eventSegs.fg,\n                bgEventSegs: eventSegs.bg,\n                eventDrag: this.sliceEventDrag.apply(this, [props.eventDrag, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n                eventResize: this.sliceEventResize.apply(this, [props.eventResize, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n                eventSelection: props.eventSelection\n            }; // TODO: give interactionSegs?\n        };\n        Slicer.prototype.sliceNowDate = function (// does not memoize\n        date, component) {\n            var extraArgs = [];\n            for (var _i = 2; _i < arguments.length; _i++) {\n                extraArgs[_i - 2] = arguments[_i];\n            }\n            return this._sliceDateSpan.apply(this, [{ range: { start: date, end: addMs(date, 1) }, allDay: false },\n                {},\n                component].concat(extraArgs));\n        };\n        Slicer.prototype._sliceBusinessHours = function (businessHours, dateProfile, nextDayThreshold, component) {\n            var extraArgs = [];\n            for (var _i = 4; _i < arguments.length; _i++) {\n                extraArgs[_i - 4] = arguments[_i];\n            }\n            if (!businessHours) {\n                return [];\n            }\n            return this._sliceEventStore.apply(this, [expandRecurring(businessHours, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), component.calendar),\n                {},\n                dateProfile,\n                nextDayThreshold,\n                component].concat(extraArgs)).bg;\n        };\n        Slicer.prototype._sliceEventStore = function (eventStore, eventUiBases, dateProfile, nextDayThreshold, component) {\n            var extraArgs = [];\n            for (var _i = 5; _i < arguments.length; _i++) {\n                extraArgs[_i - 5] = arguments[_i];\n            }\n            if (eventStore) {\n                var rangeRes = sliceEventStore(eventStore, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n                return {\n                    bg: this.sliceEventRanges(rangeRes.bg, component, extraArgs),\n                    fg: this.sliceEventRanges(rangeRes.fg, component, extraArgs)\n                };\n            }\n            else {\n                return { bg: [], fg: [] };\n            }\n        };\n        Slicer.prototype._sliceInteraction = function (interaction, eventUiBases, dateProfile, nextDayThreshold, component) {\n            var extraArgs = [];\n            for (var _i = 5; _i < arguments.length; _i++) {\n                extraArgs[_i - 5] = arguments[_i];\n            }\n            if (!interaction) {\n                return null;\n            }\n            var rangeRes = sliceEventStore(interaction.mutatedEvents, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n            return {\n                segs: this.sliceEventRanges(rangeRes.fg, component, extraArgs),\n                affectedInstances: interaction.affectedEvents.instances,\n                isEvent: interaction.isEvent,\n                sourceSeg: interaction.origSeg\n            };\n        };\n        Slicer.prototype._sliceDateSpan = function (dateSpan, eventUiBases, component) {\n            var extraArgs = [];\n            for (var _i = 3; _i < arguments.length; _i++) {\n                extraArgs[_i - 3] = arguments[_i];\n            }\n            if (!dateSpan) {\n                return [];\n            }\n            var eventRange = fabricateEventRange(dateSpan, eventUiBases, component.calendar);\n            var segs = this.sliceRange.apply(this, [dateSpan.range].concat(extraArgs));\n            for (var _a = 0, segs_1 = segs; _a < segs_1.length; _a++) {\n                var seg = segs_1[_a];\n                seg.component = component;\n                seg.eventRange = eventRange;\n            }\n            return segs;\n        };\n        /*\n        \"complete\" seg means it has component and eventRange\n        */\n        Slicer.prototype.sliceEventRanges = function (eventRanges, component, // TODO: kill\n        extraArgs) {\n            var segs = [];\n            for (var _i = 0, eventRanges_1 = eventRanges; _i < eventRanges_1.length; _i++) {\n                var eventRange = eventRanges_1[_i];\n                segs.push.apply(segs, this.sliceEventRange(eventRange, component, extraArgs));\n            }\n            return segs;\n        };\n        /*\n        \"complete\" seg means it has component and eventRange\n        */\n        Slicer.prototype.sliceEventRange = function (eventRange, component, // TODO: kill\n        extraArgs) {\n            var segs = this.sliceRange.apply(this, [eventRange.range].concat(extraArgs));\n            for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n                var seg = segs_2[_i];\n                seg.component = component;\n                seg.eventRange = eventRange;\n                seg.isStart = eventRange.isStart && seg.isStart;\n                seg.isEnd = eventRange.isEnd && seg.isEnd;\n            }\n            return segs;\n        };\n        return Slicer;\n    }());\n    /*\n    for incorporating minTime/maxTime if appropriate\n    TODO: should be part of DateProfile!\n    TimelineDateProfile already does this btw\n    */\n    function computeActiveRange(dateProfile, isComponentAllDay) {\n        var range = dateProfile.activeRange;\n        if (isComponentAllDay) {\n            return range;\n        }\n        return {\n            start: addMs(range.start, dateProfile.minTime.milliseconds),\n            end: addMs(range.end, dateProfile.maxTime.milliseconds - 864e5) // 864e5 = ms in a day\n        };\n    }\n\n    // exports\n    // --------------------------------------------------------------------------------------------------\n    var version = '4.1.0';\n\n    exports.Calendar = Calendar;\n    exports.Component = Component;\n    exports.DateComponent = DateComponent;\n    exports.DateEnv = DateEnv;\n    exports.DateProfileGenerator = DateProfileGenerator;\n    exports.DayHeader = DayHeader;\n    exports.DaySeries = DaySeries;\n    exports.DayTable = DayTable;\n    exports.ElementDragging = ElementDragging;\n    exports.ElementScrollController = ElementScrollController;\n    exports.EmitterMixin = EmitterMixin;\n    exports.EventApi = EventApi;\n    exports.FgEventRenderer = FgEventRenderer;\n    exports.FillRenderer = FillRenderer;\n    exports.Interaction = Interaction;\n    exports.Mixin = Mixin;\n    exports.NamedTimeZoneImpl = NamedTimeZoneImpl;\n    exports.PositionCache = PositionCache;\n    exports.ScrollComponent = ScrollComponent;\n    exports.ScrollController = ScrollController;\n    exports.Slicer = Slicer;\n    exports.Splitter = Splitter;\n    exports.Theme = Theme;\n    exports.View = View;\n    exports.WindowScrollController = WindowScrollController;\n    exports.addDays = addDays;\n    exports.addDurations = addDurations;\n    exports.addMs = addMs;\n    exports.addWeeks = addWeeks;\n    exports.allowContextMenu = allowContextMenu;\n    exports.allowSelection = allowSelection;\n    exports.appendToElement = appendToElement;\n    exports.applyAll = applyAll;\n    exports.applyMutationToEventStore = applyMutationToEventStore;\n    exports.applyStyle = applyStyle;\n    exports.applyStyleProp = applyStyleProp;\n    exports.asRoughMinutes = asRoughMinutes;\n    exports.asRoughMs = asRoughMs;\n    exports.asRoughSeconds = asRoughSeconds;\n    exports.buildGotoAnchorHtml = buildGotoAnchorHtml;\n    exports.buildSegCompareObj = buildSegCompareObj;\n    exports.capitaliseFirstLetter = capitaliseFirstLetter;\n    exports.combineEventUis = combineEventUis;\n    exports.compareByFieldSpec = compareByFieldSpec;\n    exports.compareByFieldSpecs = compareByFieldSpecs;\n    exports.compareNumbers = compareNumbers;\n    exports.compensateScroll = compensateScroll;\n    exports.computeClippingRect = computeClippingRect;\n    exports.computeEdges = computeEdges;\n    exports.computeFallbackHeaderFormat = computeFallbackHeaderFormat;\n    exports.computeHeightAndMargins = computeHeightAndMargins;\n    exports.computeInnerRect = computeInnerRect;\n    exports.computeRect = computeRect;\n    exports.computeVisibleDayRange = computeVisibleDayRange;\n    exports.config = config;\n    exports.constrainPoint = constrainPoint;\n    exports.createDuration = createDuration;\n    exports.createElement = createElement;\n    exports.createEmptyEventStore = createEmptyEventStore;\n    exports.createEventInstance = createEventInstance;\n    exports.createFormatter = createFormatter;\n    exports.createPlugin = createPlugin;\n    exports.cssToStr = cssToStr;\n    exports.debounce = debounce;\n    exports.diffDates = diffDates;\n    exports.diffDayAndTime = diffDayAndTime;\n    exports.diffDays = diffDays;\n    exports.diffPoints = diffPoints;\n    exports.diffWeeks = diffWeeks;\n    exports.diffWholeDays = diffWholeDays;\n    exports.diffWholeWeeks = diffWholeWeeks;\n    exports.disableCursor = disableCursor;\n    exports.distributeHeight = distributeHeight;\n    exports.elementClosest = elementClosest;\n    exports.elementMatches = elementMatches;\n    exports.enableCursor = enableCursor;\n    exports.eventTupleToStore = eventTupleToStore;\n    exports.filterEventStoreDefs = filterEventStoreDefs;\n    exports.filterHash = filterHash;\n    exports.findChildren = findChildren;\n    exports.findElements = findElements;\n    exports.flexibleCompare = flexibleCompare;\n    exports.forceClassName = forceClassName;\n    exports.formatDate = formatDate;\n    exports.formatIsoTimeString = formatIsoTimeString;\n    exports.formatRange = formatRange;\n    exports.freezeRaw = freezeRaw;\n    exports.getAllDayHtml = getAllDayHtml;\n    exports.getClippingParents = getClippingParents;\n    exports.getDayClasses = getDayClasses;\n    exports.getElSeg = getElSeg;\n    exports.getRectCenter = getRectCenter;\n    exports.getRelevantEvents = getRelevantEvents;\n    exports.globalDefaults = globalDefaults;\n    exports.greatestDurationDenominator = greatestDurationDenominator;\n    exports.hasBgRendering = hasBgRendering;\n    exports.htmlEscape = htmlEscape;\n    exports.htmlToElement = htmlToElement;\n    exports.insertAfterElement = insertAfterElement;\n    exports.interactionSettingsStore = interactionSettingsStore;\n    exports.interactionSettingsToStore = interactionSettingsToStore;\n    exports.intersectRanges = intersectRanges;\n    exports.intersectRects = intersectRects;\n    exports.isArraysEqual = isArraysEqual;\n    exports.isDateSpansEqual = isDateSpansEqual;\n    exports.isInt = isInt;\n    exports.isInteractionValid = isInteractionValid;\n    exports.isMultiDayRange = isMultiDayRange;\n    exports.isObjectsSimilar = isObjectsSimilar;\n    exports.isPropsValid = isPropsValid;\n    exports.isSingleDay = isSingleDay;\n    exports.isValidDate = isValidDate;\n    exports.isValuesSimilar = isValuesSimilar;\n    exports.listenBySelector = listenBySelector;\n    exports.mapHash = mapHash;\n    exports.matchCellWidths = matchCellWidths;\n    exports.memoize = memoize;\n    exports.memoizeOutput = memoizeOutput;\n    exports.memoizeRendering = memoizeRendering;\n    exports.mergeEventStores = mergeEventStores;\n    exports.multiplyDuration = multiplyDuration;\n    exports.padStart = padStart;\n    exports.parseBusinessHours = parseBusinessHours;\n    exports.parseDragMeta = parseDragMeta;\n    exports.parseEventDef = parseEventDef;\n    exports.parseFieldSpecs = parseFieldSpecs;\n    exports.parseMarker = parse;\n    exports.pointInsideRect = pointInsideRect;\n    exports.prependToElement = prependToElement;\n    exports.preventContextMenu = preventContextMenu;\n    exports.preventDefault = preventDefault;\n    exports.preventSelection = preventSelection;\n    exports.processScopedUiProps = processScopedUiProps;\n    exports.rangeContainsMarker = rangeContainsMarker;\n    exports.rangeContainsRange = rangeContainsRange;\n    exports.rangesEqual = rangesEqual;\n    exports.rangesIntersect = rangesIntersect;\n    exports.refineProps = refineProps;\n    exports.removeElement = removeElement;\n    exports.removeExact = removeExact;\n    exports.renderDateCell = renderDateCell;\n    exports.requestJson = requestJson;\n    exports.sliceEventStore = sliceEventStore;\n    exports.startOfDay = startOfDay;\n    exports.subtractInnerElHeight = subtractInnerElHeight;\n    exports.translateRect = translateRect;\n    exports.uncompensateScroll = uncompensateScroll;\n    exports.undistributeHeight = undistributeHeight;\n    exports.unpromisify = unpromisify;\n    exports.version = version;\n    exports.whenTransitionDone = whenTransitionDone;\n    exports.wholeDivideDurations = wholeDivideDurations;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","import {NgModule,Component,Input,Output,EventEmitter,forwardRef,ChangeDetectorRef,ViewChild,ElementRef,ChangeDetectionStrategy} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {NG_VALUE_ACCESSOR, ControlValueAccessor, FormControl} from '@angular/forms';\n\nexport const CHECKBOX_VALUE_ACCESSOR: any = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => Checkbox),\n  multi: true\n};\n\n@Component({\n    selector: 'p-checkbox',\n    template: `\n        <div [ngStyle]=\"style\" [ngClass]=\"{'ui-chkbox ui-widget': true,'ui-chkbox-readonly': readonly}\" [class]=\"styleClass\">\n            <div class=\"ui-helper-hidden-accessible\">\n                <input #cb type=\"checkbox\" [attr.id]=\"inputId\" [attr.name]=\"name\" [readonly]=\"readonly\" [value]=\"value\" [checked]=\"checked\" (focus)=\"onFocus()\" (blur)=\"onBlur()\"\n                [ngClass]=\"{'ui-state-focus':focused}\" (change)=\"handleChange($event)\" [disabled]=\"disabled\" [attr.tabindex]=\"tabindex\" [attr.aria-labelledby]=\"ariaLabelledBy\" [attr.required]=\"required\">\n            </div>\n            <div class=\"ui-chkbox-box ui-widget ui-corner-all ui-state-default\" (click)=\"onClick($event,cb,true)\"\n                        [ngClass]=\"{'ui-state-active':checked,'ui-state-disabled':disabled,'ui-state-focus':focused}\" role=\"checkbox\" [attr.aria-checked]=\"checked\">\n                <span class=\"ui-chkbox-icon ui-clickable\" [ngClass]=\"checked ? checkboxIcon : null\"></span>\n            </div>\n        </div>\n        <label (click)=\"onClick($event,cb,true)\" [class]=\"labelStyleClass\"\n                [ngClass]=\"{'ui-chkbox-label': true, 'ui-label-active':checked, 'ui-label-disabled':disabled, 'ui-label-focus':focused}\"\n                *ngIf=\"label\" [attr.for]=\"inputId\">{{label}}</label>\n    `,\n    providers: [CHECKBOX_VALUE_ACCESSOR],\n    changeDetection: ChangeDetectionStrategy.Default\n})\nexport class Checkbox implements ControlValueAccessor {\n\n    @Input() value: any;\n\n    @Input() name: string;\n\n    @Input() disabled: boolean;\n    \n    @Input() binary: boolean;\n    \n    @Input() label: string;\n\n    @Input() ariaLabelledBy: string;\n\n    @Input() tabindex: number;\n\n    @Input() inputId: string;\n    \n    @Input() style: any;\n\n    @Input() styleClass: string;\n\n    @Input() labelStyleClass: string;\n    \n    @Input() formControl: FormControl;\n    \n    @Input() checkboxIcon: string = 'pi pi-check';\n    \n    @Input() readonly: boolean;\n\n    @Input() required: boolean;\n\n    @ViewChild('cb') inputViewChild: ElementRef;\n\n    @Output() onChange: EventEmitter<any> = new EventEmitter();\n    \n    model: any;\n    \n    onModelChange: Function = () => {};\n    \n    onModelTouched: Function = () => {};\n        \n    focused: boolean = false;\n    \n    checked: boolean = false;\n\n    constructor(private cd: ChangeDetectorRef) {}\n\n    onClick(event,checkbox,focus:boolean) {\n        event.preventDefault();\n        \n        if (this.disabled || this.readonly) {\n            return;\n        }\n        \n        this.checked = !this.checked;\n        this.updateModel(event);\n        \n        if (focus) {\n            checkbox.focus();\n        }\n    }\n    \n    updateModel(event) {\n        if (!this.binary) {\n            if (this.checked)\n                this.addValue();\n            else\n                this.removeValue();\n\n            this.onModelChange(this.model);\n            \n            if (this.formControl) {\n                this.formControl.setValue(this.model);\n            }\n        }\n        else {\n            this.onModelChange(this.checked);\n        }\n        \n        this.onChange.emit({checked:this.checked, originalEvent: event});\n    }\n    \n    handleChange(event) {\n        if (!this.readonly) {\n            this.checked = event.target.checked;\n            this.updateModel(event);\n        }\n    }\n\n    isChecked(): boolean {\n        if (this.binary)\n            return this.model;\n        else\n            return this.model && this.model.indexOf(this.value) > -1;\n    }\n\n    removeValue() {\n        this.model = this.model.filter(val => val !== this.value);\n    }\n\n    addValue() {\n        if (this.model)\n            this.model = [...this.model, this.value];\n        else\n            this.model = [this.value];\n    }\n    \n    onFocus() {\n        this.focused = true;\n    }\n\n    onBlur() {\n        this.focused = false;\n        this.onModelTouched();\n    }\n\n    focus() {\n        this.inputViewChild.nativeElement.focus();\n    }\n     \n    writeValue(model: any) : void {\n        this.model = model;\n        this.checked = this.isChecked();\n        this.cd.markForCheck();\n    }\n    \n    registerOnChange(fn: Function): void {\n        this.onModelChange = fn;\n    }\n\n    registerOnTouched(fn: Function): void {\n        this.onModelTouched = fn;\n    }\n    \n    setDisabledState(val: boolean): void {\n        this.disabled = val;\n    }\n}\n\n@NgModule({\n    imports: [CommonModule],\n    exports: [Checkbox],\n    declarations: [Checkbox]\n})\nexport class CheckboxModule { }\n","export * from './checkbox';","import {NgModule,Component,ElementRef,OnDestroy,Input,OnInit,AfterViewChecked,ChangeDetectionStrategy} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {Calendar} from '@fullcalendar/core';\n\n@Component({\n    selector: 'p-fullCalendar',\n    template: '<div [ngStyle]=\"style\" [class]=\"styleClass\"></div>',\n    changeDetection: ChangeDetectionStrategy.Default\n})\nexport class FullCalendar implements OnDestroy,OnInit,AfterViewChecked {\n        \n    @Input() style: any;\n\n    @Input() styleClass: string;\n             \n    initialized: boolean;\n            \n    calendar: any;\n    \n    config: any;\n\n    _options: any;\n\n    _events: any[];\n\n    constructor(public el: ElementRef) {}\n    \n    ngOnInit() {\n        this.config = {\n            theme: true\n        };\n\n        if (this.options) {\n            for (let prop in this.options) {\n                this.config[prop] = this.options[prop];\n            }\n        }\n    }\n    \n    ngAfterViewChecked() {\n        if (!this.initialized && this.el.nativeElement.offsetParent) {\n            this.initialize();\n        }\n    }\n    \n    @Input() get events(): any {\n        return this._events;\n    }\n\n    set events(value: any) {\n        this._events = value;\n\n        if (this._events && this.calendar) {\n            this.calendar.removeAllEventSources();\n            this.calendar.addEventSource(this._events);\n        }\n    }\n\n    @Input() get options(): any {\n        return this._options;\n    }\n\n    set options(value: any) {\n        this._options = value;\n\n        if (this._options && this.calendar) {\n            for (let prop in this._options) {\n                let optionValue = this._options[prop];\n                this.config[prop] = optionValue;\n                this.calendar.setOption(prop, optionValue);\n            }\n        }\n    }\n\n    initialize() {\n        this.calendar = new Calendar(this.el.nativeElement.children[0], this.config);\n        this.calendar.render();\n        this.initialized = true;\n        \n        if (this.events) {\n            this.calendar.removeAllEventSources();\n            this.calendar.addEventSource(this.events);\n        }\n    }\n\n    getCalendar() {\n        return this.calendar;\n    }\n     \n    ngOnDestroy() {\n        if (this.calendar) {\n            this.calendar.destroy();\n            this.initialized = false;\n            this.calendar = null;\n        }        \n    }\n}\n\n@NgModule({\n    imports: [CommonModule],\n    exports: [FullCalendar],\n    declarations: [FullCalendar]\n})\nexport class FullCalendarModule { }\n","export * from './fullcalendar';"]}